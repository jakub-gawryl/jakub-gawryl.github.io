var jC=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var LO=jC((HO,Wd)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eS(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var tS={exports:{}},Rd={},rS={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gu=Symbol.for("react.element"),WC=Symbol.for("react.portal"),XC=Symbol.for("react.fragment"),YC=Symbol.for("react.strict_mode"),QC=Symbol.for("react.profiler"),KC=Symbol.for("react.provider"),ZC=Symbol.for("react.context"),qC=Symbol.for("react.forward_ref"),JC=Symbol.for("react.suspense"),eP=Symbol.for("react.memo"),tP=Symbol.for("react.lazy"),G1=Symbol.iterator;function rP(t){return t===null||typeof t!="object"?null:(t=G1&&t[G1]||t["@@iterator"],typeof t=="function"?t:null)}var nS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iS=Object.assign,sS={};function ka(t,e,r){this.props=t,this.context=e,this.refs=sS,this.updater=r||nS}ka.prototype.isReactComponent={};ka.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ka.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oS(){}oS.prototype=ka.prototype;function O0(t,e,r){this.props=t,this.context=e,this.refs=sS,this.updater=r||nS}var L0=O0.prototype=new oS;L0.constructor=O0;iS(L0,ka.prototype);L0.isPureReactComponent=!0;var z1=Array.isArray,aS=Object.prototype.hasOwnProperty,U0={current:null},lS={key:!0,ref:!0,__self:!0,__source:!0};function uS(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)aS.call(e,n)&&!lS.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:gu,type:t,key:i,ref:o,props:s,_owner:U0.current}}function nP(t,e){return{$$typeof:gu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function G0(t){return typeof t=="object"&&t!==null&&t.$$typeof===gu}function iP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var H1=/\/+/g;function Tp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iP(""+t.key):e.toString(36)}function mh(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gu:case WC:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Tp(o,0):n,z1(s)?(r="",t!=null&&(r=t.replace(H1,"$&/")+"/"),mh(s,e,r,"",function(h){return h})):s!=null&&(G0(s)&&(s=nP(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(H1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",z1(t))for(var a=0;a<t.length;a++){i=t[a];var u=n+Tp(i,a);o+=mh(i,e,r,u,s)}else if(u=rP(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=n+Tp(i,a++),o+=mh(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xc(t,e,r){if(t==null)return t;var n=[],s=0;return mh(t,n,"","",function(i){return e.call(r,i,s++)}),n}function sP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var lr={current:null},gh={transition:null},oP={ReactCurrentDispatcher:lr,ReactCurrentBatchConfig:gh,ReactCurrentOwner:U0};ke.Children={map:xc,forEach:function(t,e,r){xc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return xc(t,function(){e++}),e},toArray:function(t){return xc(t,function(e){return e})||[]},only:function(t){if(!G0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Component=ka;ke.Fragment=XC;ke.Profiler=QC;ke.PureComponent=O0;ke.StrictMode=YC;ke.Suspense=JC;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oP;ke.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=iS({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=U0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)aS.call(e,u)&&!lS.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];n.children=a}return{$$typeof:gu,type:t.type,key:s,ref:i,props:n,_owner:o}};ke.createContext=function(t){return t={$$typeof:ZC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KC,_context:t},t.Consumer=t};ke.createElement=uS;ke.createFactory=function(t){var e=uS.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:qC,render:t}};ke.isValidElement=G0;ke.lazy=function(t){return{$$typeof:tP,_payload:{_status:-1,_result:t},_init:sP}};ke.memo=function(t,e){return{$$typeof:eP,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=gh.transition;gh.transition={};try{t()}finally{gh.transition=e}};ke.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ke.useCallback=function(t,e){return lr.current.useCallback(t,e)};ke.useContext=function(t){return lr.current.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t){return lr.current.useDeferredValue(t)};ke.useEffect=function(t,e){return lr.current.useEffect(t,e)};ke.useId=function(){return lr.current.useId()};ke.useImperativeHandle=function(t,e,r){return lr.current.useImperativeHandle(t,e,r)};ke.useInsertionEffect=function(t,e){return lr.current.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return lr.current.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return lr.current.useMemo(t,e)};ke.useReducer=function(t,e,r){return lr.current.useReducer(t,e,r)};ke.useRef=function(t){return lr.current.useRef(t)};ke.useState=function(t){return lr.current.useState(t)};ke.useSyncExternalStore=function(t,e,r){return lr.current.useSyncExternalStore(t,e,r)};ke.useTransition=function(){return lr.current.useTransition()};ke.version="18.2.0";rS.exports=ke;var xe=rS.exports;const jn=mu(xe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aP=xe,lP=Symbol.for("react.element"),uP=Symbol.for("react.fragment"),cP=Object.prototype.hasOwnProperty,hP=aP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dP={key:!0,ref:!0,__self:!0,__source:!0};function cS(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)cP.call(e,n)&&!dP.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:lP,type:t,key:i,ref:o,props:s,_owner:hP.current}}Rd.Fragment=uP;Rd.jsx=cS;Rd.jsxs=cS;tS.exports=Rd;var Pe=tS.exports,zm={},hS={exports:{}},kr={},dS={exports:{}},fS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,V){var G=O.length;O.push(V);e:for(;0<G;){var j=G-1>>>1,Z=O[j];if(0<s(Z,V))O[j]=V,O[G]=Z,G=j;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var V=O[0],G=O.pop();if(G!==V){O[0]=G;e:for(var j=0,Z=O.length,pe=Z>>>1;j<pe;){var ue=2*(j+1)-1,Te=O[ue],ve=ue+1,be=O[ve];if(0>s(Te,G))ve<Z&&0>s(be,Te)?(O[j]=be,O[ve]=G,j=ve):(O[j]=Te,O[ue]=G,j=ue);else if(ve<Z&&0>s(be,G))O[j]=be,O[ve]=G,j=ve;else break e}}return V}function s(O,V){var G=O.sortIndex-V.sortIndex;return G!==0?G:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],f=1,m=null,p=3,d=!1,g=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(O){for(var V=r(h);V!==null;){if(V.callback===null)n(h);else if(V.startTime<=O)n(h),V.sortIndex=V.expirationTime,e(u,V);else break;V=r(h)}}function A(O){if(y=!1,E(O),!g)if(r(u)!==null)g=!0,Q(b);else{var V=r(h);V!==null&&W(A,V.startTime-O)}}function b(O,V){g=!1,y&&(y=!1,w(P),P=-1),d=!0;var G=p;try{for(E(V),m=r(u);m!==null&&(!(m.expirationTime>V)||O&&!B());){var j=m.callback;if(typeof j=="function"){m.callback=null,p=m.priorityLevel;var Z=j(m.expirationTime<=V);V=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===r(u)&&n(u),E(V)}else n(u);m=r(u)}if(m!==null)var pe=!0;else{var ue=r(h);ue!==null&&W(A,ue.startTime-V),pe=!1}return pe}finally{m=null,p=G,d=!1}}var I=!1,R=null,P=-1,k=5,M=-1;function B(){return!(t.unstable_now()-M<k)}function F(){if(R!==null){var O=t.unstable_now();M=O;var V=!0;try{V=R(!0,O)}finally{V?N():(I=!1,R=null)}}else I=!1}var N;if(typeof T=="function")N=function(){T(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,H=U.port2;U.port1.onmessage=F,N=function(){H.postMessage(null)}}else N=function(){_(F,0)};function Q(O){R=O,I||(I=!0,N())}function W(O,V){P=_(function(){O(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,Q(b))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var G=p;p=V;try{return O()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=p;p=O;try{return V()}finally{p=G}},t.unstable_scheduleCallback=function(O,V,G){var j=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?j+G:j):G=j,O){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=G+Z,O={id:f++,callback:V,priorityLevel:O,startTime:G,expirationTime:Z,sortIndex:-1},G>j?(O.sortIndex=G,e(h,O),r(u)===null&&O===r(h)&&(y?(w(P),P=-1):y=!0,W(A,G-j))):(O.sortIndex=Z,e(u,O),g||d||(g=!0,Q(b))),O},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(O){var V=p;return function(){var G=p;p=V;try{return O.apply(this,arguments)}finally{p=G}}}})(fS);dS.exports=fS;var fP=dS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pS=xe,Rr=fP;function te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mS=new Set,Vl={};function ao(t,e){wa(t,e),wa(t+"Capture",e)}function wa(t,e){for(Vl[t]=e,t=0;t<e.length;t++)mS.add(e[t])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hm=Object.prototype.hasOwnProperty,pP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$1={},V1={};function mP(t){return Hm.call(V1,t)?!0:Hm.call($1,t)?!1:pP.test(t)?V1[t]=!0:($1[t]=!0,!1)}function gP(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vP(t,e,r,n){if(e===null||typeof e>"u"||gP(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ur(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wt[t]=new ur(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wt[e]=new ur(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wt[t]=new ur(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wt[t]=new ur(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wt[t]=new ur(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wt[t]=new ur(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wt[t]=new ur(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wt[t]=new ur(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wt[t]=new ur(t,5,!1,t.toLowerCase(),null,!1,!1)});var z0=/[\-:]([a-z])/g;function H0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(z0,H0);Wt[e]=new ur(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(z0,H0);Wt[e]=new ur(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(z0,H0);Wt[e]=new ur(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wt[t]=new ur(t,1,!1,t.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wt[t]=new ur(t,1,!1,t.toLowerCase(),null,!0,!0)});function $0(t,e,r,n){var s=Wt.hasOwnProperty(e)?Wt[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vP(e,r,s,n)&&(r=null),n||s===null?mP(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ai=pS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_c=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),jo=Symbol.for("react.fragment"),V0=Symbol.for("react.strict_mode"),$m=Symbol.for("react.profiler"),gS=Symbol.for("react.provider"),vS=Symbol.for("react.context"),j0=Symbol.for("react.forward_ref"),Vm=Symbol.for("react.suspense"),jm=Symbol.for("react.suspense_list"),W0=Symbol.for("react.memo"),$i=Symbol.for("react.lazy"),yS=Symbol.for("react.offscreen"),j1=Symbol.iterator;function nl(t){return t===null||typeof t!="object"?null:(t=j1&&t[j1]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,bp;function vl(t){if(bp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);bp=e&&e[1]||""}return`
`+bp+t}var Ap=!1;function Cp(t,e){if(!t||Ap)return"";Ap=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var n=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){n=h}t.call(e.prototype)}else{try{throw Error()}catch(h){n=h}t()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Ap=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?vl(t):""}function yP(t){switch(t.tag){case 5:return vl(t.type);case 16:return vl("Lazy");case 13:return vl("Suspense");case 19:return vl("SuspenseList");case 0:case 2:case 15:return t=Cp(t.type,!1),t;case 11:return t=Cp(t.type.render,!1),t;case 1:return t=Cp(t.type,!0),t;default:return""}}function Wm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jo:return"Fragment";case Vo:return"Portal";case $m:return"Profiler";case V0:return"StrictMode";case Vm:return"Suspense";case jm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vS:return(t.displayName||"Context")+".Consumer";case gS:return(t._context.displayName||"Context")+".Provider";case j0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case W0:return e=t.displayName||null,e!==null?e:Wm(t.type)||"Memo";case $i:e=t._payload,t=t._init;try{return Wm(t(e))}catch{}}return null}function xP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wm(e);case 8:return e===V0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _P(t){var e=xS(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wc(t){t._valueTracker||(t._valueTracker=_P(t))}function _S(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=xS(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Lh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Xm(t,e){var r=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function W1(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cs(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wS(t,e){e=e.checked,e!=null&&$0(t,"checked",e,!1)}function Ym(t,e){wS(t,e);var r=cs(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qm(t,e.type,r):e.hasOwnProperty("defaultValue")&&Qm(t,e.type,cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function X1(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Qm(t,e,r){(e!=="number"||Lh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var yl=Array.isArray;function oa(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Km(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Y1(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(te(92));if(yl(r)){if(1<r.length)throw Error(te(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cs(r)}}function SS(t,e){var r=cs(e.value),n=cs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Q1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ES(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ES(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sc,TS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sc=Sc||document.createElement("div"),Sc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wP=["Webkit","ms","Moz","O"];Object.keys(Rl).forEach(function(t){wP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rl[e]=Rl[t]})});function bS(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Rl.hasOwnProperty(t)&&Rl[t]?(""+e).trim():e+"px"}function AS(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=bS(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var SP=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qm(t,e){if(e){if(SP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function Jm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eg=null;function X0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tg=null,aa=null,la=null;function K1(t){if(t=xu(t)){if(typeof tg!="function")throw Error(te(280));var e=t.stateNode;e&&(e=Nd(e),tg(t.stateNode,t.type,e))}}function CS(t){aa?la?la.push(t):la=[t]:aa=t}function PS(){if(aa){var t=aa,e=la;if(la=aa=null,K1(t),e)for(t=0;t<e.length;t++)K1(e[t])}}function IS(t,e){return t(e)}function RS(){}var Pp=!1;function MS(t,e,r){if(Pp)return t(e,r);Pp=!0;try{return IS(t,e,r)}finally{Pp=!1,(aa!==null||la!==null)&&(RS(),PS())}}function Wl(t,e){var r=t.stateNode;if(r===null)return null;var n=Nd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(te(231,e,typeof r));return r}var rg=!1;if(xi)try{var il={};Object.defineProperty(il,"passive",{get:function(){rg=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{rg=!1}function EP(t,e,r,n,s,i,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(r,h)}catch(f){this.onError(f)}}var Ml=!1,Uh=null,Gh=!1,ng=null,TP={onError:function(t){Ml=!0,Uh=t}};function bP(t,e,r,n,s,i,o,a,u){Ml=!1,Uh=null,EP.apply(TP,arguments)}function AP(t,e,r,n,s,i,o,a,u){if(bP.apply(this,arguments),Ml){if(Ml){var h=Uh;Ml=!1,Uh=null}else throw Error(te(198));Gh||(Gh=!0,ng=h)}}function lo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function kS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Z1(t){if(lo(t)!==t)throw Error(te(188))}function CP(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(te(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Z1(s),t;if(i===n)return Z1(s),e;i=i.sibling}throw Error(te(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(te(189))}}if(r.alternate!==n)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?t:e}function DS(t){return t=CP(t),t!==null?FS(t):null}function FS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FS(t);if(e!==null)return e;t=t.sibling}return null}var NS=Rr.unstable_scheduleCallback,q1=Rr.unstable_cancelCallback,PP=Rr.unstable_shouldYield,IP=Rr.unstable_requestPaint,vt=Rr.unstable_now,RP=Rr.unstable_getCurrentPriorityLevel,Y0=Rr.unstable_ImmediatePriority,BS=Rr.unstable_UserBlockingPriority,zh=Rr.unstable_NormalPriority,MP=Rr.unstable_LowPriority,OS=Rr.unstable_IdlePriority,Md=null,Wn=null;function kP(t){if(Wn&&typeof Wn.onCommitFiberRoot=="function")try{Wn.onCommitFiberRoot(Md,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:NP,DP=Math.log,FP=Math.LN2;function NP(t){return t>>>=0,t===0?32:31-(DP(t)/FP|0)|0}var Ec=64,Tc=4194304;function xl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hh(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=xl(a):(i&=o,i!==0&&(n=xl(i)))}else o=r&~s,o!==0?n=xl(o):i!==0&&(n=xl(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-mn(e),s=1<<r,n|=t[r],e&=~s;return n}function BP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OP(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mn(i),a=1<<o,u=s[o];u===-1?(!(a&r)||a&n)&&(s[o]=BP(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function ig(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LS(){var t=Ec;return Ec<<=1,!(Ec&4194240)&&(Ec=64),t}function Ip(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=r}function LP(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-mn(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Q0(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-mn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var ze=0;function US(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GS,K0,zS,HS,$S,sg=!1,bc=[],ts=null,rs=null,ns=null,Xl=new Map,Yl=new Map,Xi=[],UP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J1(t,e){switch(t){case"focusin":case"focusout":ts=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":ns=null;break;case"pointerover":case"pointerout":Xl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(e.pointerId)}}function sl(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xu(e),e!==null&&K0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function GP(t,e,r,n,s){switch(e){case"focusin":return ts=sl(ts,t,e,r,n,s),!0;case"dragenter":return rs=sl(rs,t,e,r,n,s),!0;case"mouseover":return ns=sl(ns,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Xl.set(i,sl(Xl.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Yl.set(i,sl(Yl.get(i)||null,t,e,r,n,s)),!0}return!1}function VS(t){var e=Vs(t.target);if(e!==null){var r=lo(e);if(r!==null){if(e=r.tag,e===13){if(e=kS(r),e!==null){t.blockedOn=e,$S(t.priority,function(){zS(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=og(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);eg=n,r.target.dispatchEvent(n),eg=null}else return e=xu(r),e!==null&&K0(e),t.blockedOn=r,!1;e.shift()}return!0}function ex(t,e,r){vh(t)&&r.delete(e)}function zP(){sg=!1,ts!==null&&vh(ts)&&(ts=null),rs!==null&&vh(rs)&&(rs=null),ns!==null&&vh(ns)&&(ns=null),Xl.forEach(ex),Yl.forEach(ex)}function ol(t,e){t.blockedOn===e&&(t.blockedOn=null,sg||(sg=!0,Rr.unstable_scheduleCallback(Rr.unstable_NormalPriority,zP)))}function Ql(t){function e(s){return ol(s,t)}if(0<bc.length){ol(bc[0],t);for(var r=1;r<bc.length;r++){var n=bc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ts!==null&&ol(ts,t),rs!==null&&ol(rs,t),ns!==null&&ol(ns,t),Xl.forEach(e),Yl.forEach(e),r=0;r<Xi.length;r++)n=Xi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Xi.length&&(r=Xi[0],r.blockedOn===null);)VS(r),r.blockedOn===null&&Xi.shift()}var ua=Ai.ReactCurrentBatchConfig,$h=!0;function HP(t,e,r,n){var s=ze,i=ua.transition;ua.transition=null;try{ze=1,Z0(t,e,r,n)}finally{ze=s,ua.transition=i}}function $P(t,e,r,n){var s=ze,i=ua.transition;ua.transition=null;try{ze=4,Z0(t,e,r,n)}finally{ze=s,ua.transition=i}}function Z0(t,e,r,n){if($h){var s=og(t,e,r,n);if(s===null)Up(t,e,n,Vh,r),J1(t,n);else if(GP(s,t,e,r,n))n.stopPropagation();else if(J1(t,n),e&4&&-1<UP.indexOf(t)){for(;s!==null;){var i=xu(s);if(i!==null&&GS(i),i=og(t,e,r,n),i===null&&Up(t,e,n,Vh,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Up(t,e,n,null,r)}}var Vh=null;function og(t,e,r,n){if(Vh=null,t=X0(n),t=Vs(t),t!==null)if(e=lo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=kS(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vh=t,null}function jS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RP()){case Y0:return 1;case BS:return 4;case zh:case MP:return 16;case OS:return 536870912;default:return 16}default:return 16}}var Ki=null,q0=null,yh=null;function WS(){if(yh)return yh;var t,e=q0,r=e.length,n,s="value"in Ki?Ki.value:Ki.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return yh=s.slice(t,1<n?1-n:void 0)}function xh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ac(){return!0}function tx(){return!1}function Dr(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ac:tx,this.isPropagationStopped=tx,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),e}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},J0=Dr(Da),yu=lt({},Da,{view:0,detail:0}),VP=Dr(yu),Rp,Mp,al,kd=lt({},yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ev,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==al&&(al&&t.type==="mousemove"?(Rp=t.screenX-al.screenX,Mp=t.screenY-al.screenY):Mp=Rp=0,al=t),Rp)},movementY:function(t){return"movementY"in t?t.movementY:Mp}}),rx=Dr(kd),jP=lt({},kd,{dataTransfer:0}),WP=Dr(jP),XP=lt({},yu,{relatedTarget:0}),kp=Dr(XP),YP=lt({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),QP=Dr(YP),KP=lt({},Da,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZP=Dr(KP),qP=lt({},Da,{data:0}),nx=Dr(qP),JP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tI[t])?!!e[t]:!1}function ev(){return rI}var nI=lt({},yu,{key:function(t){if(t.key){var e=JP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ev,charCode:function(t){return t.type==="keypress"?xh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iI=Dr(nI),sI=lt({},kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ix=Dr(sI),oI=lt({},yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ev}),aI=Dr(oI),lI=lt({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),uI=Dr(lI),cI=lt({},kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hI=Dr(cI),dI=[9,13,27,32],tv=xi&&"CompositionEvent"in window,kl=null;xi&&"documentMode"in document&&(kl=document.documentMode);var fI=xi&&"TextEvent"in window&&!kl,XS=xi&&(!tv||kl&&8<kl&&11>=kl),sx=" ",ox=!1;function YS(t,e){switch(t){case"keyup":return dI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function pI(t,e){switch(t){case"compositionend":return QS(e);case"keypress":return e.which!==32?null:(ox=!0,sx);case"textInput":return t=e.data,t===sx&&ox?null:t;default:return null}}function mI(t,e){if(Wo)return t==="compositionend"||!tv&&YS(t,e)?(t=WS(),yh=q0=Ki=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XS&&e.locale!=="ko"?null:e.data;default:return null}}var gI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gI[t.type]:e==="textarea"}function KS(t,e,r,n){CS(n),e=jh(e,"onChange"),0<e.length&&(r=new J0("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Dl=null,Kl=null;function vI(t){aE(t,0)}function Dd(t){var e=Qo(t);if(_S(e))return t}function yI(t,e){if(t==="change")return e}var ZS=!1;if(xi){var Dp;if(xi){var Fp="oninput"in document;if(!Fp){var lx=document.createElement("div");lx.setAttribute("oninput","return;"),Fp=typeof lx.oninput=="function"}Dp=Fp}else Dp=!1;ZS=Dp&&(!document.documentMode||9<document.documentMode)}function ux(){Dl&&(Dl.detachEvent("onpropertychange",qS),Kl=Dl=null)}function qS(t){if(t.propertyName==="value"&&Dd(Kl)){var e=[];KS(e,Kl,t,X0(t)),MS(vI,e)}}function xI(t,e,r){t==="focusin"?(ux(),Dl=e,Kl=r,Dl.attachEvent("onpropertychange",qS)):t==="focusout"&&ux()}function _I(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dd(Kl)}function wI(t,e){if(t==="click")return Dd(e)}function SI(t,e){if(t==="input"||t==="change")return Dd(e)}function EI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:EI;function Zl(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Hm.call(e,s)||!xn(t[s],e[s]))return!1}return!0}function cx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hx(t,e){var r=cx(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cx(r)}}function JS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eE(){for(var t=window,e=Lh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Lh(t.document)}return e}function rv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TI(t){var e=eE(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&JS(r.ownerDocument.documentElement,r)){if(n!==null&&rv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=hx(r,i);var o=hx(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bI=xi&&"documentMode"in document&&11>=document.documentMode,Xo=null,ag=null,Fl=null,lg=!1;function dx(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;lg||Xo==null||Xo!==Lh(n)||(n=Xo,"selectionStart"in n&&rv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fl&&Zl(Fl,n)||(Fl=n,n=jh(ag,"onSelect"),0<n.length&&(e=new J0("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Xo)))}function Cc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Yo={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},Np={},tE={};xi&&(tE=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Fd(t){if(Np[t])return Np[t];if(!Yo[t])return t;var e=Yo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in tE)return Np[t]=e[r];return t}var rE=Fd("animationend"),nE=Fd("animationiteration"),iE=Fd("animationstart"),sE=Fd("transitionend"),oE=new Map,fx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){oE.set(t,e),ao(e,[t])}for(var Bp=0;Bp<fx.length;Bp++){var Op=fx[Bp],AI=Op.toLowerCase(),CI=Op[0].toUpperCase()+Op.slice(1);ps(AI,"on"+CI)}ps(rE,"onAnimationEnd");ps(nE,"onAnimationIteration");ps(iE,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(sE,"onTransitionEnd");wa("onMouseEnter",["mouseout","mouseover"]);wa("onMouseLeave",["mouseout","mouseover"]);wa("onPointerEnter",["pointerout","pointerover"]);wa("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PI=new Set("cancel close invalid load scroll toggle".split(" ").concat(_l));function px(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,AP(n,e,void 0,t),t.currentTarget=null}function aE(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;px(s,a,h),i=u}else for(o=0;o<n.length;o++){if(a=n[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;px(s,a,h),i=u}}}if(Gh)throw t=ng,Gh=!1,ng=null,t}function We(t,e){var r=e[fg];r===void 0&&(r=e[fg]=new Set);var n=t+"__bubble";r.has(n)||(lE(e,t,2,!1),r.add(n))}function Lp(t,e,r){var n=0;e&&(n|=4),lE(r,t,n,e)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function ql(t){if(!t[Pc]){t[Pc]=!0,mS.forEach(function(r){r!=="selectionchange"&&(PI.has(r)||Lp(r,!1,t),Lp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pc]||(e[Pc]=!0,Lp("selectionchange",!1,e))}}function lE(t,e,r,n){switch(jS(e)){case 1:var s=HP;break;case 4:s=$P;break;default:s=Z0}r=s.bind(null,e,r,t),s=void 0,!rg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Up(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Vs(a),o===null)return;if(u=o.tag,u===5||u===6){n=i=o;continue e}a=a.parentNode}}n=n.return}MS(function(){var h=i,f=X0(r),m=[];e:{var p=oE.get(t);if(p!==void 0){var d=J0,g=t;switch(t){case"keypress":if(xh(r)===0)break e;case"keydown":case"keyup":d=iI;break;case"focusin":g="focus",d=kp;break;case"focusout":g="blur",d=kp;break;case"beforeblur":case"afterblur":d=kp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=rx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=WP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=aI;break;case rE:case nE:case iE:d=QP;break;case sE:d=uI;break;case"scroll":d=VP;break;case"wheel":d=hI;break;case"copy":case"cut":case"paste":d=ZP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=ix}var y=(e&4)!==0,_=!y&&t==="scroll",w=y?p!==null?p+"Capture":null:p;y=[];for(var T=h,E;T!==null;){E=T;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,w!==null&&(A=Wl(T,w),A!=null&&y.push(Jl(T,A,E)))),_)break;T=T.return}0<y.length&&(p=new d(p,g,null,r,f),m.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",p&&r!==eg&&(g=r.relatedTarget||r.fromElement)&&(Vs(g)||g[_i]))break e;if((d||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,d?(g=r.relatedTarget||r.toElement,d=h,g=g?Vs(g):null,g!==null&&(_=lo(g),g!==_||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=h),d!==g)){if(y=rx,A="onMouseLeave",w="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(y=ix,A="onPointerLeave",w="onPointerEnter",T="pointer"),_=d==null?p:Qo(d),E=g==null?p:Qo(g),p=new y(A,T+"leave",d,r,f),p.target=_,p.relatedTarget=E,A=null,Vs(f)===h&&(y=new y(w,T+"enter",g,r,f),y.target=E,y.relatedTarget=_,A=y),_=A,d&&g)t:{for(y=d,w=g,T=0,E=y;E;E=Ro(E))T++;for(E=0,A=w;A;A=Ro(A))E++;for(;0<T-E;)y=Ro(y),T--;for(;0<E-T;)w=Ro(w),E--;for(;T--;){if(y===w||w!==null&&y===w.alternate)break t;y=Ro(y),w=Ro(w)}y=null}else y=null;d!==null&&mx(m,p,d,y,!1),g!==null&&_!==null&&mx(m,_,g,y,!0)}}e:{if(p=h?Qo(h):window,d=p.nodeName&&p.nodeName.toLowerCase(),d==="select"||d==="input"&&p.type==="file")var b=yI;else if(ax(p))if(ZS)b=SI;else{b=_I;var I=xI}else(d=p.nodeName)&&d.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=wI);if(b&&(b=b(t,h))){KS(m,b,r,f);break e}I&&I(t,p,h),t==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&Qm(p,"number",p.value)}switch(I=h?Qo(h):window,t){case"focusin":(ax(I)||I.contentEditable==="true")&&(Xo=I,ag=h,Fl=null);break;case"focusout":Fl=ag=Xo=null;break;case"mousedown":lg=!0;break;case"contextmenu":case"mouseup":case"dragend":lg=!1,dx(m,r,f);break;case"selectionchange":if(bI)break;case"keydown":case"keyup":dx(m,r,f)}var R;if(tv)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Wo?YS(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(XS&&r.locale!=="ko"&&(Wo||P!=="onCompositionStart"?P==="onCompositionEnd"&&Wo&&(R=WS()):(Ki=f,q0="value"in Ki?Ki.value:Ki.textContent,Wo=!0)),I=jh(h,P),0<I.length&&(P=new nx(P,t,null,r,f),m.push({event:P,listeners:I}),R?P.data=R:(R=QS(r),R!==null&&(P.data=R)))),(R=fI?pI(t,r):mI(t,r))&&(h=jh(h,"onBeforeInput"),0<h.length&&(f=new nx("onBeforeInput","beforeinput",null,r,f),m.push({event:f,listeners:h}),f.data=R))}aE(m,e)})}function Jl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jh(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wl(t,r),i!=null&&n.unshift(Jl(t,i,s)),i=Wl(t,e),i!=null&&n.push(Jl(t,i,s))),t=t.return}return n}function Ro(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mx(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,u=a.alternate,h=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&h!==null&&(a=h,s?(u=Wl(r,i),u!=null&&o.unshift(Jl(r,u,a))):s||(u=Wl(r,i),u!=null&&o.push(Jl(r,u,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var II=/\r\n?/g,RI=/\u0000|\uFFFD/g;function gx(t){return(typeof t=="string"?t:""+t).replace(II,`
`).replace(RI,"")}function Ic(t,e,r){if(e=gx(e),gx(t)!==e&&r)throw Error(te(425))}function Wh(){}var ug=null,cg=null;function hg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dg=typeof setTimeout=="function"?setTimeout:void 0,MI=typeof clearTimeout=="function"?clearTimeout:void 0,vx=typeof Promise=="function"?Promise:void 0,kI=typeof queueMicrotask=="function"?queueMicrotask:typeof vx<"u"?function(t){return vx.resolve(null).then(t).catch(DI)}:dg;function DI(t){setTimeout(function(){throw t})}function Gp(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Ql(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ql(e)}function is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Fa=Math.random().toString(36).slice(2),$n="__reactFiber$"+Fa,eu="__reactProps$"+Fa,_i="__reactContainer$"+Fa,fg="__reactEvents$"+Fa,FI="__reactListeners$"+Fa,NI="__reactHandles$"+Fa;function Vs(t){var e=t[$n];if(e)return e;for(var r=t.parentNode;r;){if(e=r[_i]||r[$n]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=yx(t);t!==null;){if(r=t[$n])return r;t=yx(t)}return e}t=r,r=t.parentNode}return null}function xu(t){return t=t[$n]||t[_i],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(te(33))}function Nd(t){return t[eu]||null}var pg=[],Ko=-1;function ms(t){return{current:t}}function Ye(t){0>Ko||(t.current=pg[Ko],pg[Ko]=null,Ko--)}function je(t,e){Ko++,pg[Ko]=t.current,t.current=e}var hs={},tr=ms(hs),vr=ms(!1),eo=hs;function Sa(t,e){var r=t.type.contextTypes;if(!r)return hs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function yr(t){return t=t.childContextTypes,t!=null}function Xh(){Ye(vr),Ye(tr)}function xx(t,e,r){if(tr.current!==hs)throw Error(te(168));je(tr,e),je(vr,r)}function uE(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(te(108,xP(t)||"Unknown",s));return lt({},r,n)}function Yh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,eo=tr.current,je(tr,t),je(vr,vr.current),!0}function _x(t,e,r){var n=t.stateNode;if(!n)throw Error(te(169));r?(t=uE(t,e,eo),n.__reactInternalMemoizedMergedChildContext=t,Ye(vr),Ye(tr),je(tr,t)):Ye(vr),je(vr,r)}var ci=null,Bd=!1,zp=!1;function cE(t){ci===null?ci=[t]:ci.push(t)}function BI(t){Bd=!0,cE(t)}function gs(){if(!zp&&ci!==null){zp=!0;var t=0,e=ze;try{var r=ci;for(ze=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}ci=null,Bd=!1}catch(s){throw ci!==null&&(ci=ci.slice(t+1)),NS(Y0,gs),s}finally{ze=e,zp=!1}}return null}var Zo=[],qo=0,Qh=null,Kh=0,Vr=[],jr=0,to=null,hi=1,di="";function Fs(t,e){Zo[qo++]=Kh,Zo[qo++]=Qh,Qh=t,Kh=e}function hE(t,e,r){Vr[jr++]=hi,Vr[jr++]=di,Vr[jr++]=to,to=t;var n=hi;t=di;var s=32-mn(n)-1;n&=~(1<<s),r+=1;var i=32-mn(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,hi=1<<32-mn(e)+s|r<<s|n,di=i+t}else hi=1<<i|r<<s|n,di=t}function nv(t){t.return!==null&&(Fs(t,1),hE(t,1,0))}function iv(t){for(;t===Qh;)Qh=Zo[--qo],Zo[qo]=null,Kh=Zo[--qo],Zo[qo]=null;for(;t===to;)to=Vr[--jr],Vr[jr]=null,di=Vr[--jr],Vr[jr]=null,hi=Vr[--jr],Vr[jr]=null}var Pr=null,Cr=null,et=!1,hn=null;function dE(t,e){var r=Wr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function wx(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pr=t,Cr=is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pr=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=to!==null?{id:hi,overflow:di}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Wr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Pr=t,Cr=null,!0):!1;default:return!1}}function mg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gg(t){if(et){var e=Cr;if(e){var r=e;if(!wx(t,e)){if(mg(t))throw Error(te(418));e=is(r.nextSibling);var n=Pr;e&&wx(t,e)?dE(n,r):(t.flags=t.flags&-4097|2,et=!1,Pr=t)}}else{if(mg(t))throw Error(te(418));t.flags=t.flags&-4097|2,et=!1,Pr=t}}}function Sx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pr=t}function Rc(t){if(t!==Pr)return!1;if(!et)return Sx(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hg(t.type,t.memoizedProps)),e&&(e=Cr)){if(mg(t))throw fE(),Error(te(418));for(;e;)dE(t,e),e=is(e.nextSibling)}if(Sx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Cr=is(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=Pr?is(t.stateNode.nextSibling):null;return!0}function fE(){for(var t=Cr;t;)t=is(t.nextSibling)}function Ea(){Cr=Pr=null,et=!1}function sv(t){hn===null?hn=[t]:hn.push(t)}var OI=Ai.ReactCurrentBatchConfig;function un(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Zh=ms(null),qh=null,Jo=null,ov=null;function av(){ov=Jo=qh=null}function lv(t){var e=Zh.current;Ye(Zh),t._currentValue=e}function vg(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ca(t,e){qh=t,ov=Jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mr=!0),t.firstContext=null)}function Kr(t){var e=t._currentValue;if(ov!==t)if(t={context:t,memoizedValue:e,next:null},Jo===null){if(qh===null)throw Error(te(308));Jo=t,qh.dependencies={lanes:0,firstContext:t}}else Jo=Jo.next=t;return e}var js=null;function uv(t){js===null?js=[t]:js.push(t)}function pE(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,uv(e)):(r.next=s.next,s.next=r),e.interleaved=r,wi(t,n)}function wi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Vi=!1;function cv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ss(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ne&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,wi(t,r)}return s=n.interleaved,s===null?(e.next=e,uv(n)):(e.next=s.next,s.next=e),n.interleaved=e,wi(t,r)}function _h(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Q0(t,r)}}function Ex(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Jh(t,e,r,n){var s=t.updateQueue;Vi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=h:a.next=h,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,f=h=u=null,a=i;do{var p=a.lane,d=a.eventTime;if((n&p)===p){f!==null&&(f=f.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(p=e,d=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){m=g.call(d,m,p);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,p=typeof g=="function"?g.call(d,m,p):g,p==null)break e;m=lt({},m,p);break e;case 2:Vi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else d={eventTime:d,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(h=f=d,u=m):f=f.next=d,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);no|=o,t.lanes=o,t.memoizedState=m}}function Tx(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(te(191,s));s.call(n)}}}var gE=new pS.Component().refs;function yg(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:lt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Od={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=or(),s=as(t),i=gi(n,s);i.payload=e,r!=null&&(i.callback=r),e=ss(t,i,s),e!==null&&(gn(e,t,s,n),_h(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=or(),s=as(t),i=gi(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=ss(t,i,s),e!==null&&(gn(e,t,s,n),_h(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=or(),n=as(t),s=gi(r,n);s.tag=2,e!=null&&(s.callback=e),e=ss(t,s,n),e!==null&&(gn(e,t,n,r),_h(e,t,n))}};function bx(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Zl(r,n)||!Zl(s,i):!0}function vE(t,e,r){var n=!1,s=hs,i=e.contextType;return typeof i=="object"&&i!==null?i=Kr(i):(s=yr(e)?eo:tr.current,n=e.contextTypes,i=(n=n!=null)?Sa(t,s):hs),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Od,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ax(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Od.enqueueReplaceState(e,e.state,null)}function xg(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs=gE,cv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kr(i):(i=yr(e)?eo:tr.current,s.context=Sa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yg(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Od.enqueueReplaceState(s,s.state,null),Jh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ll(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var n=r.stateNode}if(!n)throw Error(te(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===gE&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,t))}return t}function Mc(t,e){throw t=Object.prototype.toString.call(e),Error(te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cx(t){var e=t._init;return e(t._payload)}function yE(t){function e(w,T){if(t){var E=w.deletions;E===null?(w.deletions=[T],w.flags|=16):E.push(T)}}function r(w,T){if(!t)return null;for(;T!==null;)e(w,T),T=T.sibling;return null}function n(w,T){for(w=new Map;T!==null;)T.key!==null?w.set(T.key,T):w.set(T.index,T),T=T.sibling;return w}function s(w,T){return w=ls(w,T),w.index=0,w.sibling=null,w}function i(w,T,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<T?(w.flags|=2,T):E):(w.flags|=2,T)):(w.flags|=1048576,T)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,T,E,A){return T===null||T.tag!==6?(T=Yp(E,w.mode,A),T.return=w,T):(T=s(T,E),T.return=w,T)}function u(w,T,E,A){var b=E.type;return b===jo?f(w,T,E.props.children,A,E.key):T!==null&&(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$i&&Cx(b)===T.type)?(A=s(T,E.props),A.ref=ll(w,T,E),A.return=w,A):(A=Ah(E.type,E.key,E.props,null,w.mode,A),A.ref=ll(w,T,E),A.return=w,A)}function h(w,T,E,A){return T===null||T.tag!==4||T.stateNode.containerInfo!==E.containerInfo||T.stateNode.implementation!==E.implementation?(T=Qp(E,w.mode,A),T.return=w,T):(T=s(T,E.children||[]),T.return=w,T)}function f(w,T,E,A,b){return T===null||T.tag!==7?(T=Qs(E,w.mode,A,b),T.return=w,T):(T=s(T,E),T.return=w,T)}function m(w,T,E){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Yp(""+T,w.mode,E),T.return=w,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case _c:return E=Ah(T.type,T.key,T.props,null,w.mode,E),E.ref=ll(w,null,T),E.return=w,E;case Vo:return T=Qp(T,w.mode,E),T.return=w,T;case $i:var A=T._init;return m(w,A(T._payload),E)}if(yl(T)||nl(T))return T=Qs(T,w.mode,E,null),T.return=w,T;Mc(w,T)}return null}function p(w,T,E,A){var b=T!==null?T.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return b!==null?null:a(w,T,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case _c:return E.key===b?u(w,T,E,A):null;case Vo:return E.key===b?h(w,T,E,A):null;case $i:return b=E._init,p(w,T,b(E._payload),A)}if(yl(E)||nl(E))return b!==null?null:f(w,T,E,A,null);Mc(w,E)}return null}function d(w,T,E,A,b){if(typeof A=="string"&&A!==""||typeof A=="number")return w=w.get(E)||null,a(T,w,""+A,b);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case _c:return w=w.get(A.key===null?E:A.key)||null,u(T,w,A,b);case Vo:return w=w.get(A.key===null?E:A.key)||null,h(T,w,A,b);case $i:var I=A._init;return d(w,T,E,I(A._payload),b)}if(yl(A)||nl(A))return w=w.get(E)||null,f(T,w,A,b,null);Mc(T,A)}return null}function g(w,T,E,A){for(var b=null,I=null,R=T,P=T=0,k=null;R!==null&&P<E.length;P++){R.index>P?(k=R,R=null):k=R.sibling;var M=p(w,R,E[P],A);if(M===null){R===null&&(R=k);break}t&&R&&M.alternate===null&&e(w,R),T=i(M,T,P),I===null?b=M:I.sibling=M,I=M,R=k}if(P===E.length)return r(w,R),et&&Fs(w,P),b;if(R===null){for(;P<E.length;P++)R=m(w,E[P],A),R!==null&&(T=i(R,T,P),I===null?b=R:I.sibling=R,I=R);return et&&Fs(w,P),b}for(R=n(w,R);P<E.length;P++)k=d(R,w,P,E[P],A),k!==null&&(t&&k.alternate!==null&&R.delete(k.key===null?P:k.key),T=i(k,T,P),I===null?b=k:I.sibling=k,I=k);return t&&R.forEach(function(B){return e(w,B)}),et&&Fs(w,P),b}function y(w,T,E,A){var b=nl(E);if(typeof b!="function")throw Error(te(150));if(E=b.call(E),E==null)throw Error(te(151));for(var I=b=null,R=T,P=T=0,k=null,M=E.next();R!==null&&!M.done;P++,M=E.next()){R.index>P?(k=R,R=null):k=R.sibling;var B=p(w,R,M.value,A);if(B===null){R===null&&(R=k);break}t&&R&&B.alternate===null&&e(w,R),T=i(B,T,P),I===null?b=B:I.sibling=B,I=B,R=k}if(M.done)return r(w,R),et&&Fs(w,P),b;if(R===null){for(;!M.done;P++,M=E.next())M=m(w,M.value,A),M!==null&&(T=i(M,T,P),I===null?b=M:I.sibling=M,I=M);return et&&Fs(w,P),b}for(R=n(w,R);!M.done;P++,M=E.next())M=d(R,w,P,M.value,A),M!==null&&(t&&M.alternate!==null&&R.delete(M.key===null?P:M.key),T=i(M,T,P),I===null?b=M:I.sibling=M,I=M);return t&&R.forEach(function(F){return e(w,F)}),et&&Fs(w,P),b}function _(w,T,E,A){if(typeof E=="object"&&E!==null&&E.type===jo&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case _c:e:{for(var b=E.key,I=T;I!==null;){if(I.key===b){if(b=E.type,b===jo){if(I.tag===7){r(w,I.sibling),T=s(I,E.props.children),T.return=w,w=T;break e}}else if(I.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$i&&Cx(b)===I.type){r(w,I.sibling),T=s(I,E.props),T.ref=ll(w,I,E),T.return=w,w=T;break e}r(w,I);break}else e(w,I);I=I.sibling}E.type===jo?(T=Qs(E.props.children,w.mode,A,E.key),T.return=w,w=T):(A=Ah(E.type,E.key,E.props,null,w.mode,A),A.ref=ll(w,T,E),A.return=w,w=A)}return o(w);case Vo:e:{for(I=E.key;T!==null;){if(T.key===I)if(T.tag===4&&T.stateNode.containerInfo===E.containerInfo&&T.stateNode.implementation===E.implementation){r(w,T.sibling),T=s(T,E.children||[]),T.return=w,w=T;break e}else{r(w,T);break}else e(w,T);T=T.sibling}T=Qp(E,w.mode,A),T.return=w,w=T}return o(w);case $i:return I=E._init,_(w,T,I(E._payload),A)}if(yl(E))return g(w,T,E,A);if(nl(E))return y(w,T,E,A);Mc(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,T!==null&&T.tag===6?(r(w,T.sibling),T=s(T,E),T.return=w,w=T):(r(w,T),T=Yp(E,w.mode,A),T.return=w,w=T),o(w)):r(w,T)}return _}var Ta=yE(!0),xE=yE(!1),_u={},Xn=ms(_u),tu=ms(_u),ru=ms(_u);function Ws(t){if(t===_u)throw Error(te(174));return t}function hv(t,e){switch(je(ru,e),je(tu,t),je(Xn,_u),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zm(e,t)}Ye(Xn),je(Xn,e)}function ba(){Ye(Xn),Ye(tu),Ye(ru)}function _E(t){Ws(ru.current);var e=Ws(Xn.current),r=Zm(e,t.type);e!==r&&(je(tu,t),je(Xn,r))}function dv(t){tu.current===t&&(Ye(Xn),Ye(tu))}var it=ms(0);function ed(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hp=[];function fv(){for(var t=0;t<Hp.length;t++)Hp[t]._workInProgressVersionPrimary=null;Hp.length=0}var wh=Ai.ReactCurrentDispatcher,$p=Ai.ReactCurrentBatchConfig,ro=0,at=null,bt=null,kt=null,td=!1,Nl=!1,nu=0,LI=0;function qt(){throw Error(te(321))}function pv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!xn(t[r],e[r]))return!1;return!0}function mv(t,e,r,n,s,i){if(ro=i,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wh.current=t===null||t.memoizedState===null?HI:$I,t=r(n,s),Nl){i=0;do{if(Nl=!1,nu=0,25<=i)throw Error(te(301));i+=1,kt=bt=null,e.updateQueue=null,wh.current=VI,t=r(n,s)}while(Nl)}if(wh.current=rd,e=bt!==null&&bt.next!==null,ro=0,kt=bt=at=null,td=!1,e)throw Error(te(300));return t}function gv(){var t=nu!==0;return nu=0,t}function Un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?at.memoizedState=kt=t:kt=kt.next=t,kt}function Zr(){if(bt===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=bt.next;var e=kt===null?at.memoizedState:kt.next;if(e!==null)kt=e,bt=t;else{if(t===null)throw Error(te(310));bt=t,t={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},kt===null?at.memoizedState=kt=t:kt=kt.next=t}return kt}function iu(t,e){return typeof e=="function"?e(t):e}function Vp(t){var e=Zr(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=bt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,u=null,h=i;do{var f=h.lane;if((ro&f)===f)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:t(n,h.action);else{var m={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=m,o=n):u=u.next=m,at.lanes|=f,no|=f}h=h.next}while(h!==null&&h!==i);u===null?o=n:u.next=a,xn(n,e.memoizedState)||(mr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,at.lanes|=i,no|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function jp(t){var e=Zr(),r=e.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);xn(i,e.memoizedState)||(mr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function wE(){}function SE(t,e){var r=at,n=Zr(),s=e(),i=!xn(n.memoizedState,s);if(i&&(n.memoizedState=s,mr=!0),n=n.queue,vv(bE.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||kt!==null&&kt.memoizedState.tag&1){if(r.flags|=2048,su(9,TE.bind(null,r,n,s,e),void 0,null),Bt===null)throw Error(te(349));ro&30||EE(r,e,s)}return s}function EE(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function TE(t,e,r,n){e.value=r,e.getSnapshot=n,AE(e)&&CE(t)}function bE(t,e,r){return r(function(){AE(e)&&CE(t)})}function AE(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!xn(t,r)}catch{return!0}}function CE(t){var e=wi(t,1);e!==null&&gn(e,t,1,-1)}function Px(t){var e=Un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:t},e.queue=t,t=t.dispatch=zI.bind(null,at,t),[e.memoizedState,t]}function su(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function PE(){return Zr().memoizedState}function Sh(t,e,r,n){var s=Un();at.flags|=t,s.memoizedState=su(1|e,r,void 0,n===void 0?null:n)}function Ld(t,e,r,n){var s=Zr();n=n===void 0?null:n;var i=void 0;if(bt!==null){var o=bt.memoizedState;if(i=o.destroy,n!==null&&pv(n,o.deps)){s.memoizedState=su(e,r,i,n);return}}at.flags|=t,s.memoizedState=su(1|e,r,i,n)}function Ix(t,e){return Sh(8390656,8,t,e)}function vv(t,e){return Ld(2048,8,t,e)}function IE(t,e){return Ld(4,2,t,e)}function RE(t,e){return Ld(4,4,t,e)}function ME(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kE(t,e,r){return r=r!=null?r.concat([t]):null,Ld(4,4,ME.bind(null,e,t),r)}function yv(){}function DE(t,e){var r=Zr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function FE(t,e){var r=Zr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function NE(t,e,r){return ro&21?(xn(r,e)||(r=LS(),at.lanes|=r,no|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mr=!0),t.memoizedState=r)}function UI(t,e){var r=ze;ze=r!==0&&4>r?r:4,t(!0);var n=$p.transition;$p.transition={};try{t(!1),e()}finally{ze=r,$p.transition=n}}function BE(){return Zr().memoizedState}function GI(t,e,r){var n=as(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},OE(t))LE(e,r);else if(r=pE(t,e,r,n),r!==null){var s=or();gn(r,t,n,s),UE(r,e,n)}}function zI(t,e,r){var n=as(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(OE(t))LE(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,xn(a,o)){var u=e.interleaved;u===null?(s.next=s,uv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=pE(t,e,s,n),r!==null&&(s=or(),gn(r,t,n,s),UE(r,e,n))}}function OE(t){var e=t.alternate;return t===at||e!==null&&e===at}function LE(t,e){Nl=td=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function UE(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Q0(t,r)}}var rd={readContext:Kr,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},HI={readContext:Kr,useCallback:function(t,e){return Un().memoizedState=[t,e===void 0?null:e],t},useContext:Kr,useEffect:Ix,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Sh(4194308,4,ME.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Sh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sh(4,2,t,e)},useMemo:function(t,e){var r=Un();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Un();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=GI.bind(null,at,t),[n.memoizedState,t]},useRef:function(t){var e=Un();return t={current:t},e.memoizedState=t},useState:Px,useDebugValue:yv,useDeferredValue:function(t){return Un().memoizedState=t},useTransition:function(){var t=Px(!1),e=t[0];return t=UI.bind(null,t[1]),Un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=at,s=Un();if(et){if(r===void 0)throw Error(te(407));r=r()}else{if(r=e(),Bt===null)throw Error(te(349));ro&30||EE(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,Ix(bE.bind(null,n,i,t),[t]),n.flags|=2048,su(9,TE.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Un(),e=Bt.identifierPrefix;if(et){var r=di,n=hi;r=(n&~(1<<32-mn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=nu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=LI++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$I={readContext:Kr,useCallback:DE,useContext:Kr,useEffect:vv,useImperativeHandle:kE,useInsertionEffect:IE,useLayoutEffect:RE,useMemo:FE,useReducer:Vp,useRef:PE,useState:function(){return Vp(iu)},useDebugValue:yv,useDeferredValue:function(t){var e=Zr();return NE(e,bt.memoizedState,t)},useTransition:function(){var t=Vp(iu)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:wE,useSyncExternalStore:SE,useId:BE,unstable_isNewReconciler:!1},VI={readContext:Kr,useCallback:DE,useContext:Kr,useEffect:vv,useImperativeHandle:kE,useInsertionEffect:IE,useLayoutEffect:RE,useMemo:FE,useReducer:jp,useRef:PE,useState:function(){return jp(iu)},useDebugValue:yv,useDeferredValue:function(t){var e=Zr();return bt===null?e.memoizedState=t:NE(e,bt.memoizedState,t)},useTransition:function(){var t=jp(iu)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:wE,useSyncExternalStore:SE,useId:BE,unstable_isNewReconciler:!1};function Aa(t,e){try{var r="",n=e;do r+=yP(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function _g(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var jI=typeof WeakMap=="function"?WeakMap:Map;function GE(t,e,r){r=gi(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){id||(id=!0,Rg=n),_g(t,e)},r}function zE(t,e,r){r=gi(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){_g(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){_g(t,e),typeof n!="function"&&(os===null?os=new Set([this]):os.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Rx(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new jI;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=s2.bind(null,t,e,r),e.then(t,t))}function Mx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kx(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=gi(-1,1),e.tag=2,ss(r,e,1))),r.lanes|=1),t)}var WI=Ai.ReactCurrentOwner,mr=!1;function sr(t,e,r,n){e.child=t===null?xE(e,null,r,n):Ta(e,t.child,r,n)}function Dx(t,e,r,n,s){r=r.render;var i=e.ref;return ca(e,s),n=mv(t,e,r,n,i,s),r=gv(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Si(t,e,s)):(et&&r&&nv(e),e.flags|=1,sr(t,e,n,s),e.child)}function Fx(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Av(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,HE(t,e,i,n,s)):(t=Ah(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Zl,r(o,n)&&t.ref===e.ref)return Si(t,e,s)}return e.flags|=1,t=ls(i,n),t.ref=e.ref,t.return=e,e.child=t}function HE(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Zl(i,n)&&t.ref===e.ref)if(mr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(mr=!0);else return e.lanes=t.lanes,Si(t,e,s)}return wg(t,e,r,n,s)}function $E(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(ta,Ar),Ar|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(ta,Ar),Ar|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,je(ta,Ar),Ar|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,je(ta,Ar),Ar|=n;return sr(t,e,s,r),e.child}function VE(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function wg(t,e,r,n,s){var i=yr(r)?eo:tr.current;return i=Sa(e,i),ca(e,s),r=mv(t,e,r,n,i,s),n=gv(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Si(t,e,s)):(et&&n&&nv(e),e.flags|=1,sr(t,e,r,s),e.child)}function Nx(t,e,r,n,s){if(yr(r)){var i=!0;Yh(e)}else i=!1;if(ca(e,s),e.stateNode===null)Eh(t,e),vE(e,r,n),xg(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=Kr(h):(h=yr(r)?eo:tr.current,h=Sa(e,h));var f=r.getDerivedStateFromProps,m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||u!==h)&&Ax(e,o,n,h),Vi=!1;var p=e.memoizedState;o.state=p,Jh(e,n,o,s),u=e.memoizedState,a!==n||p!==u||vr.current||Vi?(typeof f=="function"&&(yg(e,r,f,n),u=e.memoizedState),(a=Vi||bx(e,r,a,n,p,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=h,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,mE(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:un(e.type,a),o.props=h,m=e.pendingProps,p=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=Kr(u):(u=yr(r)?eo:tr.current,u=Sa(e,u));var d=r.getDerivedStateFromProps;(f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==m||p!==u)&&Ax(e,o,n,u),Vi=!1,p=e.memoizedState,o.state=p,Jh(e,n,o,s);var g=e.memoizedState;a!==m||p!==g||vr.current||Vi?(typeof d=="function"&&(yg(e,r,d,n),g=e.memoizedState),(h=Vi||bx(e,r,h,n,p,g,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=u,n=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Sg(t,e,r,n,i,s)}function Sg(t,e,r,n,s,i){VE(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&_x(e,r,!1),Si(t,e,i);n=e.stateNode,WI.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ta(e,t.child,null,i),e.child=Ta(e,null,a,i)):sr(t,e,a,i),e.memoizedState=n.state,s&&_x(e,r,!0),e.child}function jE(t){var e=t.stateNode;e.pendingContext?xx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xx(t,e.context,!1),hv(t,e.containerInfo)}function Bx(t,e,r,n,s){return Ea(),sv(s),e.flags|=256,sr(t,e,r,n),e.child}var Eg={dehydrated:null,treeContext:null,retryLane:0};function Tg(t){return{baseLanes:t,cachePool:null,transitions:null}}function WE(t,e,r){var n=e.pendingProps,s=it.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),je(it,s&1),t===null)return gg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=zd(o,n,0,null),t=Qs(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Tg(r),e.memoizedState=Eg,t):xv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return XI(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ls(s,u),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ls(a,i):(i=Qs(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Tg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Eg,n}return i=t.child,t=i.sibling,n=ls(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function xv(t,e){return e=zd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kc(t,e,r,n){return n!==null&&sv(n),Ta(e,t.child,null,r),t=xv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XI(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Wp(Error(te(422))),kc(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=zd({mode:"visible",children:n.children},s,0,null),i=Qs(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ta(e,t.child,null,o),e.child.memoizedState=Tg(o),e.memoizedState=Eg,i);if(!(e.mode&1))return kc(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(te(419)),n=Wp(i,n,void 0),kc(t,e,o,n)}if(a=(o&t.childLanes)!==0,mr||a){if(n=Bt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,wi(t,s),gn(n,t,s,-1))}return bv(),n=Wp(Error(te(421))),kc(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=o2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Cr=is(s.nextSibling),Pr=e,et=!0,hn=null,t!==null&&(Vr[jr++]=hi,Vr[jr++]=di,Vr[jr++]=to,hi=t.id,di=t.overflow,to=e),e=xv(e,n.children),e.flags|=4096,e)}function Ox(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),vg(t.return,e,r)}function Xp(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function XE(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(sr(t,e,n.children,r),n=it.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ox(t,r,e);else if(t.tag===19)Ox(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(je(it,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&ed(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Xp(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ed(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Xp(e,!0,r,null,i);break;case"together":Xp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Eh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Si(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),no|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(te(153));if(e.child!==null){for(t=e.child,r=ls(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ls(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function YI(t,e,r){switch(e.tag){case 3:jE(e),Ea();break;case 5:_E(e);break;case 1:yr(e.type)&&Yh(e);break;case 4:hv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;je(Zh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(je(it,it.current&1),e.flags|=128,null):r&e.child.childLanes?WE(t,e,r):(je(it,it.current&1),t=Si(t,e,r),t!==null?t.sibling:null);je(it,it.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return XE(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(it,it.current),n)break;return null;case 22:case 23:return e.lanes=0,$E(t,e,r)}return Si(t,e,r)}var YE,bg,QE,KE;YE=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};bg=function(){};QE=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Ws(Xn.current);var i=null;switch(r){case"input":s=Xm(t,s),n=Xm(t,n),i=[];break;case"select":s=lt({},s,{value:void 0}),n=lt({},n,{value:void 0}),i=[];break;case"textarea":s=Km(t,s),n=Km(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Wh)}qm(r,n);var o;r=null;for(h in s)if(!n.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var a=s[h];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Vl.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var u=n[h];if(a=s!=null?s[h]:void 0,n.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(i||(i=[]),i.push(h,r)),r=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Vl.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&We("scroll",t),i||a===u||(i=[])):(i=i||[]).push(h,u))}r&&(i=i||[]).push("style",r);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};KE=function(t,e,r,n){r!==n&&(e.flags|=4)};function ul(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function QI(t,e,r){var n=e.pendingProps;switch(iv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return yr(e.type)&&Xh(),Jt(e),null;case 3:return n=e.stateNode,ba(),Ye(vr),Ye(tr),fv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Rc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Dg(hn),hn=null))),bg(t,e),Jt(e),null;case 5:dv(e);var s=Ws(ru.current);if(r=e.type,t!==null&&e.stateNode!=null)QE(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(te(166));return Jt(e),null}if(t=Ws(Xn.current),Rc(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[$n]=e,n[eu]=i,t=(e.mode&1)!==0,r){case"dialog":We("cancel",n),We("close",n);break;case"iframe":case"object":case"embed":We("load",n);break;case"video":case"audio":for(s=0;s<_l.length;s++)We(_l[s],n);break;case"source":We("error",n);break;case"img":case"image":case"link":We("error",n),We("load",n);break;case"details":We("toggle",n);break;case"input":W1(n,i),We("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},We("invalid",n);break;case"textarea":Y1(n,i),We("invalid",n)}qm(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ic(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ic(n.textContent,a,t),s=["children",""+a]):Vl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&We("scroll",n)}switch(r){case"input":wc(n),X1(n,i,!0);break;case"textarea":wc(n),Q1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Wh)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ES(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[$n]=e,t[eu]=n,YE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Jm(r,n),r){case"dialog":We("cancel",t),We("close",t),s=n;break;case"iframe":case"object":case"embed":We("load",t),s=n;break;case"video":case"audio":for(s=0;s<_l.length;s++)We(_l[s],t);s=n;break;case"source":We("error",t),s=n;break;case"img":case"image":case"link":We("error",t),We("load",t),s=n;break;case"details":We("toggle",t),s=n;break;case"input":W1(t,n),s=Xm(t,n),We("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=lt({},n,{value:void 0}),We("invalid",t);break;case"textarea":Y1(t,n),s=Km(t,n),We("invalid",t);break;default:s=n}qm(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?AS(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&TS(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&jl(t,u):typeof u=="number"&&jl(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&We("scroll",t):u!=null&&$0(t,i,u,o))}switch(r){case"input":wc(t),X1(t,n,!1);break;case"textarea":wc(t),Q1(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cs(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?oa(t,!!n.multiple,i,!1):n.defaultValue!=null&&oa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(t&&e.stateNode!=null)KE(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(te(166));if(r=Ws(ru.current),Ws(Xn.current),Rc(e)){if(n=e.stateNode,r=e.memoizedProps,n[$n]=e,(i=n.nodeValue!==r)&&(t=Pr,t!==null))switch(t.tag){case 3:Ic(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ic(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[$n]=e,e.stateNode=n}return Jt(e),null;case 13:if(Ye(it),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&Cr!==null&&e.mode&1&&!(e.flags&128))fE(),Ea(),e.flags|=98560,i=!1;else if(i=Rc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[$n]=e}else Ea(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jt(e),i=!1}else hn!==null&&(Dg(hn),hn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?At===0&&(At=3):bv())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return ba(),bg(t,e),t===null&&ql(e.stateNode.containerInfo),Jt(e),null;case 10:return lv(e.type._context),Jt(e),null;case 17:return yr(e.type)&&Xh(),Jt(e),null;case 19:if(Ye(it),i=e.memoizedState,i===null)return Jt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)ul(i,!1);else{if(At!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ed(t),o!==null){for(e.flags|=128,ul(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return je(it,it.current&1|2),e.child}t=t.sibling}i.tail!==null&&vt()>Ca&&(e.flags|=128,n=!0,ul(i,!1),e.lanes=4194304)}else{if(!n)if(t=ed(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ul(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!et)return Jt(e),null}else 2*vt()-i.renderingStartTime>Ca&&r!==1073741824&&(e.flags|=128,n=!0,ul(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=vt(),e.sibling=null,r=it.current,je(it,n?r&1|2:r&1),e):(Jt(e),null);case 22:case 23:return Tv(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ar&1073741824&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function KI(t,e){switch(iv(e),e.tag){case 1:return yr(e.type)&&Xh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ba(),Ye(vr),Ye(tr),fv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dv(e),null;case 13:if(Ye(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Ea()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ye(it),null;case 4:return ba(),null;case 10:return lv(e.type._context),null;case 22:case 23:return Tv(),null;case 24:return null;default:return null}}var Dc=!1,er=!1,ZI=typeof WeakSet=="function"?WeakSet:Set,he=null;function ea(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ht(t,e,n)}else r.current=null}function Ag(t,e,r){try{r()}catch(n){ht(t,e,n)}}var Lx=!1;function qI(t,e){if(ug=$h,t=eE(),rv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,u=-1,h=0,f=0,m=t,p=null;t:for(;;){for(var d;m!==r||s!==0&&m.nodeType!==3||(a=o+s),m!==i||n!==0&&m.nodeType!==3||(u=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(d=m.firstChild)!==null;)p=m,m=d;for(;;){if(m===t)break t;if(p===r&&++h===s&&(a=o),p===i&&++f===n&&(u=o),(d=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=d}r=a===-1||u===-1?null:{start:a,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(cg={focusedElem:t,selectionRange:r},$h=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,_=g.memoizedState,w=e.stateNode,T=w.getSnapshotBeforeUpdate(e.elementType===e.type?y:un(e.type,y),_);w.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(A){ht(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return g=Lx,Lx=!1,g}function Bl(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ag(e,r,i)}s=s.next}while(s!==n)}}function Ud(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Cg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ZE(t){var e=t.alternate;e!==null&&(t.alternate=null,ZE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$n],delete e[eu],delete e[fg],delete e[FI],delete e[NI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qE(t){return t.tag===5||t.tag===3||t.tag===4}function Ux(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pg(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Wh));else if(n!==4&&(t=t.child,t!==null))for(Pg(t,e,r),t=t.sibling;t!==null;)Pg(t,e,r),t=t.sibling}function Ig(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ig(t,e,r),t=t.sibling;t!==null;)Ig(t,e,r),t=t.sibling}var Ht=null,cn=!1;function Ui(t,e,r){for(r=r.child;r!==null;)JE(t,e,r),r=r.sibling}function JE(t,e,r){if(Wn&&typeof Wn.onCommitFiberUnmount=="function")try{Wn.onCommitFiberUnmount(Md,r)}catch{}switch(r.tag){case 5:er||ea(r,e);case 6:var n=Ht,s=cn;Ht=null,Ui(t,e,r),Ht=n,cn=s,Ht!==null&&(cn?(t=Ht,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ht.removeChild(r.stateNode));break;case 18:Ht!==null&&(cn?(t=Ht,r=r.stateNode,t.nodeType===8?Gp(t.parentNode,r):t.nodeType===1&&Gp(t,r),Ql(t)):Gp(Ht,r.stateNode));break;case 4:n=Ht,s=cn,Ht=r.stateNode.containerInfo,cn=!0,Ui(t,e,r),Ht=n,cn=s;break;case 0:case 11:case 14:case 15:if(!er&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ag(r,e,o),s=s.next}while(s!==n)}Ui(t,e,r);break;case 1:if(!er&&(ea(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ht(r,e,a)}Ui(t,e,r);break;case 21:Ui(t,e,r);break;case 22:r.mode&1?(er=(n=er)||r.memoizedState!==null,Ui(t,e,r),er=n):Ui(t,e,r);break;default:Ui(t,e,r)}}function Gx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new ZI),e.forEach(function(n){var s=a2.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function nn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,cn=!1;break e;case 3:Ht=a.stateNode.containerInfo,cn=!0;break e;case 4:Ht=a.stateNode.containerInfo,cn=!0;break e}a=a.return}if(Ht===null)throw Error(te(160));JE(i,o,s),Ht=null,cn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){ht(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)eT(e,t),e=e.sibling}function eT(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),kn(t),n&4){try{Bl(3,t,t.return),Ud(3,t)}catch(y){ht(t,t.return,y)}try{Bl(5,t,t.return)}catch(y){ht(t,t.return,y)}}break;case 1:nn(e,t),kn(t),n&512&&r!==null&&ea(r,r.return);break;case 5:if(nn(e,t),kn(t),n&512&&r!==null&&ea(r,r.return),t.flags&32){var s=t.stateNode;try{jl(s,"")}catch(y){ht(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&wS(s,i),Jm(a,o);var h=Jm(a,i);for(o=0;o<u.length;o+=2){var f=u[o],m=u[o+1];f==="style"?AS(s,m):f==="dangerouslySetInnerHTML"?TS(s,m):f==="children"?jl(s,m):$0(s,f,m,h)}switch(a){case"input":Ym(s,i);break;case"textarea":SS(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var d=i.value;d!=null?oa(s,!!i.multiple,d,!1):p!==!!i.multiple&&(i.defaultValue!=null?oa(s,!!i.multiple,i.defaultValue,!0):oa(s,!!i.multiple,i.multiple?[]:"",!1))}s[eu]=i}catch(y){ht(t,t.return,y)}}break;case 6:if(nn(e,t),kn(t),n&4){if(t.stateNode===null)throw Error(te(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){ht(t,t.return,y)}}break;case 3:if(nn(e,t),kn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ql(e.containerInfo)}catch(y){ht(t,t.return,y)}break;case 4:nn(e,t),kn(t);break;case 13:nn(e,t),kn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Sv=vt())),n&4&&Gx(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(er=(h=er)||f,nn(e,t),er=h):nn(e,t),kn(t),n&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(he=t,f=t.child;f!==null;){for(m=he=f;he!==null;){switch(p=he,d=p.child,p.tag){case 0:case 11:case 14:case 15:Bl(4,p,p.return);break;case 1:ea(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){n=p,r=p.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){ht(n,r,y)}}break;case 5:ea(p,p.return);break;case 22:if(p.memoizedState!==null){Hx(m);continue}}d!==null?(d.return=p,he=d):Hx(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=bS("display",o))}catch(y){ht(t,t.return,y)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(y){ht(t,t.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:nn(e,t),kn(t),n&4&&Gx(t);break;case 21:break;default:nn(e,t),kn(t)}}function kn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(qE(r)){var n=r;break e}r=r.return}throw Error(te(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(jl(s,""),n.flags&=-33);var i=Ux(t);Ig(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Ux(t);Pg(t,a,o);break;default:throw Error(te(161))}}catch(u){ht(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JI(t,e,r){he=t,tT(t)}function tT(t,e,r){for(var n=(t.mode&1)!==0;he!==null;){var s=he,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Dc;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||er;a=Dc;var h=er;if(Dc=o,(er=u)&&!h)for(he=s;he!==null;)o=he,u=o.child,o.tag===22&&o.memoizedState!==null?$x(s):u!==null?(u.return=o,he=u):$x(s);for(;i!==null;)he=i,tT(i),i=i.sibling;he=s,Dc=a,er=h}zx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,he=i):zx(t)}}function zx(t){for(;he!==null;){var e=he;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:er||Ud(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!er)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:un(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Tx(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Tx(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ql(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}er||e.flags&512&&Cg(e)}catch(p){ht(e,e.return,p)}}if(e===t){he=null;break}if(r=e.sibling,r!==null){r.return=e.return,he=r;break}he=e.return}}function Hx(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var r=e.sibling;if(r!==null){r.return=e.return,he=r;break}he=e.return}}function $x(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ud(4,e)}catch(u){ht(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){ht(e,s,u)}}var i=e.return;try{Cg(e)}catch(u){ht(e,i,u)}break;case 5:var o=e.return;try{Cg(e)}catch(u){ht(e,o,u)}}}catch(u){ht(e,e.return,u)}if(e===t){he=null;break}var a=e.sibling;if(a!==null){a.return=e.return,he=a;break}he=e.return}}var e2=Math.ceil,nd=Ai.ReactCurrentDispatcher,_v=Ai.ReactCurrentOwner,Qr=Ai.ReactCurrentBatchConfig,Ne=0,Bt=null,_t=null,jt=0,Ar=0,ta=ms(0),At=0,ou=null,no=0,Gd=0,wv=0,Ol=null,pr=null,Sv=0,Ca=1/0,ui=null,id=!1,Rg=null,os=null,Fc=!1,Zi=null,sd=0,Ll=0,Mg=null,Th=-1,bh=0;function or(){return Ne&6?vt():Th!==-1?Th:Th=vt()}function as(t){return t.mode&1?Ne&2&&jt!==0?jt&-jt:OI.transition!==null?(bh===0&&(bh=LS()),bh):(t=ze,t!==0||(t=window.event,t=t===void 0?16:jS(t.type)),t):1}function gn(t,e,r,n){if(50<Ll)throw Ll=0,Mg=null,Error(te(185));vu(t,r,n),(!(Ne&2)||t!==Bt)&&(t===Bt&&(!(Ne&2)&&(Gd|=r),At===4&&Yi(t,jt)),xr(t,n),r===1&&Ne===0&&!(e.mode&1)&&(Ca=vt()+500,Bd&&gs()))}function xr(t,e){var r=t.callbackNode;OP(t,e);var n=Hh(t,t===Bt?jt:0);if(n===0)r!==null&&q1(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&q1(r),e===1)t.tag===0?BI(Vx.bind(null,t)):cE(Vx.bind(null,t)),kI(function(){!(Ne&6)&&gs()}),r=null;else{switch(US(n)){case 1:r=Y0;break;case 4:r=BS;break;case 16:r=zh;break;case 536870912:r=OS;break;default:r=zh}r=uT(r,rT.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function rT(t,e){if(Th=-1,bh=0,Ne&6)throw Error(te(327));var r=t.callbackNode;if(ha()&&t.callbackNode!==r)return null;var n=Hh(t,t===Bt?jt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=od(t,n);else{e=n;var s=Ne;Ne|=2;var i=iT();(Bt!==t||jt!==e)&&(ui=null,Ca=vt()+500,Ys(t,e));do try{n2();break}catch(a){nT(t,a)}while(!0);av(),nd.current=i,Ne=s,_t!==null?e=0:(Bt=null,jt=0,e=At)}if(e!==0){if(e===2&&(s=ig(t),s!==0&&(n=s,e=kg(t,s))),e===1)throw r=ou,Ys(t,0),Yi(t,n),xr(t,vt()),r;if(e===6)Yi(t,n);else{if(s=t.current.alternate,!(n&30)&&!t2(s)&&(e=od(t,n),e===2&&(i=ig(t),i!==0&&(n=i,e=kg(t,i))),e===1))throw r=ou,Ys(t,0),Yi(t,n),xr(t,vt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(te(345));case 2:Ns(t,pr,ui);break;case 3:if(Yi(t,n),(n&130023424)===n&&(e=Sv+500-vt(),10<e)){if(Hh(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){or(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dg(Ns.bind(null,t,pr,ui),e);break}Ns(t,pr,ui);break;case 4:if(Yi(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-mn(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=vt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*e2(n/1960))-n,10<n){t.timeoutHandle=dg(Ns.bind(null,t,pr,ui),n);break}Ns(t,pr,ui);break;case 5:Ns(t,pr,ui);break;default:throw Error(te(329))}}}return xr(t,vt()),t.callbackNode===r?rT.bind(null,t):null}function kg(t,e){var r=Ol;return t.current.memoizedState.isDehydrated&&(Ys(t,e).flags|=256),t=od(t,e),t!==2&&(e=pr,pr=r,e!==null&&Dg(e)),t}function Dg(t){pr===null?pr=t:pr.push.apply(pr,t)}function t2(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!xn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yi(t,e){for(e&=~wv,e&=~Gd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-mn(e),n=1<<r;t[r]=-1,e&=~n}}function Vx(t){if(Ne&6)throw Error(te(327));ha();var e=Hh(t,0);if(!(e&1))return xr(t,vt()),null;var r=od(t,e);if(t.tag!==0&&r===2){var n=ig(t);n!==0&&(e=n,r=kg(t,n))}if(r===1)throw r=ou,Ys(t,0),Yi(t,e),xr(t,vt()),r;if(r===6)throw Error(te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ns(t,pr,ui),xr(t,vt()),null}function Ev(t,e){var r=Ne;Ne|=1;try{return t(e)}finally{Ne=r,Ne===0&&(Ca=vt()+500,Bd&&gs())}}function io(t){Zi!==null&&Zi.tag===0&&!(Ne&6)&&ha();var e=Ne;Ne|=1;var r=Qr.transition,n=ze;try{if(Qr.transition=null,ze=1,t)return t()}finally{ze=n,Qr.transition=r,Ne=e,!(Ne&6)&&gs()}}function Tv(){Ar=ta.current,Ye(ta)}function Ys(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,MI(r)),_t!==null)for(r=_t.return;r!==null;){var n=r;switch(iv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xh();break;case 3:ba(),Ye(vr),Ye(tr),fv();break;case 5:dv(n);break;case 4:ba();break;case 13:Ye(it);break;case 19:Ye(it);break;case 10:lv(n.type._context);break;case 22:case 23:Tv()}r=r.return}if(Bt=t,_t=t=ls(t.current,null),jt=Ar=e,At=0,ou=null,wv=Gd=no=0,pr=Ol=null,js!==null){for(e=0;e<js.length;e++)if(r=js[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}js=null}return t}function nT(t,e){do{var r=_t;try{if(av(),wh.current=rd,td){for(var n=at.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}td=!1}if(ro=0,kt=bt=at=null,Nl=!1,nu=0,_v.current=null,r===null||r.return===null){At=1,ou=e,_t=null;break}e:{var i=t,o=r.return,a=r,u=e;if(e=jt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,f=a,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var d=Mx(o);if(d!==null){d.flags&=-257,kx(d,o,a,i,e),d.mode&1&&Rx(i,h,e),e=d,u=h;var g=e.updateQueue;if(g===null){var y=new Set;y.add(u),e.updateQueue=y}else g.add(u);break e}else{if(!(e&1)){Rx(i,h,e),bv();break e}u=Error(te(426))}}else if(et&&a.mode&1){var _=Mx(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),kx(_,o,a,i,e),sv(Aa(u,a));break e}}i=u=Aa(u,a),At!==4&&(At=2),Ol===null?Ol=[i]:Ol.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=GE(i,u,e);Ex(i,w);break e;case 1:a=u;var T=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(os===null||!os.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=zE(i,a,e);Ex(i,A);break e}}i=i.return}while(i!==null)}oT(r)}catch(b){e=b,_t===r&&r!==null&&(_t=r=r.return);continue}break}while(!0)}function iT(){var t=nd.current;return nd.current=rd,t===null?rd:t}function bv(){(At===0||At===3||At===2)&&(At=4),Bt===null||!(no&268435455)&&!(Gd&268435455)||Yi(Bt,jt)}function od(t,e){var r=Ne;Ne|=2;var n=iT();(Bt!==t||jt!==e)&&(ui=null,Ys(t,e));do try{r2();break}catch(s){nT(t,s)}while(!0);if(av(),Ne=r,nd.current=n,_t!==null)throw Error(te(261));return Bt=null,jt=0,At}function r2(){for(;_t!==null;)sT(_t)}function n2(){for(;_t!==null&&!PP();)sT(_t)}function sT(t){var e=lT(t.alternate,t,Ar);t.memoizedProps=t.pendingProps,e===null?oT(t):_t=e,_v.current=null}function oT(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=KI(r,e),r!==null){r.flags&=32767,_t=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,_t=null;return}}else if(r=QI(r,e,Ar),r!==null){_t=r;return}if(e=e.sibling,e!==null){_t=e;return}_t=e=t}while(e!==null);At===0&&(At=5)}function Ns(t,e,r){var n=ze,s=Qr.transition;try{Qr.transition=null,ze=1,i2(t,e,r,n)}finally{Qr.transition=s,ze=n}return null}function i2(t,e,r,n){do ha();while(Zi!==null);if(Ne&6)throw Error(te(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(te(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(LP(t,i),t===Bt&&(_t=Bt=null,jt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fc||(Fc=!0,uT(zh,function(){return ha(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Qr.transition,Qr.transition=null;var o=ze;ze=1;var a=Ne;Ne|=4,_v.current=null,qI(t,r),eT(r,t),TI(cg),$h=!!ug,cg=ug=null,t.current=r,JI(r),IP(),Ne=a,ze=o,Qr.transition=i}else t.current=r;if(Fc&&(Fc=!1,Zi=t,sd=s),i=t.pendingLanes,i===0&&(os=null),kP(r.stateNode),xr(t,vt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(id)throw id=!1,t=Rg,Rg=null,t;return sd&1&&t.tag!==0&&ha(),i=t.pendingLanes,i&1?t===Mg?Ll++:(Ll=0,Mg=t):Ll=0,gs(),null}function ha(){if(Zi!==null){var t=US(sd),e=Qr.transition,r=ze;try{if(Qr.transition=null,ze=16>t?16:t,Zi===null)var n=!1;else{if(t=Zi,Zi=null,sd=0,Ne&6)throw Error(te(331));var s=Ne;for(Ne|=4,he=t.current;he!==null;){var i=he,o=i.child;if(he.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(he=h;he!==null;){var f=he;switch(f.tag){case 0:case 11:case 15:Bl(8,f,i)}var m=f.child;if(m!==null)m.return=f,he=m;else for(;he!==null;){f=he;var p=f.sibling,d=f.return;if(ZE(f),f===h){he=null;break}if(p!==null){p.return=d,he=p;break}he=d}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}he=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,he=o;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bl(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,he=w;break e}he=i.return}}var T=t.current;for(he=T;he!==null;){o=he;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,he=E;else e:for(o=T;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ud(9,a)}}catch(b){ht(a,a.return,b)}if(a===o){he=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,he=A;break e}he=a.return}}if(Ne=s,gs(),Wn&&typeof Wn.onPostCommitFiberRoot=="function")try{Wn.onPostCommitFiberRoot(Md,t)}catch{}n=!0}return n}finally{ze=r,Qr.transition=e}}return!1}function jx(t,e,r){e=Aa(r,e),e=GE(t,e,1),t=ss(t,e,1),e=or(),t!==null&&(vu(t,1,e),xr(t,e))}function ht(t,e,r){if(t.tag===3)jx(t,t,r);else for(;e!==null;){if(e.tag===3){jx(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(os===null||!os.has(n))){t=Aa(r,t),t=zE(e,t,1),e=ss(e,t,1),t=or(),e!==null&&(vu(e,1,t),xr(e,t));break}}e=e.return}}function s2(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=or(),t.pingedLanes|=t.suspendedLanes&r,Bt===t&&(jt&r)===r&&(At===4||At===3&&(jt&130023424)===jt&&500>vt()-Sv?Ys(t,0):wv|=r),xr(t,e)}function aT(t,e){e===0&&(t.mode&1?(e=Tc,Tc<<=1,!(Tc&130023424)&&(Tc=4194304)):e=1);var r=or();t=wi(t,e),t!==null&&(vu(t,e,r),xr(t,r))}function o2(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),aT(t,r)}function a2(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(te(314))}n!==null&&n.delete(e),aT(t,r)}var lT;lT=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||vr.current)mr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return mr=!1,YI(t,e,r);mr=!!(t.flags&131072)}else mr=!1,et&&e.flags&1048576&&hE(e,Kh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Eh(t,e),t=e.pendingProps;var s=Sa(e,tr.current);ca(e,r),s=mv(null,e,n,t,s,r);var i=gv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yr(n)?(i=!0,Yh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,cv(e),s.updater=Od,e.stateNode=s,s._reactInternals=e,xg(e,n,t,r),e=Sg(null,e,n,!0,i,r)):(e.tag=0,et&&i&&nv(e),sr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Eh(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=u2(n),t=un(n,t),s){case 0:e=wg(null,e,n,t,r);break e;case 1:e=Nx(null,e,n,t,r);break e;case 11:e=Dx(null,e,n,t,r);break e;case 14:e=Fx(null,e,n,un(n.type,t),r);break e}throw Error(te(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:un(n,s),wg(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:un(n,s),Nx(t,e,n,s,r);case 3:e:{if(jE(e),t===null)throw Error(te(387));n=e.pendingProps,i=e.memoizedState,s=i.element,mE(t,e),Jh(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Aa(Error(te(423)),e),e=Bx(t,e,n,r,s);break e}else if(n!==s){s=Aa(Error(te(424)),e),e=Bx(t,e,n,r,s);break e}else for(Cr=is(e.stateNode.containerInfo.firstChild),Pr=e,et=!0,hn=null,r=xE(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ea(),n===s){e=Si(t,e,r);break e}sr(t,e,n,r)}e=e.child}return e;case 5:return _E(e),t===null&&gg(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,hg(n,s)?o=null:i!==null&&hg(n,i)&&(e.flags|=32),VE(t,e),sr(t,e,o,r),e.child;case 6:return t===null&&gg(e),null;case 13:return WE(t,e,r);case 4:return hv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ta(e,null,n,r):sr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:un(n,s),Dx(t,e,n,s,r);case 7:return sr(t,e,e.pendingProps,r),e.child;case 8:return sr(t,e,e.pendingProps.children,r),e.child;case 12:return sr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,je(Zh,n._currentValue),n._currentValue=o,i!==null)if(xn(i.value,o)){if(i.children===s.children&&!vr.current){e=Si(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=gi(-1,r&-r),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?u.next=u:(u.next=f.next,f.next=u),h.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),vg(i.return,r,e),a.lanes|=r;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(te(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),vg(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}sr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,ca(e,r),s=Kr(s),n=n(s),e.flags|=1,sr(t,e,n,r),e.child;case 14:return n=e.type,s=un(n,e.pendingProps),s=un(n.type,s),Fx(t,e,n,s,r);case 15:return HE(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:un(n,s),Eh(t,e),e.tag=1,yr(n)?(t=!0,Yh(e)):t=!1,ca(e,r),vE(e,n,s),xg(e,n,s,r),Sg(null,e,n,!0,t,r);case 19:return XE(t,e,r);case 22:return $E(t,e,r)}throw Error(te(156,e.tag))};function uT(t,e){return NS(t,e)}function l2(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(t,e,r,n){return new l2(t,e,r,n)}function Av(t){return t=t.prototype,!(!t||!t.isReactComponent)}function u2(t){if(typeof t=="function")return Av(t)?1:0;if(t!=null){if(t=t.$$typeof,t===j0)return 11;if(t===W0)return 14}return 2}function ls(t,e){var r=t.alternate;return r===null?(r=Wr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ah(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")Av(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jo:return Qs(r.children,s,i,e);case V0:o=8,s|=8;break;case $m:return t=Wr(12,r,e,s|2),t.elementType=$m,t.lanes=i,t;case Vm:return t=Wr(13,r,e,s),t.elementType=Vm,t.lanes=i,t;case jm:return t=Wr(19,r,e,s),t.elementType=jm,t.lanes=i,t;case yS:return zd(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gS:o=10;break e;case vS:o=9;break e;case j0:o=11;break e;case W0:o=14;break e;case $i:o=16,n=null;break e}throw Error(te(130,t==null?t:typeof t,""))}return e=Wr(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Qs(t,e,r,n){return t=Wr(7,t,n,e),t.lanes=r,t}function zd(t,e,r,n){return t=Wr(22,t,n,e),t.elementType=yS,t.lanes=r,t.stateNode={isHidden:!1},t}function Yp(t,e,r){return t=Wr(6,t,null,e),t.lanes=r,t}function Qp(t,e,r){return e=Wr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function c2(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ip(0),this.expirationTimes=Ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ip(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cv(t,e,r,n,s,i,o,a,u){return t=new c2(t,e,r,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cv(i),t}function h2(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function cT(t){if(!t)return hs;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(t.tag===1){var r=t.type;if(yr(r))return uE(t,r,e)}return e}function hT(t,e,r,n,s,i,o,a,u){return t=Cv(r,n,!0,t,s,i,o,a,u),t.context=cT(null),r=t.current,n=or(),s=as(r),i=gi(n,s),i.callback=e??null,ss(r,i,s),t.current.lanes=s,vu(t,s,n),xr(t,n),t}function Hd(t,e,r,n){var s=e.current,i=or(),o=as(s);return r=cT(r),e.context===null?e.context=r:e.pendingContext=r,e=gi(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ss(s,e,o),t!==null&&(gn(t,s,o,i),_h(t,s,o)),o}function ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Pv(t,e){Wx(t,e),(t=t.alternate)&&Wx(t,e)}function d2(){return null}var dT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Iv(t){this._internalRoot=t}$d.prototype.render=Iv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(te(409));Hd(t,e,null,null)};$d.prototype.unmount=Iv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){Hd(null,t,null,null)}),e[_i]=null}};function $d(t){this._internalRoot=t}$d.prototype.unstable_scheduleHydration=function(t){if(t){var e=HS();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Xi.length&&e!==0&&e<Xi[r].priority;r++);Xi.splice(r,0,t),r===0&&VS(t)}};function Rv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xx(){}function f2(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var h=ad(o);i.call(h)}}var o=hT(e,n,t,0,null,!1,!1,"",Xx);return t._reactRootContainer=o,t[_i]=o.current,ql(t.nodeType===8?t.parentNode:t),io(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var h=ad(u);a.call(h)}}var u=Cv(t,0,!1,null,null,!1,!1,"",Xx);return t._reactRootContainer=u,t[_i]=u.current,ql(t.nodeType===8?t.parentNode:t),io(function(){Hd(e,u,r,n)}),u}function jd(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=ad(o);a.call(u)}}Hd(e,o,t,s)}else o=f2(r,e,t,s,n);return ad(o)}GS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=xl(e.pendingLanes);r!==0&&(Q0(e,r|1),xr(e,vt()),!(Ne&6)&&(Ca=vt()+500,gs()))}break;case 13:io(function(){var n=wi(t,1);if(n!==null){var s=or();gn(n,t,1,s)}}),Pv(t,1)}};K0=function(t){if(t.tag===13){var e=wi(t,134217728);if(e!==null){var r=or();gn(e,t,134217728,r)}Pv(t,134217728)}};zS=function(t){if(t.tag===13){var e=as(t),r=wi(t,e);if(r!==null){var n=or();gn(r,t,e,n)}Pv(t,e)}};HS=function(){return ze};$S=function(t,e){var r=ze;try{return ze=t,e()}finally{ze=r}};tg=function(t,e,r){switch(e){case"input":if(Ym(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Nd(n);if(!s)throw Error(te(90));_S(n),Ym(n,s)}}}break;case"textarea":SS(t,r);break;case"select":e=r.value,e!=null&&oa(t,!!r.multiple,e,!1)}};IS=Ev;RS=io;var p2={usingClientEntryPoint:!1,Events:[xu,Qo,Nd,CS,PS,Ev]},cl={findFiberByHostInstance:Vs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},m2={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ai.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DS(t),t===null?null:t.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||d2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{Md=Nc.inject(m2),Wn=Nc}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p2;kr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rv(e))throw Error(te(200));return h2(t,e,null,r)};kr.createRoot=function(t,e){if(!Rv(t))throw Error(te(299));var r=!1,n="",s=dT;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cv(t,1,!1,null,null,r,!1,n,s),t[_i]=e.current,ql(t.nodeType===8?t.parentNode:t),new Iv(e)};kr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(te(188)):(t=Object.keys(t).join(","),Error(te(268,t)));return t=DS(e),t=t===null?null:t.stateNode,t};kr.flushSync=function(t){return io(t)};kr.hydrate=function(t,e,r){if(!Vd(e))throw Error(te(200));return jd(null,t,e,!0,r)};kr.hydrateRoot=function(t,e,r){if(!Rv(t))throw Error(te(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=dT;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=hT(e,null,t,1,r??null,s,!1,i,o),t[_i]=e.current,ql(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new $d(e)};kr.render=function(t,e,r){if(!Vd(e))throw Error(te(200));return jd(null,t,e,!1,r)};kr.unmountComponentAtNode=function(t){if(!Vd(t))throw Error(te(40));return t._reactRootContainer?(io(function(){jd(null,null,t,!1,function(){t._reactRootContainer=null,t[_i]=null})}),!0):!1};kr.unstable_batchedUpdates=Ev;kr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Vd(r))throw Error(te(200));if(t==null||t._reactInternals===void 0)throw Error(te(38));return jd(t,e,r,!1,n)};kr.version="18.2.0-next-9e3b772b8-20220608";function fT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fT)}catch(t){console.error(t)}}fT(),hS.exports=kr;var g2=hS.exports,Yx=g2;zm.createRoot=Yx.createRoot,zm.hydrateRoot=Yx.hydrateRoot;var Wd={exports:{}},uo=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(uo||{}),pT=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(pT||{}),Fg=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Fg||{}),we=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(we||{}),fn=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(fn||{}),ne=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(ne||{}),da=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(da||{}),ye=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(ye||{}),ae=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(ae||{}),fi=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(fi||{}),vi=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(vi||{}),Kn=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Kn||{}),gr=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(gr||{}),zn=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(zn||{}),Mv=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Mv||{}),Xr=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Xr||{}),Tt=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Tt||{}),xt=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(xt||{}),Yn=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Yn||{});const v2={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},le={ADAPTER:v2,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Kp=/iPhone/i,Qx=/iPod/i,Kx=/iPad/i,Zx=/\biOS-universal(?:.+)Mac\b/i,Zp=/\bAndroid(?:.+)Mobile\b/i,qx=/Android/i,Mo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Bc=/Silk/i,oi=/Windows Phone/i,Jx=/\bWindows(?:.+)ARM\b/i,e_=/BlackBerry/i,t_=/BB10/i,r_=/Opera Mini/i,n_=/\b(CriOS|Chrome)(?:.+)Mobile/i,i_=/Mobile(?:.+)Firefox\b/i,s_=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function y2(t){return function(e){return e.test(t)}}function o_(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var s=y2(r),i={apple:{phone:s(Kp)&&!s(oi),ipod:s(Qx),tablet:!s(Kp)&&(s(Kx)||s_(e))&&!s(oi),universal:s(Zx),device:(s(Kp)||s(Qx)||s(Kx)||s(Zx)||s_(e))&&!s(oi)},amazon:{phone:s(Mo),tablet:!s(Mo)&&s(Bc),device:s(Mo)||s(Bc)},android:{phone:!s(oi)&&s(Mo)||!s(oi)&&s(Zp),tablet:!s(oi)&&!s(Mo)&&!s(Zp)&&(s(Bc)||s(qx)),device:!s(oi)&&(s(Mo)||s(Bc)||s(Zp)||s(qx))||s(/\bokhttp\b/i)},windows:{phone:s(oi),tablet:s(Jx),device:s(oi)||s(Jx)},other:{blackberry:s(e_),blackberry10:s(t_),opera:s(r_),firefox:s(i_),chrome:s(n_),device:s(e_)||s(t_)||s(r_)||s(i_)||s(n_)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}const x2=o_.default??o_,pi=x2(globalThis.navigator);le.RETINA_PREFIX=/@([0-9\.]+)x/;le.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var mT={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(u,h,f){this.fn=u,this.context=h,this.once=f||!1}function i(u,h,f,m,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var d=new s(f,m||u,p),g=r?r+h:h;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],d]:u._events[g].push(d):(u._events[g]=d,u._eventsCount++),u}function o(u,h){--u._eventsCount===0?u._events=new n:delete u._events[h]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],f,m;if(this._eventsCount===0)return h;for(m in f=this._events)e.call(f,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},a.prototype.listeners=function(h){var f=r?r+h:h,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,d=m.length,g=new Array(d);p<d;p++)g[p]=m[p].fn;return g},a.prototype.listenerCount=function(h){var f=r?r+h:h,m=this._events[f];return m?m.fn?1:m.length:0},a.prototype.emit=function(h,f,m,p,d,g){var y=r?r+h:h;if(!this._events[y])return!1;var _=this._events[y],w=arguments.length,T,E;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),w){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,m),!0;case 4:return _.fn.call(_.context,f,m,p),!0;case 5:return _.fn.call(_.context,f,m,p,d),!0;case 6:return _.fn.call(_.context,f,m,p,d,g),!0}for(E=1,T=new Array(w-1);E<w;E++)T[E-1]=arguments[E];_.fn.apply(_.context,T)}else{var A=_.length,b;for(E=0;E<A;E++)switch(_[E].once&&this.removeListener(h,_[E].fn,void 0,!0),w){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,m);break;case 4:_[E].fn.call(_[E].context,f,m,p);break;default:if(!T)for(b=1,T=new Array(w-1);b<w;b++)T[b-1]=arguments[b];_[E].fn.apply(_[E].context,T)}}return!0},a.prototype.on=function(h,f,m){return i(this,h,f,m,!1)},a.prototype.once=function(h,f,m){return i(this,h,f,m,!0)},a.prototype.removeListener=function(h,f,m,p){var d=r?r+h:h;if(!this._events[d])return this;if(!f)return o(this,d),this;var g=this._events[d];if(g.fn)g.fn===f&&(!p||g.once)&&(!m||g.context===m)&&o(this,d);else{for(var y=0,_=[],w=g.length;y<w;y++)(g[y].fn!==f||p&&!g[y].once||m&&g[y].context!==m)&&_.push(g[y]);_.length?this._events[d]=_.length===1?_[0]:_:o(this,d)}return this},a.prototype.removeAllListeners=function(h){var f;return h?(f=r?r+h:h,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(mT);var _2=mT.exports;const wu=mu(_2);var kv={exports:{}};kv.exports=Xd;kv.exports.default=Xd;function Xd(t,e,r){r=r||2;var n=e&&e.length,s=n?e[0]*r:t.length,i=gT(t,0,s,r,!0),o=[];if(!i||i.next===i.prev)return o;var a,u,h,f,m,p,d;if(n&&(i=b2(t,e,i,r)),t.length>80*r){a=h=t[0],u=f=t[1];for(var g=r;g<s;g+=r)m=t[g],p=t[g+1],m<a&&(a=m),p<u&&(u=p),m>h&&(h=m),p>f&&(f=p);d=Math.max(h-a,f-u),d=d!==0?32767/d:0}return au(i,o,r,a,u,d,0),o}function gT(t,e,r,n,s){var i,o;if(s===Og(t,e,r,n)>0)for(i=e;i<r;i+=n)o=a_(i,t[i],t[i+1],o);else for(i=r-n;i>=e;i-=n)o=a_(i,t[i],t[i+1],o);return o&&Yd(o,o.next)&&(uu(o),o=o.next),o}function so(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(Yd(r,r.next)||st(r.prev,r,r.next)===0)){if(uu(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function au(t,e,r,n,s,i,o){if(t){!o&&i&&R2(t,n,s,i);for(var a=t,u,h;t.prev!==t.next;){if(u=t.prev,h=t.next,i?S2(t,n,s,i):w2(t)){e.push(u.i/r|0),e.push(t.i/r|0),e.push(h.i/r|0),uu(t),t=h.next,a=h.next;continue}if(t=h,t===a){o?o===1?(t=E2(so(t),e,r),au(t,e,r,n,s,i,2)):o===2&&T2(t,e,r,n,s,i):au(so(t),e,r,n,s,i,1);break}}}}function w2(t){var e=t.prev,r=t,n=t.next;if(st(e,r,n)>=0)return!1;for(var s=e.x,i=r.x,o=n.x,a=e.y,u=r.y,h=n.y,f=s<i?s<o?s:o:i<o?i:o,m=a<u?a<h?a:h:u<h?u:h,p=s>i?s>o?s:o:i>o?i:o,d=a>u?a>h?a:h:u>h?u:h,g=n.next;g!==e;){if(g.x>=f&&g.x<=p&&g.y>=m&&g.y<=d&&ra(s,a,i,u,o,h,g.x,g.y)&&st(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function S2(t,e,r,n){var s=t.prev,i=t,o=t.next;if(st(s,i,o)>=0)return!1;for(var a=s.x,u=i.x,h=o.x,f=s.y,m=i.y,p=o.y,d=a<u?a<h?a:h:u<h?u:h,g=f<m?f<p?f:p:m<p?m:p,y=a>u?a>h?a:h:u>h?u:h,_=f>m?f>p?f:p:m>p?m:p,w=Ng(d,g,e,r,n),T=Ng(y,_,e,r,n),E=t.prevZ,A=t.nextZ;E&&E.z>=w&&A&&A.z<=T;){if(E.x>=d&&E.x<=y&&E.y>=g&&E.y<=_&&E!==s&&E!==o&&ra(a,f,u,m,h,p,E.x,E.y)&&st(E.prev,E,E.next)>=0||(E=E.prevZ,A.x>=d&&A.x<=y&&A.y>=g&&A.y<=_&&A!==s&&A!==o&&ra(a,f,u,m,h,p,A.x,A.y)&&st(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;E&&E.z>=w;){if(E.x>=d&&E.x<=y&&E.y>=g&&E.y<=_&&E!==s&&E!==o&&ra(a,f,u,m,h,p,E.x,E.y)&&st(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;A&&A.z<=T;){if(A.x>=d&&A.x<=y&&A.y>=g&&A.y<=_&&A!==s&&A!==o&&ra(a,f,u,m,h,p,A.x,A.y)&&st(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function E2(t,e,r){var n=t;do{var s=n.prev,i=n.next.next;!Yd(s,i)&&vT(s,n,n.next,i)&&lu(s,i)&&lu(i,s)&&(e.push(s.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),uu(n),uu(n.next),n=t=i),n=n.next}while(n!==t);return so(n)}function T2(t,e,r,n,s,i){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&D2(o,a)){var u=yT(o,a);o=so(o,o.next),u=so(u,u.next),au(o,e,r,n,s,i,0),au(u,e,r,n,s,i,0);return}a=a.next}o=o.next}while(o!==t)}function b2(t,e,r,n){var s=[],i,o,a,u,h;for(i=0,o=e.length;i<o;i++)a=e[i]*n,u=i<o-1?e[i+1]*n:t.length,h=gT(t,a,u,n,!1),h===h.next&&(h.steiner=!0),s.push(k2(h));for(s.sort(A2),i=0;i<s.length;i++)r=C2(s[i],r);return r}function A2(t,e){return t.x-e.x}function C2(t,e){var r=P2(t,e);if(!r)return e;var n=yT(r,t);return so(n,n.next),so(r,r.next)}function P2(t,e){var r=e,n=t.x,s=t.y,i=-1/0,o;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>i&&(i=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==e);if(!o)return null;var u=o,h=o.x,f=o.y,m=1/0,p;r=o;do n>=r.x&&r.x>=h&&n!==r.x&&ra(s<f?n:i,s,h,f,s<f?i:n,s,r.x,r.y)&&(p=Math.abs(s-r.y)/(n-r.x),lu(r,t)&&(p<m||p===m&&(r.x>o.x||r.x===o.x&&I2(o,r)))&&(o=r,m=p)),r=r.next;while(r!==u);return o}function I2(t,e){return st(t.prev,t,e.prev)<0&&st(e.next,t,t.next)<0}function R2(t,e,r,n){var s=t;do s.z===0&&(s.z=Ng(s.x,s.y,e,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,M2(s)}function M2(t){var e,r,n,s,i,o,a,u,h=1;do{for(r=t,t=null,i=null,o=0;r;){for(o++,n=r,a=0,e=0;e<h&&(a++,n=n.nextZ,!!n);e++);for(u=h;a>0||u>0&&n;)a!==0&&(u===0||!n||r.z<=n.z)?(s=r,r=r.nextZ,a--):(s=n,n=n.nextZ,u--),i?i.nextZ=s:t=s,s.prevZ=i,i=s;r=n}i.nextZ=null,h*=2}while(o>1);return t}function Ng(t,e,r,n,s){return t=(t-r)*s|0,e=(e-n)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function k2(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function ra(t,e,r,n,s,i,o,a){return(s-o)*(e-a)>=(t-o)*(i-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(i-a)>=(s-o)*(n-a)}function D2(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!F2(t,e)&&(lu(t,e)&&lu(e,t)&&N2(t,e)&&(st(t.prev,t,e.prev)||st(t,e.prev,e))||Yd(t,e)&&st(t.prev,t,t.next)>0&&st(e.prev,e,e.next)>0)}function st(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Yd(t,e){return t.x===e.x&&t.y===e.y}function vT(t,e,r,n){var s=Lc(st(t,e,r)),i=Lc(st(t,e,n)),o=Lc(st(r,n,t)),a=Lc(st(r,n,e));return!!(s!==i&&o!==a||s===0&&Oc(t,r,e)||i===0&&Oc(t,n,e)||o===0&&Oc(r,t,n)||a===0&&Oc(r,e,n))}function Oc(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Lc(t){return t>0?1:t<0?-1:0}function F2(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&vT(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function lu(t,e){return st(t.prev,t,t.next)<0?st(t,e,t.next)>=0&&st(t,t.prev,e)>=0:st(t,e,t.prev)<0||st(t,t.next,e)<0}function N2(t,e){var r=t,n=!1,s=(t.x+e.x)/2,i=(t.y+e.y)/2;do r.y>i!=r.next.y>i&&r.next.y!==r.y&&s<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function yT(t,e){var r=new Bg(t.i,t.x,t.y),n=new Bg(e.i,e.x,e.y),s=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=s,s.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function a_(t,e,r,n){var s=new Bg(t,e,r);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function uu(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Bg(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Xd.deviation=function(t,e,r,n){var s=e&&e.length,i=s?e[0]*r:t.length,o=Math.abs(Og(t,0,i,r));if(s)for(var a=0,u=e.length;a<u;a++){var h=e[a]*r,f=a<u-1?e[a+1]*r:t.length;o-=Math.abs(Og(t,h,f,r))}var m=0;for(a=0;a<n.length;a+=3){var p=n[a]*r,d=n[a+1]*r,g=n[a+2]*r;m+=Math.abs((t[p]-t[g])*(t[d+1]-t[p+1])-(t[p]-t[d])*(t[g+1]-t[p+1]))}return o===0&&m===0?0:Math.abs((m-o)/o)};function Og(t,e,r,n){for(var s=0,i=e,o=r-n;i<r;i+=n)s+=(t[o]-t[i])*(t[i+1]+t[o+1]),o=i;return s}Xd.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,s=0;s<t.length;s++){for(var i=0;i<t[s].length;i++)for(var o=0;o<e;o++)r.vertices.push(t[s][i][o]);s>0&&(n+=t[s-1].length,r.holes.push(n))}return r};var B2=kv.exports;const O2=mu(B2);var ld={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */ld.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,s=t&&!t.nodeType&&t,i=typeof Xs=="object"&&Xs;(i.global===i||i.window===i||i.self===i)&&(r=i);var o,a=2147483647,u=36,h=1,f=26,m=38,p=700,d=72,g=128,y="-",_=/^xn--/,w=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=u-h,b=Math.floor,I=String.fromCharCode,R;function P(G){throw new RangeError(E[G])}function k(G,j){for(var Z=G.length,pe=[];Z--;)pe[Z]=j(G[Z]);return pe}function M(G,j){var Z=G.split("@"),pe="";Z.length>1&&(pe=Z[0]+"@",G=Z[1]),G=G.replace(T,".");var ue=G.split("."),Te=k(ue,j).join(".");return pe+Te}function B(G){for(var j=[],Z=0,pe=G.length,ue,Te;Z<pe;)ue=G.charCodeAt(Z++),ue>=55296&&ue<=56319&&Z<pe?(Te=G.charCodeAt(Z++),(Te&64512)==56320?j.push(((ue&1023)<<10)+(Te&1023)+65536):(j.push(ue),Z--)):j.push(ue);return j}function F(G){return k(G,function(j){var Z="";return j>65535&&(j-=65536,Z+=I(j>>>10&1023|55296),j=56320|j&1023),Z+=I(j),Z}).join("")}function N(G){return G-48<10?G-22:G-65<26?G-65:G-97<26?G-97:u}function U(G,j){return G+22+75*(G<26)-((j!=0)<<5)}function H(G,j,Z){var pe=0;for(G=Z?b(G/p):G>>1,G+=b(G/j);G>A*f>>1;pe+=u)G=b(G/A);return b(pe+(A+1)*G/(G+m))}function Q(G){var j=[],Z=G.length,pe,ue=0,Te=g,ve=d,be,Le,wt,Ke,Ae,He,De,Xt,ut;for(be=G.lastIndexOf(y),be<0&&(be=0),Le=0;Le<be;++Le)G.charCodeAt(Le)>=128&&P("not-basic"),j.push(G.charCodeAt(Le));for(wt=be>0?be+1:0;wt<Z;){for(Ke=ue,Ae=1,He=u;wt>=Z&&P("invalid-input"),De=N(G.charCodeAt(wt++)),(De>=u||De>b((a-ue)/Ae))&&P("overflow"),ue+=De*Ae,Xt=He<=ve?h:He>=ve+f?f:He-ve,!(De<Xt);He+=u)ut=u-Xt,Ae>b(a/ut)&&P("overflow"),Ae*=ut;pe=j.length+1,ve=H(ue-Ke,pe,Ke==0),b(ue/pe)>a-Te&&P("overflow"),Te+=b(ue/pe),ue%=pe,j.splice(ue++,0,Te)}return F(j)}function W(G){var j,Z,pe,ue,Te,ve,be,Le,wt,Ke,Ae,He=[],De,Xt,ut,wn;for(G=B(G),De=G.length,j=g,Z=0,Te=d,ve=0;ve<De;++ve)Ae=G[ve],Ae<128&&He.push(I(Ae));for(pe=ue=He.length,ue&&He.push(y);pe<De;){for(be=a,ve=0;ve<De;++ve)Ae=G[ve],Ae>=j&&Ae<be&&(be=Ae);for(Xt=pe+1,be-j>b((a-Z)/Xt)&&P("overflow"),Z+=(be-j)*Xt,j=be,ve=0;ve<De;++ve)if(Ae=G[ve],Ae<j&&++Z>a&&P("overflow"),Ae==j){for(Le=Z,wt=u;Ke=wt<=Te?h:wt>=Te+f?f:wt-Te,!(Le<Ke);wt+=u)wn=Le-Ke,ut=u-Ke,He.push(I(U(Ke+wn%ut,0))),Le=b(wn/ut);He.push(I(U(Le,0))),Te=H(Z,Xt,pe==ue),Z=0,++pe}++Z,++j}return He.join("")}function O(G){return M(G,function(j){return _.test(j)?Q(j.slice(4).toLowerCase()):j})}function V(G){return M(G,function(j){return w.test(j)?"xn--"+W(j):j})}if(o={version:"1.4.1",ucs2:{decode:B,encode:F},decode:Q,encode:W,toASCII:V,toUnicode:O},n&&s)if(t.exports==n)s.exports=o;else for(R in o)o.hasOwnProperty(R)&&(n[R]=o[R]);else r.punycode=o})(Xs)})(ld,ld.exports);var L2=ld.exports,U2=Error,G2=EvalError,z2=RangeError,H2=ReferenceError,xT=SyntaxError,Su=TypeError,$2=URIError,V2=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0},l_=typeof Symbol<"u"&&Symbol,j2=V2,W2=function(){return typeof l_!="function"||typeof Symbol!="function"||typeof l_("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:j2()},qp={__proto__:null,foo:{}},X2=Object,Y2=function(){return{__proto__:qp}.foo===qp.foo&&!(qp instanceof X2)},Q2="Function.prototype.bind called on incompatible ",K2=Object.prototype.toString,Z2=Math.max,q2="[object Function]",u_=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},J2=function(e,r){for(var n=[],s=r||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},eR=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},tR=function(e){var r=this;if(typeof r!="function"||K2.apply(r)!==q2)throw new TypeError(Q2+r);for(var n=J2(arguments,1),s,i=function(){if(this instanceof s){var f=r.apply(this,u_(n,arguments));return Object(f)===f?f:this}return r.apply(e,u_(n,arguments))},o=Z2(0,r.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(s=Function("binder","return function ("+eR(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var h=function(){};h.prototype=r.prototype,s.prototype=new h,h.prototype=null}return s},rR=tR,Dv=Function.prototype.bind||rR,nR=Function.prototype.call,iR=Object.prototype.hasOwnProperty,sR=Dv,oR=sR.call(nR,iR),Re,aR=U2,lR=G2,uR=z2,cR=H2,Pa=xT,fa=Su,hR=$2,_T=Function,Jp=function(t){try{return _T('"use strict"; return ('+t+").constructor;")()}catch{}},Ks=Object.getOwnPropertyDescriptor;if(Ks)try{Ks({},"")}catch{Ks=null}var em=function(){throw new fa},dR=Ks?function(){try{return arguments.callee,em}catch{try{return Ks(arguments,"callee").get}catch{return em}}}():em,ko=W2(),fR=Y2(),Mt=Object.getPrototypeOf||(fR?function(t){return t.__proto__}:null),Oo={},pR=typeof Uint8Array>"u"||!Mt?Re:Mt(Uint8Array),Zs={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Re:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Re:ArrayBuffer,"%ArrayIteratorPrototype%":ko&&Mt?Mt([][Symbol.iterator]()):Re,"%AsyncFromSyncIteratorPrototype%":Re,"%AsyncFunction%":Oo,"%AsyncGenerator%":Oo,"%AsyncGeneratorFunction%":Oo,"%AsyncIteratorPrototype%":Oo,"%Atomics%":typeof Atomics>"u"?Re:Atomics,"%BigInt%":typeof BigInt>"u"?Re:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Re:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Re:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Re:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":aR,"%eval%":eval,"%EvalError%":lR,"%Float32Array%":typeof Float32Array>"u"?Re:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Re:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Re:FinalizationRegistry,"%Function%":_T,"%GeneratorFunction%":Oo,"%Int8Array%":typeof Int8Array>"u"?Re:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Re:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Re:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ko&&Mt?Mt(Mt([][Symbol.iterator]())):Re,"%JSON%":typeof JSON=="object"?JSON:Re,"%Map%":typeof Map>"u"?Re:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ko||!Mt?Re:Mt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Re:Promise,"%Proxy%":typeof Proxy>"u"?Re:Proxy,"%RangeError%":uR,"%ReferenceError%":cR,"%Reflect%":typeof Reflect>"u"?Re:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Re:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ko||!Mt?Re:Mt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Re:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ko&&Mt?Mt(""[Symbol.iterator]()):Re,"%Symbol%":ko?Symbol:Re,"%SyntaxError%":Pa,"%ThrowTypeError%":dR,"%TypedArray%":pR,"%TypeError%":fa,"%Uint8Array%":typeof Uint8Array>"u"?Re:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Re:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Re:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Re:Uint32Array,"%URIError%":hR,"%WeakMap%":typeof WeakMap>"u"?Re:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Re:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Re:WeakSet};if(Mt)try{null.error}catch(t){var mR=Mt(Mt(t));Zs["%Error.prototype%"]=mR}var gR=function t(e){var r;if(e==="%AsyncFunction%")r=Jp("async function () {}");else if(e==="%GeneratorFunction%")r=Jp("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Jp("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&Mt&&(r=Mt(s.prototype))}return Zs[e]=r,r},c_={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Eu=Dv,ud=oR,vR=Eu.call(Function.call,Array.prototype.concat),yR=Eu.call(Function.apply,Array.prototype.splice),h_=Eu.call(Function.call,String.prototype.replace),cd=Eu.call(Function.call,String.prototype.slice),xR=Eu.call(Function.call,RegExp.prototype.exec),_R=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,wR=/\\(\\)?/g,SR=function(e){var r=cd(e,0,1),n=cd(e,-1);if(r==="%"&&n!=="%")throw new Pa("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Pa("invalid intrinsic syntax, expected opening `%`");var s=[];return h_(e,_R,function(i,o,a,u){s[s.length]=a?h_(u,wR,"$1"):o||i}),s},ER=function(e,r){var n=e,s;if(ud(c_,n)&&(s=c_[n],n="%"+s[0]+"%"),ud(Zs,n)){var i=Zs[n];if(i===Oo&&(i=gR(n)),typeof i>"u"&&!r)throw new fa("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Pa("intrinsic "+e+" does not exist!")},Na=function(e,r){if(typeof e!="string"||e.length===0)throw new fa("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new fa('"allowMissing" argument must be a boolean');if(xR(/^%?[^%]*%?$/,e)===null)throw new Pa("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=SR(e),s=n.length>0?n[0]:"",i=ER("%"+s+"%",r),o=i.name,a=i.value,u=!1,h=i.alias;h&&(s=h[0],yR(n,vR([0,1],h)));for(var f=1,m=!0;f<n.length;f+=1){var p=n[f],d=cd(p,0,1),g=cd(p,-1);if((d==='"'||d==="'"||d==="`"||g==='"'||g==="'"||g==="`")&&d!==g)throw new Pa("property names with quotes must have matching quotes");if((p==="constructor"||!m)&&(u=!0),s+="."+p,o="%"+s+"%",ud(Zs,o))a=Zs[o];else if(a!=null){if(!(p in a)){if(!r)throw new fa("base intrinsic for "+e+" exists, but the property is not available.");return}if(Ks&&f+1>=n.length){var y=Ks(a,p);m=!!y,m&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[p]}else m=ud(a,p),a=a[p];m&&!u&&(Zs[o]=a)}}return a},wT={exports:{}},tm,d_;function Fv(){if(d_)return tm;d_=1;var t=Na,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return tm=e,tm}var TR=Na,Ch=TR("%Object.getOwnPropertyDescriptor%",!0);if(Ch)try{Ch([],"length")}catch{Ch=null}var ST=Ch,f_=Fv(),bR=xT,Do=Su,p_=ST,AR=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Do("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Do("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Do("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Do("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Do("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Do("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!p_&&p_(e,r);if(f_)f_(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:s===null&&u?u.enumerable:!s,value:n,writable:i===null&&u?u.writable:!i});else if(a||!s&&!i&&!o)e[r]=n;else throw new bR("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Lg=Fv(),ET=function(){return!!Lg};ET.hasArrayLengthDefineBug=function(){if(!Lg)return null;try{return Lg([],"length",{value:1}).length!==1}catch{return!0}};var CR=ET,PR=Na,m_=AR,IR=CR(),g_=ST,v_=Su,RR=PR("%Math.floor%"),MR=function(e,r){if(typeof e!="function")throw new v_("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||RR(r)!==r)throw new v_("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,i=!0;if("length"in e&&g_){var o=g_(e,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(i=!1)}return(s||i||!n)&&(IR?m_(e,"length",r,!0,!0):m_(e,"length",r)),e};(function(t){var e=Dv,r=Na,n=MR,s=Su,i=r("%Function.prototype.apply%"),o=r("%Function.prototype.call%"),a=r("%Reflect.apply%",!0)||e.call(o,i),u=Fv(),h=r("%Math.max%");t.exports=function(p){if(typeof p!="function")throw new s("a function is required");var d=a(e,o,arguments);return n(d,1+h(0,p.length-(arguments.length-1)),!0)};var f=function(){return a(e,i,arguments)};u?u(t.exports,"apply",{value:f}):t.exports.apply=f})(wT);var kR=wT.exports,TT=Na,bT=kR,DR=bT(TT("String.prototype.indexOf")),FR=function(e,r){var n=TT(e,!!r);return typeof n=="function"&&DR(e,".prototype.")>-1?bT(n):n};const NR={},BR=Object.freeze(Object.defineProperty({__proto__:null,default:NR},Symbol.toStringTag,{value:"Module"})),OR=eS(BR);var Nv=typeof Map=="function"&&Map.prototype,rm=Object.getOwnPropertyDescriptor&&Nv?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,hd=Nv&&rm&&typeof rm.get=="function"?rm.get:null,y_=Nv&&Map.prototype.forEach,Bv=typeof Set=="function"&&Set.prototype,nm=Object.getOwnPropertyDescriptor&&Bv?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,dd=Bv&&nm&&typeof nm.get=="function"?nm.get:null,x_=Bv&&Set.prototype.forEach,LR=typeof WeakMap=="function"&&WeakMap.prototype,Ul=LR?WeakMap.prototype.has:null,UR=typeof WeakSet=="function"&&WeakSet.prototype,Gl=UR?WeakSet.prototype.has:null,GR=typeof WeakRef=="function"&&WeakRef.prototype,__=GR?WeakRef.prototype.deref:null,zR=Boolean.prototype.valueOf,HR=Object.prototype.toString,$R=Function.prototype.toString,VR=String.prototype.match,Ov=String.prototype.slice,qi=String.prototype.replace,jR=String.prototype.toUpperCase,w_=String.prototype.toLowerCase,AT=RegExp.prototype.test,S_=Array.prototype.concat,Hn=Array.prototype.join,WR=Array.prototype.slice,E_=Math.floor,Ug=typeof BigInt=="function"?BigInt.prototype.valueOf:null,im=Object.getOwnPropertySymbols,Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="object",rr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ia||!0)?Symbol.toStringTag:null,CT=Object.prototype.propertyIsEnumerable,T_=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function b_(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||AT.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-E_(-t):E_(t);if(n!==t){var s=String(n),i=Ov.call(e,s.length+1);return qi.call(s,r,"$&_")+"."+qi.call(qi.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return qi.call(e,r,"$&_")}var zg=OR,A_=zg.custom,C_=IT(A_)?A_:null,XR=function t(e,r,n,s){var i=r||{};if(ji(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ji(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ji(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ji(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ji(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return MT(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?b_(e,u):u}if(typeof e=="bigint"){var h=String(e)+"n";return a?b_(e,h):h}var f=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return Hg(e)?"[Array]":"[Object]";var m=hM(i,n);if(typeof s>"u")s=[];else if(RT(s,e)>=0)return"[Circular]";function p(N,U,H){if(U&&(s=WR.call(s),s.push(U)),H){var Q={depth:i.depth};return ji(i,"quoteStyle")&&(Q.quoteStyle=i.quoteStyle),t(N,Q,n+1,s)}return t(N,i,n+1,s)}if(typeof e=="function"&&!P_(e)){var d=rM(e),g=Uc(e,p);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(g.length>0?" { "+Hn.call(g,", ")+" }":"")}if(IT(e)){var y=Ia?qi.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Gg.call(e);return typeof e=="object"&&!Ia?hl(y):y}if(lM(e)){for(var _="<"+w_.call(String(e.nodeName)),w=e.attributes||[],T=0;T<w.length;T++)_+=" "+w[T].name+"="+PT(YR(w[T].value),"double",i);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+w_.call(String(e.nodeName))+">",_}if(Hg(e)){if(e.length===0)return"[]";var E=Uc(e,p);return m&&!cM(E)?"["+$g(E,m)+"]":"[ "+Hn.call(E,", ")+" ]"}if(KR(e)){var A=Uc(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!CT.call(e,"cause")?"{ ["+String(e)+"] "+Hn.call(S_.call("[cause]: "+p(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Hn.call(A,", ")+" }"}if(typeof e=="object"&&o){if(C_&&typeof e[C_]=="function"&&zg)return zg(e,{depth:f-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(nM(e)){var b=[];return y_&&y_.call(e,function(N,U){b.push(p(U,e,!0)+" => "+p(N,e))}),I_("Map",hd.call(e),b,m)}if(oM(e)){var I=[];return x_&&x_.call(e,function(N){I.push(p(N,e))}),I_("Set",dd.call(e),I,m)}if(iM(e))return sm("WeakMap");if(aM(e))return sm("WeakSet");if(sM(e))return sm("WeakRef");if(qR(e))return hl(p(Number(e)));if(eM(e))return hl(p(Ug.call(e)));if(JR(e))return hl(zR.call(e));if(ZR(e))return hl(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Xs)return"{ [object globalThis] }";if(!QR(e)&&!P_(e)){var R=Uc(e,p),P=T_?T_(e)===Object.prototype:e instanceof Object||e.constructor===Object,k=e instanceof Object?"":"null prototype",M=!P&&rr&&Object(e)===e&&rr in e?Ov.call(vs(e),8,-1):k?"Object":"",B=P||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",F=B+(M||k?"["+Hn.call(S_.call([],M||[],k||[]),": ")+"] ":"");return R.length===0?F+"{}":m?F+"{"+$g(R,m)+"}":F+"{ "+Hn.call(R,", ")+" }"}return String(e)};function PT(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function YR(t){return qi.call(String(t),/"/g,"&quot;")}function Hg(t){return vs(t)==="[object Array]"&&(!rr||!(typeof t=="object"&&rr in t))}function QR(t){return vs(t)==="[object Date]"&&(!rr||!(typeof t=="object"&&rr in t))}function P_(t){return vs(t)==="[object RegExp]"&&(!rr||!(typeof t=="object"&&rr in t))}function KR(t){return vs(t)==="[object Error]"&&(!rr||!(typeof t=="object"&&rr in t))}function ZR(t){return vs(t)==="[object String]"&&(!rr||!(typeof t=="object"&&rr in t))}function qR(t){return vs(t)==="[object Number]"&&(!rr||!(typeof t=="object"&&rr in t))}function JR(t){return vs(t)==="[object Boolean]"&&(!rr||!(typeof t=="object"&&rr in t))}function IT(t){if(Ia)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Gg)return!1;try{return Gg.call(t),!0}catch{}return!1}function eM(t){if(!t||typeof t!="object"||!Ug)return!1;try{return Ug.call(t),!0}catch{}return!1}var tM=Object.prototype.hasOwnProperty||function(t){return t in this};function ji(t,e){return tM.call(t,e)}function vs(t){return HR.call(t)}function rM(t){if(t.name)return t.name;var e=VR.call($R.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function RT(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function nM(t){if(!hd||!t||typeof t!="object")return!1;try{hd.call(t);try{dd.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function iM(t){if(!Ul||!t||typeof t!="object")return!1;try{Ul.call(t,Ul);try{Gl.call(t,Gl)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function sM(t){if(!__||!t||typeof t!="object")return!1;try{return __.call(t),!0}catch{}return!1}function oM(t){if(!dd||!t||typeof t!="object")return!1;try{dd.call(t);try{hd.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function aM(t){if(!Gl||!t||typeof t!="object")return!1;try{Gl.call(t,Gl);try{Ul.call(t,Ul)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function lM(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function MT(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return MT(Ov.call(t,0,e.maxStringLength),e)+n}var s=qi.call(qi.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,uM);return PT(s,"single",e)}function uM(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+jR.call(e.toString(16))}function hl(t){return"Object("+t+")"}function sm(t){return t+" { ? }"}function I_(t,e,r,n){var s=n?$g(r,n):Hn.call(r,", ");return t+" ("+e+") {"+s+"}"}function cM(t){for(var e=0;e<t.length;e++)if(RT(t[e],`
`)>=0)return!1;return!0}function hM(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Hn.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Hn.call(Array(e+1),r)}}function $g(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Hn.call(t,","+r)+`
`+e.prev}function Uc(t,e){var r=Hg(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=ji(t,s)?e(t[s],t):""}var i=typeof im=="function"?im(t):[],o;if(Ia){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var u in t)ji(t,u)&&(r&&String(Number(u))===u&&u<t.length||Ia&&o["$"+u]instanceof Symbol||(AT.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof im=="function")for(var h=0;h<i.length;h++)CT.call(t,i[h])&&n.push("["+e(i[h])+"]: "+e(t[i[h]],t));return n}var kT=Na,Ba=FR,dM=XR,fM=Su,Gc=kT("%WeakMap%",!0),zc=kT("%Map%",!0),pM=Ba("WeakMap.prototype.get",!0),mM=Ba("WeakMap.prototype.set",!0),gM=Ba("WeakMap.prototype.has",!0),vM=Ba("Map.prototype.get",!0),yM=Ba("Map.prototype.set",!0),xM=Ba("Map.prototype.has",!0),Lv=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},_M=function(t,e){var r=Lv(t,e);return r&&r.value},wM=function(t,e,r){var n=Lv(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},SM=function(t,e){return!!Lv(t,e)},EM=function(){var e,r,n,s={assert:function(i){if(!s.has(i))throw new fM("Side channel does not contain "+dM(i))},get:function(i){if(Gc&&i&&(typeof i=="object"||typeof i=="function")){if(e)return pM(e,i)}else if(zc){if(r)return vM(r,i)}else if(n)return _M(n,i)},has:function(i){if(Gc&&i&&(typeof i=="object"||typeof i=="function")){if(e)return gM(e,i)}else if(zc){if(r)return xM(r,i)}else if(n)return SM(n,i);return!1},set:function(i,o){Gc&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Gc),mM(e,i,o)):zc?(r||(r=new zc),yM(r,i,o)):(n||(n={key:{},next:null}),wM(n,i,o))}};return s},TM=String.prototype.replace,bM=/%20/g,om={RFC1738:"RFC1738",RFC3986:"RFC3986"},Uv={default:om.RFC3986,formatters:{RFC1738:function(t){return TM.call(t,bM,"+")},RFC3986:function(t){return String(t)}},RFC1738:om.RFC1738,RFC3986:om.RFC3986},AM=Uv,am=Object.prototype.hasOwnProperty,Hs=Array.isArray,Dn=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),CM=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(Hs(n)){for(var s=[],i=0;i<n.length;++i)typeof n[i]<"u"&&s.push(n[i]);r.obj[r.prop]=s}}},DT=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},s=0;s<e.length;++s)typeof e[s]<"u"&&(n[s]=e[s]);return n},PM=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(Hs(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!am.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var s=e;return Hs(e)&&!Hs(r)&&(s=DT(e,n)),Hs(e)&&Hs(r)?(r.forEach(function(i,o){if(am.call(e,o)){var a=e[o];a&&typeof a=="object"&&i&&typeof i=="object"?e[o]=t(a,i,n):e.push(i)}else e[o]=i}),e):Object.keys(r).reduce(function(i,o){var a=r[o];return am.call(i,o)?i[o]=t(i[o],a,n):i[o]=a,i},s)},IM=function(e,r){return Object.keys(r).reduce(function(n,s){return n[s]=r[s],n},e)},RM=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},lm=1024,MM=function(e,r,n,s,i){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;u+=lm){for(var h=o.length>=lm?o.slice(u,u+lm):o,f=[],m=0;m<h.length;++m){var p=h.charCodeAt(m);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===AM.RFC1738&&(p===40||p===41)){f[f.length]=h.charAt(m);continue}if(p<128){f[f.length]=Dn[p];continue}if(p<2048){f[f.length]=Dn[192|p>>6]+Dn[128|p&63];continue}if(p<55296||p>=57344){f[f.length]=Dn[224|p>>12]+Dn[128|p>>6&63]+Dn[128|p&63];continue}m+=1,p=65536+((p&1023)<<10|h.charCodeAt(m)&1023),f[f.length]=Dn[240|p>>18]+Dn[128|p>>12&63]+Dn[128|p>>6&63]+Dn[128|p&63]}a+=f.join("")}return a},kM=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],s=0;s<r.length;++s)for(var i=r[s],o=i.obj[i.prop],a=Object.keys(o),u=0;u<a.length;++u){var h=a[u],f=o[h];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:o,prop:h}),n.push(f))}return CM(r),e},DM=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},FM=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},NM=function(e,r){return[].concat(e,r)},BM=function(e,r){if(Hs(e)){for(var n=[],s=0;s<e.length;s+=1)n.push(r(e[s]));return n}return r(e)},FT={arrayToObject:DT,assign:IM,combine:NM,compact:kM,decode:RM,encode:MM,isBuffer:FM,isRegExp:DM,maybeMap:BM,merge:PM},NT=EM,Ph=FT,zl=Uv,OM=Object.prototype.hasOwnProperty,BT={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Gn=Array.isArray,LM=Array.prototype.push,OT=function(t,e){LM.apply(t,Gn(e)?e:[e])},UM=Date.prototype.toISOString,R_=zl.default,Et={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ph.encode,encodeValuesOnly:!1,format:R_,formatter:zl.formatters[R_],indices:!1,serializeDate:function(e){return UM.call(e)},skipNulls:!1,strictNullHandling:!1},GM=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},um={},zM=function t(e,r,n,s,i,o,a,u,h,f,m,p,d,g,y,_,w,T){for(var E=e,A=T,b=0,I=!1;(A=A.get(um))!==void 0&&!I;){var R=A.get(e);if(b+=1,typeof R<"u"){if(R===b)throw new RangeError("Cyclic object value");I=!0}typeof A.get(um)>"u"&&(b=0)}if(typeof f=="function"?E=f(r,E):E instanceof Date?E=d(E):n==="comma"&&Gn(E)&&(E=Ph.maybeMap(E,function(G){return G instanceof Date?d(G):G})),E===null){if(o)return h&&!_?h(r,Et.encoder,w,"key",g):r;E=""}if(GM(E)||Ph.isBuffer(E)){if(h){var P=_?r:h(r,Et.encoder,w,"key",g);return[y(P)+"="+y(h(E,Et.encoder,w,"value",g))]}return[y(r)+"="+y(String(E))]}var k=[];if(typeof E>"u")return k;var M;if(n==="comma"&&Gn(E))_&&h&&(E=Ph.maybeMap(E,h)),M=[{value:E.length>0?E.join(",")||null:void 0}];else if(Gn(f))M=f;else{var B=Object.keys(E);M=m?B.sort(m):B}var F=u?r.replace(/\./g,"%2E"):r,N=s&&Gn(E)&&E.length===1?F+"[]":F;if(i&&Gn(E)&&E.length===0)return N+"[]";for(var U=0;U<M.length;++U){var H=M[U],Q=typeof H=="object"&&typeof H.value<"u"?H.value:E[H];if(!(a&&Q===null)){var W=p&&u?H.replace(/\./g,"%2E"):H,O=Gn(E)?typeof n=="function"?n(N,W):N:N+(p?"."+W:"["+W+"]");T.set(e,b);var V=NT();V.set(um,T),OT(k,t(Q,O,n,s,i,o,a,u,n==="comma"&&_&&Gn(E)?null:h,f,m,p,d,g,y,_,w,V))}}return k},HM=function(e){if(!e)return Et;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Et.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=zl.default;if(typeof e.format<"u"){if(!OM.call(zl.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var s=zl.formatters[n],i=Et.filter;(typeof e.filter=="function"||Gn(e.filter))&&(i=e.filter);var o;if(e.arrayFormat in BT?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=Et.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Et.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Et.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Et.allowEmptyArrays,arrayFormat:o,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Et.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Et.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Et.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Et.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Et.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Et.encodeValuesOnly,filter:i,format:n,formatter:s,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Et.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Et.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Et.strictNullHandling}},$M=function(t,e){var r=t,n=HM(e),s,i;typeof n.filter=="function"?(i=n.filter,r=i("",r)):Gn(n.filter)&&(i=n.filter,s=i);var o=[];if(typeof r!="object"||r===null)return"";var a=BT[n.arrayFormat],u=a==="comma"&&n.commaRoundTrip;s||(s=Object.keys(r)),n.sort&&s.sort(n.sort);for(var h=NT(),f=0;f<s.length;++f){var m=s[f];n.skipNulls&&r[m]===null||OT(o,zM(r[m],m,a,u,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,h))}var p=o.join(n.delimiter),d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),p.length>0?d+p:""},Ra=FT,Vg=Object.prototype.hasOwnProperty,VM=Array.isArray,pt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Ra.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},jM=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},LT=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},WM="utf8=%26%2310003%3B",XM="utf8=%E2%9C%93",YM=function(e,r){var n={__proto__:null},s=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=r.parameterLimit===1/0?void 0:r.parameterLimit,o=s.split(r.delimiter,i),a=-1,u,h=r.charset;if(r.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===XM?h="utf-8":o[u]===WM&&(h="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var f=o[u],m=f.indexOf("]="),p=m===-1?f.indexOf("="):m+1,d,g;p===-1?(d=r.decoder(f,pt.decoder,h,"key"),g=r.strictNullHandling?null:""):(d=r.decoder(f.slice(0,p),pt.decoder,h,"key"),g=Ra.maybeMap(LT(f.slice(p+1),r),function(_){return r.decoder(_,pt.decoder,h,"value")})),g&&r.interpretNumericEntities&&h==="iso-8859-1"&&(g=jM(g)),f.indexOf("[]=")>-1&&(g=VM(g)?[g]:g);var y=Vg.call(n,d);y&&r.duplicates==="combine"?n[d]=Ra.combine(n[d],g):(!y||r.duplicates==="last")&&(n[d]=g)}return n},QM=function(t,e,r,n){for(var s=n?e:LT(e,r),i=t.length-1;i>=0;--i){var o,a=t[i];if(a==="[]"&&r.parseArrays)o=r.allowEmptyArrays&&s===""?[]:[].concat(s);else{o=r.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,h=r.decodeDotInKeys?u.replace(/%2E/g,"."):u,f=parseInt(h,10);!r.parseArrays&&h===""?o={0:s}:!isNaN(f)&&a!==h&&String(f)===h&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(o=[],o[f]=s):h!=="__proto__"&&(o[h]=s)}s=o}return s},KM=function(e,r,n,s){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(i),h=u?i.slice(0,u.index):i,f=[];if(h){if(!n.plainObjects&&Vg.call(Object.prototype,h)&&!n.allowPrototypes)return;f.push(h)}for(var m=0;n.depth>0&&(u=a.exec(i))!==null&&m<n.depth;){if(m+=1,!n.plainObjects&&Vg.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(u[1])}return u&&f.push("["+i.slice(u.index)+"]"),QM(f,r,n,s)}},ZM=function(e){if(!e)return pt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?pt.charset:e.charset,n=typeof e.duplicates>"u"?pt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:pt.allowDots:!!e.allowDots;return{allowDots:s,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:pt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:pt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:pt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:pt.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:pt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:pt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:pt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:pt.decoder,delimiter:typeof e.delimiter=="string"||Ra.isRegExp(e.delimiter)?e.delimiter:pt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:pt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:pt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:pt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:pt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:pt.strictNullHandling}},qM=function(t,e){var r=ZM(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?YM(t,r):t,s=r.plainObjects?Object.create(null):{},i=Object.keys(n),o=0;o<i.length;++o){var a=i[o],u=KM(a,n[a],r,typeof t=="string");s=Ra.merge(s,u,r)}return r.allowSparse===!0?s:Ra.compact(s)},JM=$M,ek=qM,tk=Uv,rk={formats:tk,parse:ek,stringify:JM},nk=L2;function yi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ik=/^([a-z0-9.+-]+:)/i,sk=/:[0-9]*$/,ok=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,ak=["<",">",'"',"`"," ","\r",`
`,"	"],lk=["{","}","|","\\","^","`"].concat(ak),jg=["'"].concat(lk),M_=["%","/","?",";","#"].concat(jg),k_=["/","?","#"],uk=255,D_=/^[+a-z0-9A-Z_-]{0,63}$/,ck=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hk={javascript:!0,"javascript:":!0},Wg={javascript:!0,"javascript:":!0},pa={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Xg=rk;function dk(t,e,r){if(t&&typeof t=="object"&&t instanceof yi)return t;var n=new yi;return n.parse(t,e,r),n}yi.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),s=n!==-1&&n<t.indexOf("#")?"?":"#",i=t.split(s),o=/\\/g;i[0]=i[0].replace(o,"/"),t=i.join(s);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var u=ok.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=Xg.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=ik.exec(a);if(h){h=h[0];var f=h.toLowerCase();this.protocol=f,a=a.substr(h.length)}if(r||h||a.match(/^\/\/[^@/]+@[^@/]+/)){var m=a.substr(0,2)==="//";m&&!(h&&Wg[h])&&(a=a.substr(2),this.slashes=!0)}if(!Wg[h]&&(m||h&&!pa[h])){for(var p=-1,d=0;d<k_.length;d++){var g=a.indexOf(k_[d]);g!==-1&&(p===-1||g<p)&&(p=g)}var y,_;p===-1?_=a.lastIndexOf("@"):_=a.lastIndexOf("@",p),_!==-1&&(y=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(y)),p=-1;for(var d=0;d<M_.length;d++){var g=a.indexOf(M_[d]);g!==-1&&(p===-1||g<p)&&(p=g)}p===-1&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var w=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!w)for(var T=this.hostname.split(/\./),d=0,E=T.length;d<E;d++){var A=T[d];if(A&&!A.match(D_)){for(var b="",I=0,R=A.length;I<R;I++)A.charCodeAt(I)>127?b+="x":b+=A[I];if(!b.match(D_)){var P=T.slice(0,d),k=T.slice(d+1),M=A.match(ck);M&&(P.push(M[1]),k.unshift(M[2])),k.length&&(a="/"+k.join(".")+a),this.hostname=P.join(".");break}}}this.hostname.length>uk?this.hostname="":this.hostname=this.hostname.toLowerCase(),w||(this.hostname=nk.toASCII(this.hostname));var B=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+B,this.href+=this.host,w&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!hk[f])for(var d=0,E=jg.length;d<E;d++){var N=jg[d];if(a.indexOf(N)!==-1){var U=encodeURIComponent(N);U===N&&(U=escape(N)),a=a.split(N).join(U)}}var H=a.indexOf("#");H!==-1&&(this.hash=a.substr(H),a=a.slice(0,H));var Q=a.indexOf("?");if(Q!==-1?(this.search=a.substr(Q),this.query=a.substr(Q+1),e&&(this.query=Xg.parse(this.query)),a=a.slice(0,Q)):e&&(this.search="",this.query={}),a&&(this.pathname=a),pa[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",W=this.search||"";this.path=B+W}return this.href=this.format(),this};yi.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,i="";this.host?s=t+this.host:this.hostname&&(s=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(i=Xg.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||i&&"?"+i||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||pa[e])&&s!==!1?(s="//"+(s||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):s||(s=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+s+r+o+n};yi.prototype.resolve=function(t){return this.resolveObject(dk(t,!1,!0)).format()};yi.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new yi;e.parse(t,!1,!0),t=e}for(var r=new yi,n=Object.keys(this),s=0;s<n.length;s++){var i=n[s];r[i]=this[i]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(r[u]=t[u])}return pa[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!pa[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var m=h[f];r[m]=t[m]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!Wg[t.protocol]){for(var E=(t.pathname||"").split("/");E.length&&!(t.host=E.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),E[0]!==""&&E.unshift(""),E.length<2&&E.unshift(""),r.pathname=E.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",d=r.search||"";r.path=p+d}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var g=r.pathname&&r.pathname.charAt(0)==="/",y=t.host||t.pathname&&t.pathname.charAt(0)==="/",_=y||g||r.host&&t.pathname,w=_,T=r.pathname&&r.pathname.split("/")||[],E=t.pathname&&t.pathname.split("/")||[],A=r.protocol&&!pa[r.protocol];if(A&&(r.hostname="",r.port=null,r.host&&(T[0]===""?T[0]=r.host:T.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(E[0]===""?E[0]=t.host:E.unshift(t.host)),t.host=null),_=_&&(E[0]===""||T[0]==="")),y)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,T=E;else if(E.length)T||(T=[]),T.pop(),T=T.concat(E),r.search=t.search,r.query=t.query;else if(t.search!=null){if(A){r.host=T.shift(),r.hostname=r.host;var b=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;b&&(r.auth=b.shift(),r.hostname=b.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var I=T.slice(-1)[0],R=(r.host||t.host||T.length>1)&&(I==="."||I==="..")||I==="",P=0,k=T.length;k>=0;k--)I=T[k],I==="."?T.splice(k,1):I===".."?(T.splice(k,1),P++):P&&(T.splice(k,1),P--);if(!_&&!w)for(;P--;P)T.unshift("..");_&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),R&&T.join("/").substr(-1)!=="/"&&T.push("");var M=T[0]===""||T[0]&&T[0].charAt(0)==="/";if(A){r.hostname=M?"":T.length?T.shift():"",r.host=r.hostname;var b=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;b&&(r.auth=b.shift(),r.hostname=b.shift(),r.host=r.hostname)}return _=_||r.host&&T.length,_&&!M&&T.unshift(""),T.length>0?r.pathname=T.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};yi.prototype.parseHost=function(){var t=this.host,e=sk.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const F_={};function Ie(t,e,r=3){if(F_[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),F_[e]=!0}function sn(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function dl(t){return t.split("?")[0].split("#")[0]}function fk(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pk(t,e,r){return t.replace(new RegExp(fk(e),"g"),r)}function mk(t,e){let r="",n=0,s=-1,i=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",n=0):(r=r.slice(0,u),n=r.length-1-r.lastIndexOf("/")),s=a,i=0;continue}}else if(r.length===2||r.length===1){r="",n=0,s=a,i=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${t.slice(s+1,a)}`:r=t.slice(s+1,a),n=a-s-1;s=a,i=0}else o===46&&i!==-1?++i:i=-1}return r}const Ot={toPosix(t){return pk(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){sn(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(sn(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=dl(this.toPosix(e??le.ADAPTER.getBaseUrl())),s=dl(this.toPosix(r??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?Ot.join(s,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(sn(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=mk(t,!1),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return sn(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(sn(n),n.length>0)if(e===void 0)e=n;else{const s=t[r-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(sn(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,s=!0;const i=this.getProtocol(t),o=t;t=t.slice(i.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!s){n=a;break}}else s=!1;return n===-1?r?"/":this.isUrl(o)?i+t:i:r&&n===1?"//":i+t.slice(0,n)},rootname(t){sn(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){sn(t),e&&sn(e),t=dl(this.toPosix(t));let r=0,n=-1,s=!0,i;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(i=t.length-1;i>=0;--i){const u=t.charCodeAt(i);if(u===47){if(!s){r=i+1;break}}else a===-1&&(s=!1,a=i+1),o>=0&&(u===e.charCodeAt(o)?--o===-1&&(n=i):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(i=t.length-1;i>=0;--i)if(t.charCodeAt(i)===47){if(!s){r=i+1;break}}else n===-1&&(s=!1,n=i+1);return n===-1?"":t.slice(r,n)},extname(t){sn(t),t=dl(this.toPosix(t));let e=-1,r=0,n=-1,s=!0,i=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!s){r=o+1;break}continue}n===-1&&(s=!1,n=o+1),a===46?e===-1?e=o:i!==1&&(i=1):e!==-1&&(i=-1)}return e===-1||n===-1||i===0||i===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){sn(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=dl(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let s;e.root=this.rootname(t),n||this.hasProtocol(t)?s=1:s=0;let i=-1,o=0,a=-1,u=!0,h=t.length-1,f=0;for(;h>=s;--h){if(r=t.charCodeAt(h),r===47){if(!u){o=h+1;break}continue}a===-1&&(u=!1,a=h+1),r===46?i===-1?i=h:f!==1&&(f=1):i!==-1&&(f=-1)}return i===-1||a===-1||f===0||f===1&&i===a-1&&i===o+1?a!==-1&&(o===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&n?(e.name=t.slice(1,i),e.base=t.slice(1,a)):(e.name=t.slice(o,i),e.base=t.slice(o,a)),e.ext=t.slice(i,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let cm;async function gk(){return cm??(cm=(async()=>{var i;const t=document.createElement("canvas").getContext("webgl");if(!t)return gr.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return gr.UNPACK;const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);const n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const s=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,s),t.deleteFramebuffer(n),t.deleteTexture(r),(i=t.getExtension("WEBGL_lose_context"))==null||i.loseContext(),s[0]<=s[3]?gr.PMA:gr.UNPACK})()),cm}let hm;function vk(){return typeof hm>"u"&&(hm=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:le.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!le.ADAPTER.getWebGLRenderingContext())return!1;const r=le.ADAPTER.createCanvas();let n=r.getContext("webgl",t)||r.getContext("experimental-webgl",t);const s=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,s}catch{return!1}}()),hm}var yk={grad:.9,turn:360,rad:360/(2*Math.PI)},ai=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Dt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},Yr=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},UT=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},N_=function(t){return{r:Yr(t.r,0,255),g:Yr(t.g,0,255),b:Yr(t.b,0,255),a:Yr(t.a)}},dm=function(t){return{r:Dt(t.r),g:Dt(t.g),b:Dt(t.b),a:Dt(t.a,3)}},xk=/^#([0-9a-f]{3,8})$/i,Hc=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},GT=function(t){var e=t.r,r=t.g,n=t.b,s=t.a,i=Math.max(e,r,n),o=i-Math.min(e,r,n),a=o?i===e?(r-n)/o:i===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(a<0?a+6:a),s:i?o/i*100:0,v:i/255*100,a:s}},zT=function(t){var e=t.h,r=t.s,n=t.v,s=t.a;e=e/360*6,r/=100,n/=100;var i=Math.floor(e),o=n*(1-r),a=n*(1-(e-i)*r),u=n*(1-(1-e+i)*r),h=i%6;return{r:255*[n,a,o,o,u,n][h],g:255*[u,n,n,a,o,o][h],b:255*[o,o,u,n,n,a][h],a:s}},B_=function(t){return{h:UT(t.h),s:Yr(t.s,0,100),l:Yr(t.l,0,100),a:Yr(t.a)}},O_=function(t){return{h:Dt(t.h),s:Dt(t.s),l:Dt(t.l),a:Dt(t.a,3)}},L_=function(t){return zT((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},Hl=function(t){return{h:(e=GT(t)).h,s:(s=(200-(r=e.s))*(n=e.v)/100)>0&&s<200?r*n/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,r,n,s},_k=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Sk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ek=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yg={string:[[function(t){var e=xk.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Dt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Dt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Sk.exec(t)||Ek.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:N_({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=_k.exec(t)||wk.exec(t);if(!e)return null;var r,n,s=B_({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(yk[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return L_(s)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,s=t.a,i=s===void 0?1:s;return ai(e)&&ai(r)&&ai(n)?N_({r:Number(e),g:Number(r),b:Number(n),a:Number(i)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,s=t.a,i=s===void 0?1:s;if(!ai(e)||!ai(r)||!ai(n))return null;var o=B_({h:Number(e),s:Number(r),l:Number(n),a:Number(i)});return L_(o)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,s=t.a,i=s===void 0?1:s;if(!ai(e)||!ai(r)||!ai(n))return null;var o=function(a){return{h:UT(a.h),s:Yr(a.s,0,100),v:Yr(a.v,0,100),a:Yr(a.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(i)});return zT(o)},"hsv"]]},U_=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},Tk=function(t){return typeof t=="string"?U_(t.trim(),Yg.string):typeof t=="object"&&t!==null?U_(t,Yg.object):[null,void 0]},fm=function(t,e){var r=Hl(t);return{h:r.h,s:Yr(r.s+100*e,0,100),l:r.l,a:r.a}},pm=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},G_=function(t,e){var r=Hl(t);return{h:r.h,s:r.s,l:Yr(r.l+100*e,0,100),a:r.a}},Qg=function(){function t(e){this.parsed=Tk(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Dt(pm(this.rgba),2)},t.prototype.isDark=function(){return pm(this.rgba)<.5},t.prototype.isLight=function(){return pm(this.rgba)>=.5},t.prototype.toHex=function(){return e=dm(this.rgba),r=e.r,n=e.g,s=e.b,o=(i=e.a)<1?Hc(Dt(255*i)):"","#"+Hc(r)+Hc(n)+Hc(s)+o;var e,r,n,s,i,o},t.prototype.toRgb=function(){return dm(this.rgba)},t.prototype.toRgbString=function(){return e=dm(this.rgba),r=e.r,n=e.g,s=e.b,(i=e.a)<1?"rgba("+r+", "+n+", "+s+", "+i+")":"rgb("+r+", "+n+", "+s+")";var e,r,n,s,i},t.prototype.toHsl=function(){return O_(Hl(this.rgba))},t.prototype.toHslString=function(){return e=O_(Hl(this.rgba)),r=e.h,n=e.s,s=e.l,(i=e.a)<1?"hsla("+r+", "+n+"%, "+s+"%, "+i+")":"hsl("+r+", "+n+"%, "+s+"%)";var e,r,n,s,i},t.prototype.toHsv=function(){return e=GT(this.rgba),{h:Dt(e.h),s:Dt(e.s),v:Dt(e.v),a:Dt(e.a,3)};var e},t.prototype.invert=function(){return Fn({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),Fn(fm(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),Fn(fm(this.rgba,-e))},t.prototype.grayscale=function(){return Fn(fm(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),Fn(G_(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),Fn(G_(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?Fn({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Dt(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=Hl(this.rgba);return typeof e=="number"?Fn({h:e,s:r.s,l:r.l,a:r.a}):Dt(r.h)},t.prototype.isEqual=function(e){return this.toHex()===Fn(e).toHex()},t}(),Fn=function(t){return t instanceof Qg?t:new Qg(t)},z_=[],bk=function(t){t.forEach(function(e){z_.indexOf(e)<0&&(e(Qg,Yg),z_.push(e))})};function Ak(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var s in r)n[r[s]]=s;var i={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,u,h=n[this.toHex()];if(h)return h;if(o!=null&&o.closest){var f=this.toRgb(),m=1/0,p="black";if(!i.length)for(var d in r)i[d]=new t(r[d]).toRgb();for(var g in r){var y=(a=f,u=i[g],Math.pow(a.r-u.r,2)+Math.pow(a.g-u.g,2)+Math.pow(a.b-u.b,2));y<m&&(m=y,p=g)}return p}},e.string.push([function(o){var a=o.toLowerCase(),u=a==="transparent"?"#0000":r[a];return u?new t(u).toRgb():null},"name"])}bk([Ak]);const Lo=class Ih{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ih)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,r){const n=typeof e;if(n!==typeof r)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((s,i)=>s===r[i]);if(e!==null&&r!==null){const s=Object.keys(e),i=Object.keys(r);return s.length!==i.length?!1:s.every(o=>e[o]===r[o])}return e===r}toRgba(){const[e,r,n,s]=this._components;return{r:e,g:r,b:n,a:s}}toRgb(){const[e,r,n]=this._components;return{r:e,g:r,b:n}}toRgbaString(){const[e,r,n]=this.toUint8RgbArray();return`rgba(${e},${r},${n},${this.alpha})`}toUint8RgbArray(e){const[r,n,s]=this._components;return e=e??[],e[0]=Math.round(r*255),e[1]=Math.round(n*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[r,n,s]=this._components;return e[0]=r,e[1]=n,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,n,s,i]=Ih.temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=s,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let n=this._int>>16&255,s=this._int>>8&255,i=this._int&255;return r&&(n=n*e+.5|0,s=s*e+.5|0,i=i*e+.5|0),(e*255<<24)+(n<<16)+(s<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[r,n,s]=this._components;return this._components[0]=Math.round(r*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[r,n,s,i]=this._components;return e[0]=r,e[1]=n,e[2]=s,e[3]=i,e}normalize(e){let r,n,s,i;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,n=(o>>8&255)/255,s=(o&255)/255,i=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,s,i=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,s,i=255]=e,r/=255,n/=255,s/=255,i/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Ih.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Fn(e);o.isValid()&&({r,g:n,b:s,a:i}=o.rgba,r/=255,n/=255,s/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=s,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,r,n]=this._components;this._int=(e*255<<16)+(r*255<<8)+(n*255|0)}_clamp(e,r=0,n=1){return typeof e=="number"?Math.min(Math.max(e,r),n):(e.forEach((s,i)=>{e[i]=Math.min(Math.max(s,r),n)}),e)}};Lo.shared=new Lo,Lo.temp=new Lo,Lo.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let $e=Lo;function Ck(t,e=[]){return Ie("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),$e.shared.setValue(t).toRgbArray(e)}function Pk(t){return Ie("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),$e.shared.setValue(t).toHex()}function HT(t){return Ie("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),$e.shared.setValue(t).toNumber()}function Ik(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[we.NORMAL_NPM]=we.NORMAL,t[we.ADD_NPM]=we.ADD,t[we.SCREEN_NPM]=we.SCREEN,e[we.NORMAL]=we.NORMAL_NPM,e[we.ADD]=we.ADD_NPM,e[we.SCREEN]=we.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const $T=Ik();function VT(t,e){return $T[e?1:0][t]}function Rk(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,s=0;n<r;n+=6,s+=4)e[n+0]=s+0,e[n+1]=s+1,e[n+2]=s+2,e[n+3]=s+0,e[n+4]=s+2,e[n+5]=s+3;return e}function jT(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function fd(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function H_(t){return!(t&t-1)&&!!t}function $_(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function ma(t,e,r){const n=t.length;let s;if(e>=n||r===0)return;r=e+r>n?n-e:r;const i=n-r;for(s=e;s<i;++s)t[s]=t[s+r];t.length=i}function Ji(t){return t===0?0:t<0?-1:1}let Mk=0;function oo(){return++Mk}const Kg=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Kg.EMPTY=new Kg(0,0,0,0);let V_=Kg;const j_={},Nn=Object.create(null),Gi=Object.create(null);class kk{constructor(e,r,n){this._canvas=le.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||le.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function W_(t,e,r){for(let n=0,s=4*r*e;n<e;++n,s+=4)if(t[s+3]!==0)return!1;return!0}function X_(t,e,r,n,s){const i=4*e;for(let o=n,a=n*i+4*r;o<=s;++o,a+=i)if(t[a+3]!==0)return!1;return!0}function Dk(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const s=n.getImageData(0,0,e,r).data;let i=0,o=0,a=e-1,u=r-1;for(;o<r&&W_(s,e,o);)++o;if(o===r)return V_.EMPTY;for(;W_(s,e,u);)--u;for(;X_(s,e,i,o,u);)++i;for(;X_(s,e,a,o,u);)--a;return++a,++u,new V_(i,o,a,u)}function Fk(t){const e=Dk(t),{width:r,height:n}=e;let s=null;if(!e.isEmpty()){const i=t.getContext("2d");if(i===null)throw new TypeError("Failed to get canvas 2D context");s=i.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:s}}function Nk(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}function Ei(t,e=1){var n;const r=(n=le.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}var oe=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(oe||{});const Zg=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Y_=(t,e)=>Zg(t).priority??e,fe={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Zg).forEach(e=>{e.type.forEach(r=>{var n,s;return(s=(n=this._removeHandlers)[r])==null?void 0:s.call(n,e)})}),this},add(...t){return t.map(Zg).forEach(e=>{e.type.forEach(r=>{var i,o;const n=this._addHandlers,s=this._queue;n[r]?(i=n[r])==null||i.call(n,e):(s[r]=s[r]||[],(o=s[r])==null||o.push(e))})}),this},handle(t,e,r){var o;const n=this._addHandlers,s=this._removeHandlers;if(n[t]||s[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,s[t]=r;const i=this._queue;return i[t]&&((o=i[t])==null||o.forEach(a=>e(a)),delete i[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((s,i)=>Y_(i,r)-Y_(s,r)))},n=>{const s=e.indexOf(n.ref);s!==-1&&e.splice(s,1)})}};class qg{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const Bk=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ok(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function Lk(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=Bk.replace(/%forloop%/gi,Ok(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const mm=0,gm=1,vm=2,ym=3,xm=4,_m=5;class Jn{constructor(){this.data=0,this.blendMode=we.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<mm)}set blend(e){!!(this.data&1<<mm)!==e&&(this.data^=1<<mm)}get offsets(){return!!(this.data&1<<gm)}set offsets(e){!!(this.data&1<<gm)!==e&&(this.data^=1<<gm)}get culling(){return!!(this.data&1<<vm)}set culling(e){!!(this.data&1<<vm)!==e&&(this.data^=1<<vm)}get depthTest(){return!!(this.data&1<<ym)}set depthTest(e){!!(this.data&1<<ym)!==e&&(this.data^=1<<ym)}get depthMask(){return!!(this.data&1<<_m)}set depthMask(e){!!(this.data&1<<_m)!==e&&(this.data^=1<<_m)}get clockwiseFrontFace(){return!!(this.data&1<<xm)}set clockwiseFrontFace(e){!!(this.data&1<<xm)!==e&&(this.data^=1<<xm)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==we.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Jn;return e.depthTest=!1,e.blend=!0,e}}Jn.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Jg=[];function WT(t,e){if(!t)return null;let r="";if(typeof t=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(let n=Jg.length-1;n>=0;--n){const s=Jg[n];if(s.test&&s.test(t,r))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class vn{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,n,s,i,o,a,u){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:f}=this;this._aliasCount++;for(let m=0,p=f.length;m<p;m++)f[m][h](e,r,n,s,i,o,a,u);return f===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(vn.prototype,{dispatch:{value:vn.prototype.emit},run:{value:vn.prototype.emit}});class cu{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new vn("setRealSize"),this.onUpdate=new vn("update"),this.onError=new vn("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class Qd extends cu{constructor(e,r){const{width:n,height:s}=r||{};if(!n||!s)throw new Error("BufferResource width or height invalid");super(n,s),this.data=e,this.unpackAlignment=r.unpackAlignment??4}upload(e,r,n){const s=e.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===gr.UNPACK);const i=r.realWidth,o=r.realHeight;return n.width===i&&n.height===o?s.texSubImage2D(r.target,0,0,0,i,o,r.format,n.type,this.data):(n.width=i,n.height=o,s.texImage2D(r.target,0,n.internalFormat,i,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Uk={scaleMode:fi.NEAREST,alphaMode:gr.NPM},e0=class Uo extends wu{constructor(e=null,r=null){super(),r=Object.assign({},Uo.defaultOptions,r);const{alphaMode:n,mipmap:s,anisotropicLevel:i,scaleMode:o,width:a,height:u,wrapMode:h,format:f,type:m,target:p,resolution:d,resourceOptions:g}=r;e&&!(e instanceof cu)&&(e=WT(e,g),e.internal=!0),this.resolution=d||le.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((u||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=i,this._wrapMode=h,this._scaleMode=o,this.format=f,this.type=m,this.target=p,this.alphaMode=n,this.uid=oo(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&u>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,r){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,n=!0),n&&this.dirtyStyleId++,this}setSize(e,r,n){return n=n||this.resolution,this.setRealSize(e*n,r*n,n)}setRealSize(e,r,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=H_(this.realWidth)&&H_(this.realHeight)}setResolution(e){const r=this.resolution;return r===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*r)/e,this.height=Math.round(this.height*r)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Gi[this.cacheId],delete Nn[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Uo.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,r,n=le.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let i=null;if(s)i=e;else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${oo()}`}i=e._pixiId}let o=Gi[i];if(s&&n&&!o)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return o||(o=new Uo(e,r),o.cacheId=i,Uo.addToCache(o,i)),o}static fromBuffer(e,r,n,s){e=e||new Float32Array(r*n*4);const i=new Qd(e,{width:r,height:n,...s==null?void 0:s.resourceOptions});let o,a;return e instanceof Float32Array?(o=ne.RGBA,a=ye.FLOAT):e instanceof Int32Array?(o=ne.RGBA_INTEGER,a=ye.INT):e instanceof Uint32Array?(o=ne.RGBA_INTEGER,a=ye.UNSIGNED_INT):e instanceof Int16Array?(o=ne.RGBA_INTEGER,a=ye.SHORT):e instanceof Uint16Array?(o=ne.RGBA_INTEGER,a=ye.UNSIGNED_SHORT):e instanceof Int8Array?(o=ne.RGBA,a=ye.BYTE):(o=ne.RGBA,a=ye.UNSIGNED_BYTE),i.internal=!0,new Uo(i,Object.assign({},Uk,{type:a,format:o},s))}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Gi[r]&&Gi[r]!==e&&console.warn(`BaseTexture added to the cache with an id [${r}] that already had an entry`),Gi[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Gi[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Gi[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)delete Gi[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}};e0.defaultOptions={mipmap:Kn.POW2,anisotropicLevel:0,scaleMode:fi.LINEAR,wrapMode:vi.CLAMP,alphaMode:gr.UNPACK,target:da.TEXTURE_2D,format:ne.RGBA,type:ye.UNSIGNED_BYTE},e0._globalBatch=0;let Se=e0;class t0{constructor(){this.texArray=null,this.blend=0,this.type=fn.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Gk=0;class gt{constructor(e,r=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=Gk++,this.disposeRunner=new vn("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Yn.ELEMENT_ARRAY_BUFFER:Yn.ARRAY_BUFFER}get index(){return this.type===Yn.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new gt(e)}}class pd{constructor(e,r=0,n=!1,s=ye.FLOAT,i,o,a,u=1){this.buffer=e,this.size=r,this.normalized=n,this.type=s,this.stride=i,this.start=o,this.instance=a,this.divisor=u}destroy(){this.buffer=null}static from(e,r,n,s,i){return new pd(e,r,n,s,i)}}const zk={Float32Array,Uint32Array,Int32Array,Uint8Array};function Hk(t,e){let r=0,n=0;const s={};for(let u=0;u<t.length;u++)n+=e[u],r+=t[u].length;const i=new ArrayBuffer(r*4);let o=null,a=0;for(let u=0;u<t.length;u++){const h=e[u],f=t[u],m=jT(f);s[m]||(s[m]=new zk[m](i)),o=s[m];for(let p=0;p<f.length;p++){const d=(p/h|0)*n+a,g=p%h;o[d+g]=f[p]}a+=h}return new Float32Array(i)}const Q_={5126:4,5123:2,5121:1};let $k=0;const Vk={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ds{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=$k++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new vn("disposeGeometry"),this.refCount=0}addAttribute(e,r,n=0,s=!1,i,o,a,u=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof gt||(r instanceof Array&&(r=new Float32Array(r)),r=new gt(r));const h=e.split("|");if(h.length>1){for(let m=0;m<h.length;m++)this.addAttribute(h[m],r,n,s,i);return this}let f=this.buffers.indexOf(r);return f===-1&&(this.buffers.push(r),f=this.buffers.length-1),this.attributes[e]=new pd(f,n,s,i,o,a,u),this.instanced=this.instanced||u,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof gt||(e instanceof Array&&(e=new Uint16Array(e)),e=new gt(e)),e.type=Yn.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],n=new gt;let s;for(s in this.attributes){const i=this.attributes[s],o=this.buffers[i.buffer];e.push(o.data),r.push(i.size*Q_[i.type]/4),i.buffer=0}for(n.data=Hk(e,r),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new ds;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new gt(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];e.attributes[r]=new pd(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Yn.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new ds,n=[],s=[],i=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let u=0;u<o.buffers.length;u++)s[u]=s[u]||0,s[u]+=o.buffers[u].data.length,i[u]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new Vk[jT(o.buffers[a].data)](s[a]),r.buffers[a]=new gt(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let u=0;u<o.buffers.length;u++)n[u].set(o.buffers[u].data,i[u]),i[u]+=o.buffers[u].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=Yn.ELEMENT_ARRAY_BUFFER;let a=0,u=0,h=0,f=0;for(let m=0;m<o.buffers.length;m++)if(o.buffers[m]!==o.indexBuffer){f=m;break}for(const m in o.attributes){const p=o.attributes[m];(p.buffer|0)===f&&(u+=p.size*Q_[p.type]/4)}for(let m=0;m<e.length;m++){const p=e[m].indexBuffer.data;for(let d=0;d<p.length;d++)r.indexBuffer.data[d+h]+=a;a+=e[m].buffers[f].data.length/u,h+=p.length}}return r}}class XT extends ds{constructor(e=!1){super(),this._buffer=new gt(null,e,!1),this._indexBuffer=new gt(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,ye.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,ye.FLOAT).addAttribute("aColor",this._buffer,4,!0,ye.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,ye.FLOAT).addIndex(this._indexBuffer)}}const md=Math.PI*2,jk=180/Math.PI,Wk=Math.PI/180;var $t=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))($t||{});class Me{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Me(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}}Me.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const $c=[new Me,new Me,new Me,new Me];class Ee{constructor(e=0,r=0,n=0,s=0){this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(s),this.type=$t.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ee(0,0,0,0)}clone(){return new Ee(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const P=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=P)return!1;const k=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>k}const n=this.left,s=this.right,i=this.top,o=this.bottom;if(s<=n||o<=i)return!1;const a=$c[0].set(e.left,e.top),u=$c[1].set(e.left,e.bottom),h=$c[2].set(e.right,e.top),f=$c[3].set(e.right,e.bottom);if(h.x<=a.x||u.y<=a.y)return!1;const m=Math.sign(r.a*r.d-r.b*r.c);if(m===0||(r.apply(a,a),r.apply(u,u),r.apply(h,h),r.apply(f,f),Math.max(a.x,u.x,h.x,f.x)<=n||Math.min(a.x,u.x,h.x,f.x)>=s||Math.max(a.y,u.y,h.y,f.y)<=i||Math.min(a.y,u.y,h.y,f.y)>=o))return!1;const p=m*(u.y-a.y),d=m*(a.x-u.x),g=p*n+d*i,y=p*s+d*i,_=p*n+d*o,w=p*s+d*o;if(Math.max(g,y,_,w)<=p*a.x+d*a.y||Math.min(g,y,_,w)>=p*f.x+d*f.y)return!1;const T=m*(a.y-h.y),E=m*(h.x-a.x),A=T*n+E*i,b=T*s+E*i,I=T*n+E*o,R=T*s+E*o;return!(Math.max(A,b,I,R)<=T*a.x+E*a.y||Math.min(A,b,I,R)>=T*f.x+E*f.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=s,this.height=Math.max(i-s,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=s-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=s,this.height=i-s,this}}Ee.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Kd{constructor(e=0,r=0,n=0){this.x=e,this.y=r,this.radius=n,this.type=$t.CIRC}clone(){return new Kd(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let s=this.x-e,i=this.y-r;return s*=s,i*=i,s+i<=n}getBounds(){return new Ee(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Kd.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Zd{constructor(e=0,r=0,n=0,s=0){this.x=e,this.y=r,this.width=n,this.height=s,this.type=$t.ELIP}clone(){return new Zd(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,s=(r-this.y)/this.height;return n*=n,s*=s,n+s<=1}getBounds(){return new Ee(this.x-this.width,this.y-this.height,this.width,this.height)}}Zd.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class qs{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let s=0,i=r.length;s<i;s++)n.push(r[s].x,r[s].y);r=n}this.points=r,this.type=$t.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new qs(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let n=!1;const s=this.points.length/2;for(let i=0,o=s-1;i<s;o=i++){const a=this.points[i*2],u=this.points[i*2+1],h=this.points[o*2],f=this.points[o*2+1];u>r!=f>r&&e<(h-a)*((r-u)/(f-u))+a&&(n=!n)}return n}}qs.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class qd{constructor(e=0,r=0,n=0,s=0,i=20){this.x=e,this.y=r,this.width=n,this.height=s,this.radius=i,this.type=$t.RREC}clone(){return new qd(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let s=e-(this.x+n),i=r-(this.y+n);const o=n*n;if(s*s+i*i<=o||(s=e-(this.x+this.width-n),s*s+i*i<=o)||(i=r-(this.y+this.height-n),s*s+i*i<=o)||(s=e-(this.x+n),s*s+i*i<=o))return!0}return!1}}qd.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Qe{constructor(e=1,r=0,n=0,s=1,i=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=s,this.tx=i,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,s,i,o){return this.a=e,this.b=r,this.c=n,this.d=s,this.tx=i,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new Me;const n=e.x,s=e.y;return r.x=this.a*n+this.c*s+this.tx,r.y=this.b*n+this.d*s+this.ty,r}applyInverse(e,r){r=r||new Me;const n=1/(this.a*this.d+this.c*-this.b),s=e.x,i=e.y;return r.x=this.d*n*s+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*i+-this.b*n*s+(-this.ty*this.a+this.tx*this.b)*n,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),s=this.a,i=this.c,o=this.tx;return this.a=s*r-this.b*n,this.b=s*n+this.b*r,this.c=i*r-this.d*n,this.d=i*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,s=this.c,i=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*n+e.b*i,this.c=e.c*r+e.d*s,this.d=e.c*n+e.d*i,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}setTransform(e,r,n,s,i,o,a,u,h){return this.a=Math.cos(a+h)*i,this.b=Math.sin(a+h)*i,this.c=-Math.sin(a-u)*o,this.d=Math.cos(a-u)*o,this.tx=e-(n*this.a+s*this.c),this.ty=r-(n*this.b+s*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,s=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,s=this.c,i=this.d,o=e.pivot,a=-Math.atan2(-s,i),u=Math.atan2(n,r),h=Math.abs(a+u);return h<1e-5||Math.abs(md-h)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=u),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(s*s+i*i),e.position.x=this.tx+(o.x*r+o.y*s),e.position.y=this.ty+(o.x*n+o.y*i),e}invert(){const e=this.a,r=this.b,n=this.c,s=this.d,i=this.tx,o=e*s-r*n;return this.a=s/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-s*i)/o,this.ty=-(e*this.ty-r*i)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Qe;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Qe}static get TEMP_MATRIX(){return new Qe}}Qe.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Bs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Os=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ls=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Us=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],r0=[],YT=[],Vc=Math.sign;function Xk(){for(let t=0;t<16;t++){const e=[];r0.push(e);for(let r=0;r<16;r++){const n=Vc(Bs[t]*Bs[r]+Ls[t]*Os[r]),s=Vc(Os[t]*Bs[r]+Us[t]*Os[r]),i=Vc(Bs[t]*Ls[r]+Ls[t]*Us[r]),o=Vc(Os[t]*Ls[r]+Us[t]*Us[r]);for(let a=0;a<16;a++)if(Bs[a]===n&&Os[a]===s&&Ls[a]===i&&Us[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new Qe;e.set(Bs[t],Os[t],Ls[t],Us[t],0,0),YT.push(e)}}Xk();const nt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Bs[t],uY:t=>Os[t],vX:t=>Ls[t],vY:t=>Us[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>r0[t][e],sub:(t,e)=>r0[t][nt.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?nt.S:nt.N:Math.abs(e)*2<=Math.abs(t)?t>0?nt.E:nt.W:e>0?t>0?nt.SE:nt.SW:t>0?nt.NE:nt.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const s=YT[nt.inv(e)];s.tx=r,s.ty=n,t.append(s)}};class Vn{constructor(e,r,n=0,s=0){this._x=n,this._y=s,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new Vn(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Vn.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const n0=class{constructor(){this.worldTransform=new Qe,this.localTransform=new Qe,this.position=new Vn(this.onChange,this,0,0),this.scale=new Vn(this.onChange,this,1,1),this.pivot=new Vn(this.onChange,this,0,0),this.skew=new Vn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};n0.IDENTITY=new n0;let Jd=n0;Jd.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Yk=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Qk=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function K_(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function wm(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function QT(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return wm(2*e);case"bvec3":return wm(3*e);case"bvec4":return wm(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ga=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],Kk={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Zk={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function qk(t,e){var n;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in t.uniforms){const i=e[s];if(!i){((n=t.uniforms[s])==null?void 0:n.group)===!0&&(t.uniforms[s].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const o=t.uniforms[s];let a=!1;for(let u=0;u<ga.length;u++)if(ga[u].test(i,o)){r.push(ga[u].code(s,o)),a=!0;break}if(!a){const u=(i.size===1&&!i.isArray?Kk:Zk)[i.type].replace("location",`ud["${s}"].location`);r.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const KT={};let Fo=KT;function Jk(){if(Fo===KT||Fo!=null&&Fo.isContextLost()){const t=le.ADAPTER.createCanvas();let e;le.PREFER_ENV>=uo.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Fo=e}return Fo}let jc;function eD(){if(!jc){jc=Xr.MEDIUM;const t=Jk();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(jc=e.precision?Xr.HIGH:Xr.MEDIUM)}}return jc}function Z_(t,e){const r=t.getShaderSource(e).split(`
`).map((h,f)=>`${f}: ${h}`),n=t.getShaderInfoLog(e),s=n.split(`
`),i={},o=s.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!i[h]?(i[h]=!0,!0):!1),a=[""];o.forEach(h=>{r[h-1]=`%c${r[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const u=r.join(`
`);a[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function tD(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||Z_(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||Z_(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const rD={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ZT(t){return rD[t]}let Wc=null;const q_={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function qT(t,e){if(!Wc){const r=Object.keys(q_);Wc={};for(let n=0;n<r.length;++n){const s=r[n];Wc[t[s]]=q_[s]}}return Wc[e]}function J_(t,e,r){if(t.substring(0,9)!=="precision"){let n=e;return e===Xr.HIGH&&r!==Xr.HIGH&&(n=Xr.MEDIUM),`precision ${n} float;
${t}`}else if(r!==Xr.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let fl;function nD(){if(typeof fl=="boolean")return fl;try{fl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{fl=!1}return fl}let iD=0;const Xc={},i0=class Go{constructor(e,r,n="pixi-shader",s={}){this.extra={},this.id=iD++,this.vertexSrc=e||Go.defaultVertexSrc,this.fragmentSrc=r||Go.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Xc[n]?(Xc[n]++,n+=`-${Xc[n]}`):Xc[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=J_(this.vertexSrc,Go.defaultVertexPrecision,Xr.HIGH),this.fragmentSrc=J_(this.fragmentSrc,Go.defaultFragmentPrecision,eD())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Qk}static get defaultFragmentSrc(){return Yk}static from(e,r,n){const s=e+r;let i=j_[s];return i||(j_[s]=i=new Go(e,r,n)),i}};i0.defaultVertexPrecision=Xr.HIGH,i0.defaultFragmentPrecision=pi.apple.device?Xr.HIGH:Xr.MEDIUM;let mi=i0,sD=0;class yn{constructor(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=sD++,this.static=!!r,this.ubo=!!n,e instanceof gt?(this.buffer=e,this.buffer.type=Yn.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new gt(new Float32Array(1)),this.buffer.type=Yn.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,n){if(!this.ubo)this.uniforms[e]=new yn(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,n){return new yn(e,r,n)}static uboFrom(e,r){return new yn(e,r??!0,!0)}}class Qn{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof yn?this.uniformGroup=r:this.uniformGroup=new yn(r):this.uniformGroup=new yn({}),this.disposeRunner=new vn("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const n in r.uniforms){const s=r.uniforms[n];if(s.group===!0&&this.checkUniformExists(e,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,n){const s=mi.from(e,r);return new Qn(s,n)}}class oD{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=i;this.defaultGroupCache[e]=yn.from({uSamplers:n},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${e}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new mi(this.vertexSrc,s)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new Qe,default:this.defaultGroupCache[e]};return new Qn(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class s0{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function aD(){return!pi.apple.device}function lD(t){let e=!0;const r=le.ADAPTER.getNavigator();if(pi.tablet||pi.phone){if(pi.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(pi.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}class ef{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var uD=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,cD=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const wl=class an extends ef{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=XT,this.vertexSize=6,this.state=Jn.for2d(),this.size=an.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??lD(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??aD(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Ie("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return cD}static get defaultFragmentTemplate(){return uD}setShaderGenerator({vertex:e=an.defaultVertexSrc,fragment:r=an.defaultFragmentTemplate}={}){this.shaderGenerator=new oD(e,r)}contextChange(){const e=this.renderer.gl;le.PREFER_ENV===uo.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),an.defaultMaxTextures),this.maxTextures=Lk(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:r}=an,n=this.size/4,s=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new t0);for(;r.length<s;)r.push(new s0);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:r}=this,n=an._textureArrayPool,s=this.renderer.batch,i=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Se._globalBatch,u=0,h=n[0],f=0;s.copyBoundTextures(i,r);for(let m=0;m<this._bufferSize;++m){const p=e[m];e[m]=null,p._batchEnabled!==a&&(h.count>=r&&(s.boundArray(h,i,a,r),this.buildDrawCalls(h,f,m),f=m,h=n[++u],++a),p._batchEnabled=a,p.touched=o,h.elements[h.count++]=p)}h.count>0&&(s.boundArray(h,i,a,r),this.buildDrawCalls(h,f,this._bufferSize),++u,++a);for(let m=0;m<i.length;m++)i[m]=null;Se._globalBatch=a}buildDrawCalls(e,r,n){const{_bufferedElements:s,_attributeBuffer:i,_indexBuffer:o,vertexSize:a}=this,u=an._drawCallPool;let h=this._dcIndex,f=this._aIndex,m=this._iIndex,p=u[h];p.start=this._iIndex,p.texArray=e;for(let d=r;d<n;++d){const g=s[d],y=g._texture.baseTexture,_=$T[y.alphaMode?1:0][g.blendMode];s[d]=null,r<d&&p.blend!==_&&(p.size=m-p.start,r=d,p=u[++h],p.texArray=e,p.start=m),this.packInterleavedGeometry(g,i,o,f,m),f+=g.vertexData.length/2*a,m+=g.indices.length,p.blend=_}r<n&&(p.size=m-p.start,++h),this._dcIndex=h,this._aIndex=f,this._iIndex=m}bindAndClearTexArray(e){const r=this.renderer.texture;for(let n=0;n<e.count;n++)r.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:r,_indexBuffer:n}=this;an.canUploadSameBuffer?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:r,state:n}=this.renderer,s=an._drawCallPool;let i=null;for(let o=0;o<e;o++){const{texArray:a,type:u,size:h,start:f,blend:m}=s[o];i!==a&&(i=a,this.bindAndClearTexArray(a)),this.state.blendMode=m,n.set(this.state),r.drawElements(u,h,r.UNSIGNED_SHORT,f*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),an.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const r=fd(Math.ceil(e/8)),n=$_(r),s=r*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._aBuffers[s];return i||(this._aBuffers[s]=i=new qg(s*this.vertexSize*4)),i}getIndexBuffer(e){const r=fd(Math.ceil(e/12)),n=$_(r),s=r*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(s)),i}packInterleavedGeometry(e,r,n,s,i){const{uint32View:o,float32View:a}=r,u=s/this.vertexSize,h=e.uvs,f=e.indices,m=e.vertexData,p=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),g=$e.shared.setValue(e._tintRGB).toPremultiplied(d,e._texture.baseTexture.alphaMode>0);for(let y=0;y<m.length;y+=2)a[s++]=m[y],a[s++]=m[y+1],a[s++]=h[y],a[s++]=h[y+1],o[s++]=g,a[s++]=p;for(let y=0;y<f.length;y++)n[i++]=u+f[y]}};wl.defaultBatchSize=4096,wl.extension={name:"batch",type:oe.RendererPlugin},wl._drawCallPool=[],wl._textureArrayPool=[];let Gs=wl;fe.add(Gs);var hD=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,dD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const o0=class Sl extends Qn{constructor(e,r,n){const s=mi.from(e||Sl.defaultVertexSrc,r||Sl.defaultFragmentSrc);super(s,n),this.padding=0,this.resolution=Sl.defaultResolution,this.multisample=Sl.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Jn}apply(e,r,n,s,i){e.applyFilter(this,r,n,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return dD}static get defaultFragmentSrc(){return hD}};o0.defaultResolution=1,o0.defaultMultisample=xt.NONE;let Vt=o0;class gd{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new $e(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:s}=e,i=n??r;i!==void 0&&(this.color=i),this.alpha=s}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}gd.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},gd.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"background"};fe.add(gd);class JT{constructor(e){this.renderer=e,this.emptyRenderer=new ef(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:n}=this.renderer.texture;for(let s=r-1;s>=0;--s)e[s]=n[s]||null,e[s]&&(e[s]._batchLocation=s)}boundArray(e,r,n,s){const{elements:i,ids:o,count:a}=e;let u=0;for(let h=0;h<a;h++){const f=i[h],m=f._batchLocation;if(m>=0&&m<s&&r[m]===f){o[h]=m;continue}for(;u<s;){const p=r[u];if(p&&p._batchEnabled===n&&p._batchLocation===u){u++;continue}o[h]=u,f._batchLocation=u,r[u]=f;break}}}destroy(){this.renderer=null}}JT.extension={type:oe.RendererSystem,name:"batch"};fe.add(JT);let ew=0;class vd{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=ew++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=ew++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let n;if(le.PREFER_ENV>=uo.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}vd.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},vd.extension={type:oe.RendererSystem,name:"context"};fe.add(vd);class a0{constructor(e,r){if(this.width=Math.round(e),this.height=Math.round(r),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new vn("disposeFramebuffer"),this.multisample=xt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new Se(null,{scaleMode:fi.NEAREST,resolution:1,mipmap:Kn.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Se(null,{scaleMode:fi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Kn.OFF,format:ne.DEPTH_COMPONENT,type:ye.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!e||!r)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const s=this.colorTextures[n],i=s.resolution;s.setSize(e/i,r/i)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class eb extends Se{constructor(e={}){if(typeof e=="number"){const r=arguments[0],n=arguments[1],s=arguments[2],i=arguments[3];e={width:r,height:n,scaleMode:s,resolution:i}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=xt.NONE),super(null,e),this.mipmap=Kn.OFF,this.valid=!0,this._clear=new $e([0,0,0,0]),this.framebuffer=new a0(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Ti extends cu{constructor(e){const r=e,n=r.naturalWidth||r.videoWidth||r.displayWidth||r.width,s=r.naturalHeight||r.videoHeight||r.displayHeight||r.height;super(n,s),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,n){n===void 0&&!r.startsWith("data:")?e.crossOrigin=Nk(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,r,n,s){const i=e.gl,o=r.realWidth,a=r.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===gr.UNPACK),!this.noSubImage&&r.target===i.TEXTURE_2D&&n.width===o&&n.height===a?i.texSubImage2D(i.TEXTURE_2D,0,0,0,r.format,n.type,s):(n.width=o,n.height=a,i.texImage2D(r.target,0,n.internalFormat,r.format,n.type,s)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class tb extends Ti{constructor(e,r){if(r=r||{},typeof e=="string"){const n=new Image;Ti.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??le.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,n)=>{const s=this.source;this.url=s.src;const i=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?r(this.process()):r(this))};s.complete&&s.src?i():(s.onload=i,s.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(s=>s.blob()).then(s=>r(s,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===gr.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,n,this.bitmap),!this.preserveBitmap){let s=!0;const i=r._glTextures;for(const o in i){const a=i[o];if(a!==n&&a.dirtyId!==r.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Gv{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const s=r.width,i=r.height;if(n){const o=e.width/2/s,a=e.height/2/i,u=e.x/s+o,h=e.y/i+a;n=nt.add(n,nt.NW),this.x0=u+o*nt.uX(n),this.y0=h+a*nt.uY(n),n=nt.add(n,2),this.x1=u+o*nt.uX(n),this.y1=h+a*nt.uY(n),n=nt.add(n,2),this.x2=u+o*nt.uX(n),this.y2=h+a*nt.uY(n),n=nt.add(n,2),this.x3=u+o*nt.uX(n),this.y3=h+a*nt.uY(n)}else this.x0=e.x/s,this.y0=e.y/i,this.x1=(e.x+e.width)/s,this.y1=e.y/i,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/i,this.x3=e.x/s,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Gv.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const tw=new Gv;function Yc(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class se extends wu{constructor(e,r,n,s,i,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new Ee(0,0,1,1)),e instanceof se&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=tw,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(i||0),i===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Me(o.x,o.y):new Me(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&Nn[r.url]&&se.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,se.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new se(this.baseTexture,!this.noFrame&&e,r,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===tw&&(this._uvs=new Gv),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},n=le.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let i=null;if(s)i=e;else if(e instanceof Se){if(!e.cacheId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${oo()}`,Se.addToCache(e,e.cacheId)}i=e.cacheId}else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${oo()}`}i=e._pixiId}let o=Nn[i];if(s&&n&&!o)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return!o&&!(e instanceof Se)?(r.resolution||(r.resolution=Ei(e)),o=new se(new Se(e,r)),o.baseTexture.cacheId=i,Se.addToCache(o.baseTexture,i),se.addToCache(o,i)):!o&&e instanceof Se&&(o=new se(e),se.addToCache(o,i)),o}static fromURL(e,r){const n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),s=se.from(e,Object.assign({resourceOptions:n},r),!1),i=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):i.load().then(()=>Promise.resolve(s))}static fromBuffer(e,r,n,s){return new se(Se.fromBuffer(e,r,n,s))}static fromLoader(e,r,n,s){const i=new Se(e,Object.assign({scaleMode:Se.defaultOptions.scaleMode,resolution:Ei(r)},s)),{resource:o}=i;o instanceof tb&&(o.url=r);const a=new se(i);return n||(n=r),Se.addToCache(a.baseTexture,n),se.addToCache(a,n),n!==r&&(Se.addToCache(a.baseTexture,r),se.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(u=>{a.baseTexture.once("loaded",()=>u(a))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Nn[r]&&Nn[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),Nn[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Nn[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Nn[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)Nn[e.textureCacheIds[r]]===e&&delete Nn[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:n,width:s,height:i}=e,o=r+s>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){const u=o&&a?"and":"or",h=`X: ${r} + ${s} = ${r+s} > ${this.baseTexture.width}`,f=`Y: ${n} + ${i} = ${n+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${u} ${f}`)}this.valid=s&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return se._EMPTY||(se._EMPTY=new se(new Se),Yc(se._EMPTY),Yc(se._EMPTY.baseTexture)),se._EMPTY}static get WHITE(){if(!se._WHITE){const e=le.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),se._WHITE=new se(Se.from(e)),Yc(se._WHITE),Yc(se._WHITE.baseTexture)}return se._WHITE}}class co extends se{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,n=!0){const s=this.baseTexture.resolution,i=Math.round(e*s)/s,o=Math.round(r*s)/s;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new co(new eb(e))}}class rb{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,n=xt.NONE){const s=new eb(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new co(s)}getOptimalTexture(e,r,n=1,s=xt.NONE){let i;e=Math.max(Math.ceil(e*n-1e-6),1),r=Math.max(Math.ceil(r*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=fd(e),r=fd(r),i=((e&65535)<<16|r&65535)>>>0,s>1&&(i+=s*4294967296)):i=s>1?-s:-1,this.texturePool[i]||(this.texturePool[i]=[]);let o=this.texturePool[i].pop();return o||(o=this.createTexture(e,r,s)),o.filterPoolKey=i,o.setResolution(n),o}getFilterTexture(e,r,n){const s=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||xt.NONE);return s.filterFrame=e.filterFrame,s}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let s=0;s<n.length;s++)n[s].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}rb.SCREEN_KEY=-1;class fD extends ds{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class nb extends ds{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new gt(this.vertices),this.uvBuffer=new gt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let n=0,s=0;return this.uvs[0]=n,this.uvs[1]=s,this.uvs[2]=n+r.width/e.width,this.uvs[3]=s,this.uvs[4]=n+r.width/e.width,this.uvs[5]=s+r.height/e.height,this.uvs[6]=n,this.uvs[7]=s+r.height/e.height,n=r.x,s=r.y,this.vertices[0]=n,this.vertices[1]=s,this.vertices[2]=n+r.width,this.vertices[3]=s,this.vertices[4]=n+r.width,this.vertices[5]=s+r.height,this.vertices[6]=n,this.vertices[7]=s+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class pD{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=xt.NONE,this.sourceFrame=new Ee,this.destinationFrame=new Ee,this.bindingSourceFrame=new Ee,this.bindingDestinationFrame=new Ee,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Qc=[new Me,new Me,new Me,new Me],Sm=new Qe;class ib{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new rb,this.statePool=[],this.quad=new fD,this.quadUv=new nb,this.tempRect=new Ee,this.activeState={},this.globalUniforms=new yn({outputFrame:new Ee,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const n=this.renderer,s=this.defaultFilterStack,i=this.statePool.pop()||new pD,o=n.renderTexture;let a,u;if(o.current){const _=o.current;a=_.resolution,u=_.multisample}else a=n.resolution,u=n.multisample;let h=r[0].resolution||a,f=r[0].multisample??u,m=r[0].padding,p=r[0].autoFit,d=r[0].legacy??!0;for(let _=1;_<r.length;_++){const w=r[_];h=Math.min(h,w.resolution||a),f=Math.min(f,w.multisample??u),m=this.useMaxPadding?Math.max(m,w.padding):m+w.padding,p=p&&w.autoFit,d=d||(w.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),s.push(i),i.resolution=h,i.multisample=f,i.legacy=d,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(m);const g=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Sm.copyFrom(n.projection.transform).invert(),g),p?(i.sourceFrame.fit(g),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(g)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,h,f),i.filters=r,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const y=this.tempRect;y.x=0,y.y=0,y.width=i.sourceFrame.width,y.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(o.sourceFrame),i.bindingDestinationFrame.copyFrom(o.destinationFrame),i.transform=n.projection.transform,n.projection.transform=null,o.bind(i.renderTexture,i.sourceFrame,y),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;const s=this.globalUniforms.uniforms;s.outputFrame=r.sourceFrame,s.resolution=r.resolution;const i=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(i[0]=r.destinationFrame.width,i[1]=r.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*r.resolution),o[1]=Math.round(i[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*i[2]-.5*o[2],a[3]=r.sourceFrame.height*i[3]-.5*o[3],r.legacy){const h=s.filterArea;h[0]=r.destinationFrame.width,h[1]=r.destinationFrame.height,h[2]=r.sourceFrame.x,h[3]=r.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const u=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,u.renderTexture,zn.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let h=r.renderTexture,f=this.getOptimalFilterTexture(h.width,h.height,r.resolution);f.filterFrame=h.filterFrame;let m=0;for(m=0;m<n.length-1;++m){m===1&&r.multisample>1&&(f=this.getOptimalFilterTexture(h.width,h.height,r.resolution),f.filterFrame=h.filterFrame),n[m].apply(this,h,f,zn.CLEAR,r);const p=h;h=f,f=p}n[m].apply(this,h,u.renderTexture,zn.BLEND,r),m>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(f)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=zn.CLEAR){const{renderTexture:n,state:s}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=s.stateId&1||this.forceClear;(r===zn.CLEAR||r===zn.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,n,s){const i=this.renderer;i.state.set(e.state),this.bindAndClear(n,s),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(fn.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(fn.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:n,destinationFrame:s}=this.activeState,{orig:i}=r._texture,o=e.set(s.width,0,0,s.height,n.x,n.y),a=r.worldTransform.copyTo(Qe.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/i.width,1/i.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,n=1,s=xt.NONE){return this.texturePool.getOptimalTexture(e,r,n,s)}getFilterTexture(e,r,n){if(typeof e=="number"){const i=e;e=r,r=i}e=e||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||xt.NONE);return s.filterFrame=e.filterFrame,s}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const n=Qc[0],s=Qc[1],i=Qc[2],o=Qc[3];n.set(r.left,r.top),s.set(r.left,r.bottom),i.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(s,s),e.apply(i,i),e.apply(o,o);const a=Math.min(n.x,s.x,i.x,o.x),u=Math.min(n.y,s.y,i.y,o.y),h=Math.max(n.x,s.x,i.x,o.x),f=Math.max(n.y,s.y,i.y,o.y);r.x=a,r.y=u,r.width=h-a,r.height=f-u}roundFrame(e,r,n,s,i){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(i){const{a:o,b:a,c:u,d:h}=i;if((Math.abs(a)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}i=i?Sm.copyFrom(i):Sm.identity(),i.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.transformAABB(i,e),e.ceil(r),this.transformAABB(i.invert(),e)}}}ib.extension={type:oe.RendererSystem,name:"filter"};fe.add(ib);class mD{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=xt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const gD=new Ee;class sb{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new a0(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ee,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;le.PREFER_ENV===uo.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=s=>r.drawBuffersWEBGL(s):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,n=0){const{gl:s}=this;if(e){const i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,s.bindFramebuffer(s.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=n),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>n,a=r.height>>n,u=o/r.width;this.setViewport(r.x*u,r.y*u,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,n,s){const i=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),s=Math.round(s),(i.width!==n||i.height!==s||i.x!==e||i.y!==r)&&(i.x=e,i.y=r,i.width=n,i.height=s,this.gl.viewport(e,r,n,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,n,s,i=Fg.COLOR|Fg.DEPTH){const{gl:o}=this;o.clearColor(e,r,n,s),o.clear(i)}initFramebuffer(e){const{gl:r}=this,n=new mD(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){r.bindRenderbuffer(r.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=r.DEPTH_STENCIL:e.depth&&e.stencil?o=r.DEPTH24_STENCIL8:e.depth?o=r.DEPTH_COMPONENT24:o=r.STENCIL_INDEX8,n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,o,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,o,e.width,e.height)}const s=e.colorTextures;let i=s.length;r.drawBuffers||(i=Math.min(i,1));for(let o=0;o<i;o++){const a=s[o],u=a.parentTextureArray||a;this.renderer.texture.bind(u,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:n}=this,s=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;let o=i.length;n.drawBuffers||(o=Math.min(o,1)),s.multisample>1&&this.canMultisampleFramebuffer(e)?s.msaaBuffer=s.msaaBuffer||n.createRenderbuffer():s.msaaBuffer&&(n.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const a=[];for(let u=0;u<o;u++){const h=i[u],f=h.parentTextureArray||h;this.renderer.texture.bind(f,0),u===0&&s.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,s.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,s.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+u,h.target,f._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+u))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const u=e.depthTexture;this.renderer.texture.bind(u,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,r)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||n.createRenderbuffer();let u,h;this.renderer.context.webGLVersion===1?(u=n.DEPTH_STENCIL_ATTACHMENT,h=n.DEPTH_STENCIL):e.depth&&e.stencil?(u=n.DEPTH_STENCIL_ATTACHMENT,h=n.DEPTH24_STENCIL8):e.depth?(u=n.DEPTH_ATTACHMENT,h=n.DEPTH_COMPONENT24):(u=n.STENCIL_ATTACHMENT,h=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,s.stencil),s.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,s.multisample,h,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,h,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,u,n.RENDERBUFFER,s.stencil)}else s.stencil&&(n.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let n=xt.NONE;if(e<=1||r===null)return n;for(let s=0;s<r.length;s++)if(r[s]<=e){n=r[s];break}return n===1&&(n=xt.NONE),n}blit(e,r,n){const{current:s,renderer:i,gl:o,CONTEXT_UID:a}=this;if(i.context.webGLVersion!==2||!s)return;const u=s.glFramebuffers[a];if(!u)return;if(!e){if(!u.msaaBuffer)return;const f=s.colorTextures[0];if(!f)return;u.blitFramebuffer||(u.blitFramebuffer=new a0(s.width,s.height),u.blitFramebuffer.addColorTexture(0,f)),e=u.blitFramebuffer,e.colorTextures[0]!==f&&(e.colorTextures[0]=f,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}r||(r=gD,r.width=s.width,r.height=s.height),n||(n=r);const h=r.width===n.width&&r.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const n=e.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),r||(s.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&s.deleteRenderbuffer(n.msaaBuffer),n.stencil&&s.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,s=e.height,i=this.gl,o=r.stencil=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o);let a,u;this.renderer.context.webGLVersion===1?(a=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):e.depth?(a=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):(a=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,u,n,s):i.renderbufferStorage(i.RENDERBUFFER,u,n,s),i.framebufferRenderbuffer(i.FRAMEBUFFER,a,i.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ee}destroy(){this.renderer=null}}sb.extension={type:oe.RendererSystem,name:"framebuffer"};fe.add(sb);const Em={5126:4,5123:2,5121:1};class ob{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;le.PREFER_ENV===uo.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=s=>n.bindVertexArrayOES(s),e.deleteVertexArray=s=>n.deleteVertexArrayOES(s)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(s,i)=>n.vertexAttribDivisorANGLE(s,i),e.drawElementsInstanced=(s,i,o,a,u)=>n.drawElementsInstancedANGLE(s,i,o,a,u),e.drawArraysInstanced=(s,i,o,a)=>n.drawArraysInstancedANGLE(s,i,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let s=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;s||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=s={},i=!0);const o=s[r.program.id]||this.initGeometryVao(e,r,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const s=e.buffers[n];r.update(s)}}checkCompatibility(e,r){const n=e.attributes,s=r.attributeData;for(const i in s)if(!n[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(e,r){const n=e.attributes,s=r.attributeData,i=["g",e.id];for(const o in n)s[o]&&i.push(o,s[o].location);return i.join("-")}initGeometryVao(e,r,n=!0){const s=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[i]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,a);const u=this.getSignature(e,a),h=e.glVertexArrayObjects[this.CONTEXT_UID];let f=h[u];if(f)return h[a.id]=f,f;const m=e.buffers,p=e.attributes,d={},g={};for(const y in m)d[y]=0,g[y]=0;for(const y in p)!p[y].size&&a.attributeData[y]?p[y].size=a.attributeData[y].size:p[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),d[p[y].buffer]+=p[y].size*Em[p[y].type];for(const y in p){const _=p[y],w=_.size;_.stride===void 0&&(d[_.buffer]===w*Em[_.type]?_.stride=0:_.stride=d[_.buffer]),_.start===void 0&&(_.start=g[_.buffer],g[_.buffer]+=w*Em[_.type])}f=s.createVertexArray(),s.bindVertexArray(f);for(let y=0;y<m.length;y++){const _=m[y];o.bind(_),n&&_._glBuffers[i].refCount++}return this.activateVao(e,a),h[a.id]=f,h[u]=f,s.bindVertexArray(null),o.unbind(Yn.ARRAY_BUFFER),f}disposeGeometry(e,r){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,i=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let u=0;u<i.length;u++){const h=i[u]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!r&&o.dispose(i[u],r))}if(!r){for(const u in n)if(u[0]==="g"){const h=n[u];this._activeVao===h&&this.unbind(),s.deleteVertexArray(h)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)}activateVao(e,r){const n=this.gl,s=this.CONTEXT_UID,i=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let u=null;for(const h in a){const f=a[h],m=o[f.buffer],p=m._glBuffers[s];if(r.attributeData[h]){u!==p&&(i.bind(m),u=p);const d=r.attributeData[h].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,f.size,f.type||n.FLOAT,f.normalized,f.stride,f.start),f.instance)if(this.hasInstance)n.vertexAttribDivisor(d,f.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,s){const{gl:i}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,u=a===2?i.UNSIGNED_SHORT:i.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(e,r||o.indexBuffer.data.length,u,(n||0)*a,s||1):i.drawElements(e,r||o.indexBuffer.data.length,u,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(e,n,r||o.getSize(),s||1):i.drawArrays(e,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}ob.extension={type:oe.RendererSystem,name:"geometry"};fe.add(ob);const rw=new Qe;class zv{constructor(e,r){this._texture=e,this.mapCoord=new Qe,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let s=0;s<e.length;s+=2){const i=e[s],o=e[s+1];r[s]=i*n.a+o*n.c+n.tx,r[s+1]=i*n.b+o*n.d+n.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const s=r.orig,i=r.trim;i&&(rw.set(s.width/i.width,0,0,s.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(rw));const o=r.baseTexture,a=this.uClampFrame,u=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(r._frame.x+u+h)/o.width,a[1]=(r._frame.y+u+h)/o.height,a[2]=(r._frame.x+r._frame.width-u+h)/o.width,a[3]=(r._frame.y+r._frame.height-u+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var vD=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,yD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class xD extends Vt{constructor(e,r,n){let s=null;typeof e!="string"&&r===void 0&&n===void 0&&(s=e,e=void 0,r=void 0,n=void 0),super(e||yD,r||vD,n),this.maskSprite=s,this.maskMatrix=new Qe}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,n,s){const i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new zv(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,n,s))}}class _D{constructor(e=null){this.type=Tt.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Vt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Tt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class ab{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let n=r;if(!n.isMaskData){const i=this.maskDataPool.pop()||new _D;i.pooled=!0,i.maskObject=r,n=i}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(s),n._colorMask=s?s._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==Tt.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Tt.SCISSOR:this.renderer.scissor.push(n);break;case Tt.STENCIL:this.renderer.stencil.push(n);break;case Tt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Tt.COLOR:this.pushColorMask(n);break}n.type===Tt.SPRITE&&this.maskStack.push(n)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Tt.SCISSOR:this.renderer.scissor.pop(r);break;case Tt.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Tt.SPRITE:this.popSpriteMask(r);break;case Tt.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Tt.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=Tt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Tt.SCISSOR:e.type=Tt.STENCIL:e.type=Tt.COLOR}pushSpriteMask(e){const{maskObject:r}=e,n=e._target;let s=e._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new xD])),s[0].resolution=e.resolution,s[0].multisample=e.multisample,s[0].maskSprite=r;const i=n.filterArea;n.filterArea=r.getBounds(!0),this.renderer.filter.push(n,s),n.filterArea=i,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}ab.extension={type:oe.RendererSystem,name:"mask"};fe.add(ab);class lb{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=e;const s=this.getStackLength();s!==n&&(s===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const nw=new Qe,iw=[],ub=class Rh extends lb{constructor(e){super(e),this.glConst=le.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const r=e._scissorRect,{maskObject:n}=e,{renderer:s}=this,i=s.renderTexture,o=n.getBounds(!0,iw.pop()??new Ee);this.roundFrameToPixels(o,i.current?i.current.resolution:s.resolution,i.sourceFrame,i.destinationFrame,s.projection.transform),r&&o.fit(r),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:r,b:n,c:s,d:i}=e;return(Math.abs(n)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(r)>1e-4||Math.abs(i)>1e-4)}testScissor(e){const{maskObject:r}=e;if(!r.isFastRect||!r.isFastRect()||Rh.isMatrixRotated(r.worldTransform)||Rh.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,r,n,s,i){Rh.isMatrixRotated(i)||(i=i?nw.copyFrom(i):nw.identity(),i.translate(-n.x,-n.y).scale(s.width/n.width,s.height/n.height).translate(s.x,s.y),this.renderer.filter.transformAABB(i,e),e.fit(s),e.x=Math.round(e.x*r),e.y=Math.round(e.y*r),e.width=Math.round(e.width*r),e.height=Math.round(e.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:r}=this.renderer;e._scissorRect||r.enable(r.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:r}=this.renderer;e&&iw.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():r.disable(r.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let r;this.renderer.renderTexture.current?r=e.y:r=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,r,e.width,e.height)}};ub.extension={type:oe.RendererSystem,name:"scissor"};let wD=ub;fe.add(wD);class cb extends lb{constructor(e){super(e),this.glConst=le.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:n}=this.renderer,s=e._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const i=e._colorMask;i!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,s,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,i!==0&&(e._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=n?n._colorMask:15;s!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,s!==0&&(n._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}cb.extension={type:oe.RendererSystem,name:"stencil"};fe.add(cb);class hb{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ie("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Ie("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Ie("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}hb.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"_plugin"};fe.add(hb);class db{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Qe,this.transform=null}update(e,r,n,s){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,s),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(e,r,n,s){const i=this.projectionMatrix,o=s?-1:1;i.identity(),i.a=1/r.width*2,i.d=o*(1/r.height*2),i.tx=-1-r.x*i.a,i.ty=-o-r.y*i.d}setTransform(e){}destroy(){this.renderer=null}}db.extension={type:oe.RendererSystem,name:"projection"};fe.add(db);const SD=new Jd,sw=new Ee;class fb{constructor(e){this.renderer=e,this._tempMatrix=new Qe}generateTexture(e,r){const{region:n,...s}=r||{},i=(n==null?void 0:n.copyTo(sw))||e.getLocalBounds(sw,!0),o=s.resolution||this.renderer.resolution;i.width=Math.max(i.width,1/o),i.height=Math.max(i.height,1/o),s.width=i.width,s.height=i.height,s.resolution=o,s.multisample??(s.multisample=this.renderer.multisample);const a=co.create(s);this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const u=e.transform;return e.transform=SD,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=u,a}destroy(){}}fb.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"textureGenerator"};fe.add(fb);const Ms=new Ee,pl=new Ee;class pb{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ee,this.destinationFrame=new Ee,this.viewportFrame=new Ee}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,n){const s=this.renderer;this.current=e;let i,o,a;e?(i=e.baseTexture,a=i.resolution,r||(Ms.width=e.frame.width,Ms.height=e.frame.height,r=Ms),n||(pl.x=e.frame.x,pl.y=e.frame.y,pl.width=r.width,pl.height=r.height,n=pl),o=i.framebuffer):(a=s.resolution,r||(Ms.width=s._view.screen.width,Ms.height=s._view.screen.height,r=Ms),n||(n=Ms,n.width=r.width,n.height=r.height));const u=this.viewportFrame;u.x=n.x*a,u.y=n.y*a,u.width=n.width*a,u.height=n.height*a,e||(u.y=s.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(o,u),this.renderer.projection.update(n,r,a,!o),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(e,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=$e.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const i=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=i.width!==o.width||i.height!==o.height;if(a){let{x:u,y:h,width:f,height:m}=this.viewportFrame;u=Math.round(u),h=Math.round(h),f=Math.round(f),m=Math.round(m),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,h,f,m)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}pb.extension={type:oe.RendererSystem,name:"renderTexture"};fe.add(pb);class ED{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function TD(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const i=e.getActiveAttrib(t,s);if(i.name.startsWith("gl_"))continue;const o=qT(e,i.type),a={type:o,name:i.name,size:ZT(o),location:e.getAttribLocation(t,i.name)};r[i.name]=a}return r}function bD(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;s++){const i=e.getActiveUniform(t,s),o=i.name.replace(/\[.*?\]$/,""),a=!!i.name.match(/\[.*?\]$/),u=qT(e,i.type);r[o]={name:o,index:s,type:u,size:i.size,isArray:a,value:QT(u,i.size)}}return r}function AD(t,e){var a;const r=K_(t,t.VERTEX_SHADER,e.vertexSrc),n=K_(t,t.FRAGMENT_SHADER,e.fragmentSrc),s=t.createProgram();t.attachShader(s,r),t.attachShader(s,n);const i=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(i&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(s,i.names,i.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||tD(t,s,r,n),e.attributeData=TD(s,t),e.uniformData=bD(s,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const u=Object.keys(e.attributeData);u.sort((h,f)=>h>f?1:-1);for(let h=0;h<u.length;h++)e.attributeData[u[h]].location=h,t.bindAttribLocation(s,h,u[h]);t.linkProgram(s)}t.deleteShader(r),t.deleteShader(n);const o={};for(const u in e.uniformData){const h=e.uniformData[u];o[u]={location:t.getUniformLocation(s,u),value:QT(h.type,h.size)}}return new ED(s,o)}function CD(t,e,r,n,s){r.buffer.update(s)}const PD={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},mb={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function ID(t){const e=t.map(i=>({data:i,offset:0,dataLen:0,dirty:0}));let r=0,n=0,s=0;for(let i=0;i<e.length;i++){const o=e[i];if(r=mb[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,s+=a}n+r>16?(s=Math.ceil(s/16)*16,o.offset=s,s+=r,n=r):(o.offset=s,n+=r,s+=r)}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}function RD(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((n,s)=>n.index-s.index),r}function MD(t,e){if(!t.autoManage)return{size:0,syncFunc:CD};const r=RD(t.uniforms,e),{uboElements:n,size:s}=ID(r),i=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],u=t.uniforms[a.data.name],h=a.data.name;let f=!1;for(let m=0;m<ga.length;m++){const p=ga[m];if(p.codeUbo&&p.test(a.data,u)){i.push(`offset = ${a.offset/4};`,ga[m].codeUbo(a.data.name,u)),f=!0;break}}if(!f)if(a.data.size>1){const m=ZT(a.data.type),p=Math.max(mb[a.data.type]/16,1),d=m/p,g=(4-d%4)%4;i.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*p}; i++)
                {
                    for(var j = 0; j < ${d}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const m=PD[a.data.type];i.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${m};
                `)}}return i.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",i.join(`
`))}}let kD=0;const Kc={textureCount:0,uboCount:0};class gb{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=kD++}systemCheck(){if(!nD())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,s=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(s.program)),r||(Kc.textureCount=0,Kc.uboCount=0,this.syncUniformGroup(e.uniformGroup,Kc)),s}setUniforms(e){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,r){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))}syncUniforms(e,r,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=qk(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const s=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),s(n.uniformData,e.uniforms,this.renderer,Kc,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(e,r,n){const{gl:s}=this.renderer;this.renderer.buffer.bind(e.buffer);const i=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,s.uniformBlockBinding(r.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=MD(e,this.shader.program.uniformData)),e.autoManage){const u=new Float32Array(a.size/4);e.buffer.update(u)}return r.uniformGroups[e.id]=a.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,n){const s=e.uniforms,i=[`${n}-`];for(const o in s)i.push(o),r[o]&&i.push(r[o].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,n=e.program,s=AD(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}gb.extension={type:oe.RendererSystem,name:"shader"};fe.add(gb);class yd{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.4.2 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}yd.defaultOptions={hello:!1},yd.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"startup"};fe.add(yd);function DD(t,e=[]){return e[we.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.ADD]=[t.ONE,t.ONE],e[we.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.NONE]=[0,0],e[we.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[we.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[we.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[we.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[we.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[we.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[we.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[we.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[we.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[we.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[we.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const FD=0,ND=1,BD=2,OD=3,LD=4,UD=5,vb=class l0{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=we.NONE,this._blendEq=!1,this.map=[],this.map[FD]=this.setBlend,this.map[ND]=this.setOffset,this.map[BD]=this.setCullFace,this.map[OD]=this.setDepthTest,this.map[LD]=this.setFrontFace,this.map[UD]=this.setDepthMask,this.checks=[],this.defaultState=new Jn,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=DD(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let r=this.stateId^e.data,n=0;for(;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r=r>>1,n++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e=e||this.defaultState;for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(l0.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(l0.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const r=this.blendModes[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,r){const n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null}};vb.extension={type:oe.RendererSystem,name:"state"};let GD=vb;fe.add(GD);class zD extends wu{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(s=>e.systems[s]),n=[...r,...Object.keys(e.systems).filter(s=>!r.includes(s))];for(const s of n)this.addSystem(e.systems[s],s)}addRunners(...e){e.forEach(r=>{this.runners[r]=new vn(r)})}addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const s in this.runners)this.runners[s].add(n);return this}emitWithCustomOptions(e,r){const n=Object.keys(this._systemsHash);e.items.forEach(s=>{const i=n.find(o=>this._systemsHash[o]===s);s[e.name](r[i])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const El=class Mh{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Mh.defaultMaxIdle,this.checkCountMax=Mh.defaultCheckCountMax,this.mode=Mh.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Mv.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,r=e.managedTextures;let n=!1;for(let s=0;s<r.length;s++){const i=r[s];i.resource&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),r[s]=null,n=!0)}if(n){let s=0;for(let i=0;i<r.length;i++)r[i]!==null&&(r[s++]=r[i]);r.length=s}}unload(e){const r=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&r.destroyTexture(n);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};El.defaultMode=Mv.AUTO,El.defaultMaxIdle=60*60,El.defaultCheckCountMax=60*10,El.extension={type:oe.RendererSystem,name:"textureGC"};let zs=El;fe.add(zs);class Tm{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=ye.UNSIGNED_BYTE,this.internalFormat=ne.RGBA,this.samplerType=0}}function HD(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:ae.FLOAT,[t.RGBA]:ae.FLOAT,[t.ALPHA]:ae.FLOAT,[t.LUMINANCE]:ae.FLOAT,[t.LUMINANCE_ALPHA]:ae.FLOAT,[t.R8]:ae.FLOAT,[t.R8_SNORM]:ae.FLOAT,[t.RG8]:ae.FLOAT,[t.RG8_SNORM]:ae.FLOAT,[t.RGB8]:ae.FLOAT,[t.RGB8_SNORM]:ae.FLOAT,[t.RGB565]:ae.FLOAT,[t.RGBA4]:ae.FLOAT,[t.RGB5_A1]:ae.FLOAT,[t.RGBA8]:ae.FLOAT,[t.RGBA8_SNORM]:ae.FLOAT,[t.RGB10_A2]:ae.FLOAT,[t.RGB10_A2UI]:ae.FLOAT,[t.SRGB8]:ae.FLOAT,[t.SRGB8_ALPHA8]:ae.FLOAT,[t.R16F]:ae.FLOAT,[t.RG16F]:ae.FLOAT,[t.RGB16F]:ae.FLOAT,[t.RGBA16F]:ae.FLOAT,[t.R32F]:ae.FLOAT,[t.RG32F]:ae.FLOAT,[t.RGB32F]:ae.FLOAT,[t.RGBA32F]:ae.FLOAT,[t.R11F_G11F_B10F]:ae.FLOAT,[t.RGB9_E5]:ae.FLOAT,[t.R8I]:ae.INT,[t.R8UI]:ae.UINT,[t.R16I]:ae.INT,[t.R16UI]:ae.UINT,[t.R32I]:ae.INT,[t.R32UI]:ae.UINT,[t.RG8I]:ae.INT,[t.RG8UI]:ae.UINT,[t.RG16I]:ae.INT,[t.RG16UI]:ae.UINT,[t.RG32I]:ae.INT,[t.RG32UI]:ae.UINT,[t.RGB8I]:ae.INT,[t.RGB8UI]:ae.UINT,[t.RGB16I]:ae.INT,[t.RGB16UI]:ae.UINT,[t.RGB32I]:ae.INT,[t.RGB32UI]:ae.UINT,[t.RGBA8I]:ae.INT,[t.RGBA8UI]:ae.UINT,[t.RGBA16I]:ae.INT,[t.RGBA16UI]:ae.UINT,[t.RGBA32I]:ae.INT,[t.RGBA32UI]:ae.UINT,[t.DEPTH_COMPONENT16]:ae.FLOAT,[t.DEPTH_COMPONENT24]:ae.FLOAT,[t.DEPTH_COMPONENT32F]:ae.FLOAT,[t.DEPTH_STENCIL]:ae.FLOAT,[t.DEPTH24_STENCIL8]:ae.FLOAT,[t.DEPTH32F_STENCIL8]:ae.FLOAT}:e={[t.RGB]:ae.FLOAT,[t.RGBA]:ae.FLOAT,[t.ALPHA]:ae.FLOAT,[t.LUMINANCE]:ae.FLOAT,[t.LUMINANCE_ALPHA]:ae.FLOAT,[t.DEPTH_STENCIL]:ae.FLOAT},e}function $D(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[ye.UNSIGNED_BYTE]:{[ne.RGBA]:t.RGBA8,[ne.RGB]:t.RGB8,[ne.RG]:t.RG8,[ne.RED]:t.R8,[ne.RGBA_INTEGER]:t.RGBA8UI,[ne.RGB_INTEGER]:t.RGB8UI,[ne.RG_INTEGER]:t.RG8UI,[ne.RED_INTEGER]:t.R8UI,[ne.ALPHA]:t.ALPHA,[ne.LUMINANCE]:t.LUMINANCE,[ne.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ye.BYTE]:{[ne.RGBA]:t.RGBA8_SNORM,[ne.RGB]:t.RGB8_SNORM,[ne.RG]:t.RG8_SNORM,[ne.RED]:t.R8_SNORM,[ne.RGBA_INTEGER]:t.RGBA8I,[ne.RGB_INTEGER]:t.RGB8I,[ne.RG_INTEGER]:t.RG8I,[ne.RED_INTEGER]:t.R8I},[ye.UNSIGNED_SHORT]:{[ne.RGBA_INTEGER]:t.RGBA16UI,[ne.RGB_INTEGER]:t.RGB16UI,[ne.RG_INTEGER]:t.RG16UI,[ne.RED_INTEGER]:t.R16UI,[ne.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[ye.SHORT]:{[ne.RGBA_INTEGER]:t.RGBA16I,[ne.RGB_INTEGER]:t.RGB16I,[ne.RG_INTEGER]:t.RG16I,[ne.RED_INTEGER]:t.R16I},[ye.UNSIGNED_INT]:{[ne.RGBA_INTEGER]:t.RGBA32UI,[ne.RGB_INTEGER]:t.RGB32UI,[ne.RG_INTEGER]:t.RG32UI,[ne.RED_INTEGER]:t.R32UI,[ne.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[ye.INT]:{[ne.RGBA_INTEGER]:t.RGBA32I,[ne.RGB_INTEGER]:t.RGB32I,[ne.RG_INTEGER]:t.RG32I,[ne.RED_INTEGER]:t.R32I},[ye.FLOAT]:{[ne.RGBA]:t.RGBA32F,[ne.RGB]:t.RGB32F,[ne.RG]:t.RG32F,[ne.RED]:t.R32F,[ne.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[ye.HALF_FLOAT]:{[ne.RGBA]:t.RGBA16F,[ne.RGB]:t.RGB16F,[ne.RG]:t.RG16F,[ne.RED]:t.R16F},[ye.UNSIGNED_SHORT_5_6_5]:{[ne.RGB]:t.RGB565},[ye.UNSIGNED_SHORT_4_4_4_4]:{[ne.RGBA]:t.RGBA4},[ye.UNSIGNED_SHORT_5_5_5_1]:{[ne.RGBA]:t.RGB5_A1},[ye.UNSIGNED_INT_2_10_10_10_REV]:{[ne.RGBA]:t.RGB10_A2,[ne.RGBA_INTEGER]:t.RGB10_A2UI},[ye.UNSIGNED_INT_10F_11F_11F_REV]:{[ne.RGB]:t.R11F_G11F_B10F},[ye.UNSIGNED_INT_5_9_9_9_REV]:{[ne.RGB]:t.RGB9_E5},[ye.UNSIGNED_INT_24_8]:{[ne.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[ye.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ne.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[ye.UNSIGNED_BYTE]:{[ne.RGBA]:t.RGBA,[ne.RGB]:t.RGB,[ne.ALPHA]:t.ALPHA,[ne.LUMINANCE]:t.LUMINANCE,[ne.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[ye.UNSIGNED_SHORT_5_6_5]:{[ne.RGB]:t.RGB},[ye.UNSIGNED_SHORT_4_4_4_4]:{[ne.RGBA]:t.RGBA},[ye.UNSIGNED_SHORT_5_5_5_1]:{[ne.RGBA]:t.RGBA}},e}class yb{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Se,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=$D(e),this.samplerTypes=HD(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let s=0;s<r;s++)this.boundTextures[s]=null;this.emptyTextures={};const n=new Tm(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Tm(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(e,r=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const s=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,s.texture)),s.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):s.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<n.length;s++)n[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<n.length;s++)n[s]===e&&(this.currentLocation!==s&&(r.activeTexture(r.TEXTURE0+s),this.currentLocation=s),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[s]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:s}=this;if(n)for(let i=e-1;i>=0;--i){const o=r[i];o&&o._glTextures[s].samplerType!==ae.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new Tm(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var n;r.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,r.samplerType=this.samplerTypes[r.internalFormat]??ae.FLOAT,this.webGLVersion===2&&e.type===ye.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var s;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(e,r),(s=e.resource)==null?void 0:s.upload(n,e,r))r.samplerType!==ae.FLOAT&&(this.hasIntegerTextures=!0);else{const i=e.realWidth,o=e.realHeight,a=n.gl;(r.width!==i||r.height!==o||r.dirtyId<0)&&(r.width=i,r.height=o,a.texImage2D(e.target,0,r.internalFormat,i,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const s=this.managedTextures.indexOf(e);s!==-1&&ma(this.managedTextures,s,1)}}updateTextureStyle(e){var n;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Kn.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=vi.CLAMP:r.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const n=this.gl;if(r.mipmap&&e.mipmap!==Kn.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===fi.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&e.anisotropicLevel>0&&e.scaleMode===fi.LINEAR){const i=Math.min(e.anisotropicLevel,n.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,s.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===fi.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===fi.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}yb.extension={type:oe.RendererSystem,name:"texture"};fe.add(yb);class xb{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:n,renderer:s}=this;r&&s.shader.bind(r),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:n,CONTEXT_UID:s}=this,i=r.createTransformFeedback();e._glTransformFeedbacks[s]=i,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[s].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[s].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}disposeTransformFeedback(e,r){const n=e._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const u=a._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&i.dispose(a,r))}n&&(r||s.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}xb.extension={type:oe.RendererSystem,name:"transformFeedback"};fe.add(xb);class xd{constructor(e){this.renderer=e}init(e){this.screen=new Ee(0,0,e.width,e.height),this.element=e.view||le.ADAPTER.createCanvas(),this.resolution=e.resolution||le.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=n,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",n,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}xd.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},xd.extension={type:[oe.RendererSystem,oe.CanvasRendererSystem],name:"_view"};fe.add(xd);le.PREFER_ENV=uo.WEBGL2;le.STRICT_TEXTURE_CACHE=!1;le.RENDER_OPTIONS={...vd.defaultOptions,...gd.defaultOptions,...xd.defaultOptions,...yd.defaultOptions};Object.defineProperties(le,{WRAP_MODE:{get(){return Se.defaultOptions.wrapMode},set(t){Ie("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Se.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Se.defaultOptions.scaleMode},set(t){Ie("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Se.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Se.defaultOptions.mipmap},set(t){Ie("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Se.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Se.defaultOptions.anisotropicLevel},set(t){Ie("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Se.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return Ie("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Vt.defaultResolution},set(t){Vt.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return Ie("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Vt.defaultMultisample},set(t){Vt.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Gs.defaultMaxTextures},set(t){Ie("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Gs.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Gs.defaultBatchSize},set(t){Ie("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Gs.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Gs.canUploadSameBuffer},set(t){Ie("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Gs.canUploadSameBuffer=t}},GC_MODE:{get(){return zs.defaultMode},set(t){Ie("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),zs.defaultMode=t}},GC_MAX_IDLE:{get(){return zs.defaultMaxIdle},set(t){Ie("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),zs.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return zs.defaultCheckCountMax},set(t){Ie("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),zs.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return mi.defaultVertexPrecision},set(t){Ie("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),mi.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return mi.defaultFragmentPrecision},set(t){Ie("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),mi.defaultFragmentPrecision=t}}});var fs=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(fs||{});class bm{constructor(e,r=null,n=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=s}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const _b=class br{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new bm(null,null,1/0),this.deltaMS=1/br.targetFPMS,this.elapsedMS=1/br.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,n=fs.NORMAL){return this._addListener(new bm(e,r,n))}addOnce(e,r,n=fs.NORMAL){return this._addListener(new bm(e,r,n,!0))}_addListener(e){let r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,r){let n=this._head.next;for(;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*br.targetFPMS;const n=this._head;let s=n.next;for(;s;)s=s.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,br.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!br._shared){const e=br._shared=new br;e.autoStart=!0,e._protected=!0}return br._shared}static get system(){if(!br._system){const e=br._system=new br;e.autoStart=!0,e._protected=!0}return br._system}};_b.targetFPMS=.06;let Nt=_b;Object.defineProperties(le,{TARGET_FPMS:{get(){return Nt.targetFPMS},set(t){Ie("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Nt.targetFPMS=t}}});class wb{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,fs.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Nt.shared:new Nt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}wb.extension=oe.Application;fe.add(wb);const Sb=[];fe.handleByList(oe.Renderer,Sb);function VD(t){for(const e of Sb)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var jD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,WD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const XD=jD,Eb=WD;class Tb{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=xt.HIGH?this.multisample=xt.HIGH:r>=xt.MEDIUM?this.multisample=xt.MEDIUM:r>=xt.LOW?this.multisample=xt.LOW:this.multisample=xt.NONE}destroy(){}}Tb.extension={type:oe.RendererSystem,name:"_multisample"};fe.add(Tb);class YD{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class bb{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glBuffers[n]||this.createGLBuffer(e);r.bindBuffer(e.type,s.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:n,CONTEXT_UID:s}=this;if(this.boundBufferBases[r]!==e){const i=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,i.buffer)}}bindBufferRange(e,r,n){const{gl:s,CONTEXT_UID:i}=this;n=n||0;const o=e._glBuffers[i]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(e){const{gl:r,CONTEXT_UID:n}=this,s=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==s.updateID)if(s.updateID=e._updateID,r.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const i=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,i)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],s=this.gl;e.disposeRunner.remove(this),n&&(r||s.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:n}=this;return e._glBuffers[r]=new YD(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}bb.extension={type:oe.RendererSystem,name:"buffer"};fe.add(bb);class Ab{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;let s,i,o,a;if(r&&(s=r.renderTexture,i=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!s,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(s||(this.lastObjectRendered=e),!a){const u=e.enableTempParent();e.updateTransform(),e.disableTempParent(u)}n.renderTexture.bind(s),n.batch.currentRenderer.start(),(i??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),s&&(r.blit&&n.framebuffer.blit(),s.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Ab.extension={type:oe.RendererSystem,name:"objectRenderer"};fe.add(Ab);const kh=class u0 extends zD{constructor(e){super(),this.type=pT.WEBGL,e=Object.assign({},le.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new yn({projectionMatrix:new Qe},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:u0.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in e&&(Ie("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=u0.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:vk()}render(e,r){this.objectRenderer.render(e,r)}resize(e,r){this._view.resizeView(e,r)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ie("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ie("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ie("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ie("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Ie("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Ie("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Ie("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Ie("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,r){return this.textureGenerator.generateTexture(e,r)}};kh.extension={type:oe.Renderer,priority:1},kh.__plugins={},kh.__systems={};let Hv=kh;fe.handleByMap(oe.RendererPlugin,Hv.__plugins);fe.handleByMap(oe.RendererSystem,Hv.__systems);fe.add(Hv);class Cb extends cu{constructor(e,r){const{width:n,height:s}=r||{};super(n,s),this.items=[],this.itemDirtyIds=[];for(let i=0;i<e;i++){const o=new Se;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof cu?this.addResourceAt(e[n],n):this.addResourceAt(WT(e[n],r),n))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(r=>r.resource).filter(r=>r).map(r=>r.load());return this._load=Promise.all(e).then(()=>{const{realWidth:r,realHeight:n}=this.items[0];return this.resize(r,n),this.update(),Promise.resolve(this)}),this._load}}class QD extends Cb{constructor(e,r){const{width:n,height:s}=r||{};let i,o;Array.isArray(e)?(i=e,o=e.length):o=e,super(o,{width:n,height:s}),i&&this.initFromArray(i,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=da.TEXTURE_2D_ARRAY}upload(e,r,n){const{length:s,itemDirtyIds:i,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,s,0,r.format,n.type,null);for(let u=0;u<s;u++){const h=o[u];i[u]<h.dirtyId&&(i[u]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,u,h.resource.width,h.resource.height,1,r.format,n.type,h.resource.source))}return!0}}class KD extends Ti{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const Pb=class Tl extends Cb{constructor(e,r){const{width:n,height:s,autoLoad:i,linkBaseTexture:o}=r||{};if(e&&e.length!==Tl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:s});for(let a=0;a<Tl.SIDES;a++)this.items[a].target=da.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,r),i!==!1&&this.load()}bind(e){super.bind(e),e.target=da.TEXTURE_CUBE_MAP}addBaseTextureAt(e,r,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[r])throw new Error(`Index ${r} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=da.TEXTURE_CUBE_MAP_POSITIVE_X+r,e.parentTextureArray=this.baseTexture,this.items[r]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[r]=e,this}upload(e,r,n){const s=this.itemDirtyIds;for(let i=0;i<Tl.SIDES;i++){const o=this.items[i];(s[i]<o.dirtyId||n.dirtyId<r.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),s[i]=o.dirtyId):s[i]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),s[i]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Tl.SIDES}};Pb.SIDES=6;let ZD=Pb;class na extends Ti{constructor(e,r){r=r||{};let n,s,i;typeof e=="string"?(n=na.EMPTY,s=e,i=!0):(n=e,s=null,i=!1),super(n),this.url=s,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.ownsImageBitmap=r.ownsImageBitmap??i,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const n=await le.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await n.blob();if(this.destroyed)return;const i=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===gr.UNPACK?"premultiply":"none"});if(this.destroyed){i.close();return}this.source=i,this.update(),e(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(e,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return na._EMPTY=na._EMPTY??le.ADAPTER.createCanvas(0,0),na._EMPTY}}const c0=class Dh extends Ti{constructor(e,r){r=r||{},super(le.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=r.scale||1,this._overrideWidth=r.width,this._overrideHeight=r.height,this._resolve=null,this._crossorigin=r.crossorigin,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Dh.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Ti.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=r=>{this._resolve&&(e.onerror=null,this.onError.emit(r))},e.onload=()=>{if(!this._resolve)return;const r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=r*this.scale,i=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/n*r,i=this._overrideHeight||this._overrideWidth/r*n),s=Math.round(s),i=Math.round(i);const o=this.source;o.width=s,o.height=i,o._pixiId=`canvas_${oo()}`,o.getContext("2d").drawImage(e,0,0,r,n,0,0,s,i),this._resolve(),this._resolve=null}}static getSize(e){const r=Dh.SVG_SIZE.exec(e),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,r){return r==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Dh.SVG_XML.test(e)}};c0.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,c0.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let h0=c0;class qD extends Ti{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const d0=class f0 extends Ti{constructor(e,r){if(r=r||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");r.autoLoad!==!1&&n.setAttribute("preload","auto"),r.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),r.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),r.loop===!0&&n.setAttribute("loop",""),r.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];Ti.crossOrigin(n,s,r.crossorigin);for(let i=0;i<e.length;++i){const o=document.createElement("source");let{src:a,mime:u}=e[i];if(a=a||e[i],a.startsWith("data:"))u=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const h=a.split("?").shift().toLowerCase(),f=h.slice(h.lastIndexOf(".")+1);u=u||f0.MIME_TYPES[f]||`video/${f}`}o.src=a,u&&(o.type=u),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=r.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),r.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const r=Nt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((r,n)=>{this.valid?r(this):(this._resolve=r,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const r=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!r&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Nt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Nt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Nt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,r){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||f0.TYPES.includes(r)}};d0.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],d0.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Ib=d0;Jg.push(na,tb,KD,Ib,qD,h0,Qd,ZD,QD);let _d=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ee.EMPTY:(e=e||new Ee(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:n,b:s,c:i,d:o,tx:a,ty:u}=e,h=n*r.x+i*r.y+a,f=s*r.x+o*r.y+u;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)}addQuad(e){let r=this.minX,n=this.minY,s=this.maxX,i=this.maxY,o=e[0],a=e[1];r=o<r?o:r,n=a<n?a:n,s=o>s?o:s,i=a>i?a:i,o=e[2],a=e[3],r=o<r?o:r,n=a<n?a:n,s=o>s?o:s,i=a>i?a:i,o=e[4],a=e[5],r=o<r?o:r,n=a<n?a:n,s=o>s?o:s,i=a>i?a:i,o=e[6],a=e[7],r=o<r?o:r,n=a<n?a:n,s=o>s?o:s,i=a>i?a:i,this.minX=r,this.minY=n,this.maxX=s,this.maxY=i}addFrame(e,r,n,s,i){this.addFrameMatrix(e.worldTransform,r,n,s,i)}addFrameMatrix(e,r,n,s,i){const o=e.a,a=e.b,u=e.c,h=e.d,f=e.tx,m=e.ty;let p=this.minX,d=this.minY,g=this.maxX,y=this.maxY,_=o*r+u*n+f,w=a*r+h*n+m;p=_<p?_:p,d=w<d?w:d,g=_>g?_:g,y=w>y?w:y,_=o*s+u*n+f,w=a*s+h*n+m,p=_<p?_:p,d=w<d?w:d,g=_>g?_:g,y=w>y?w:y,_=o*r+u*i+f,w=a*r+h*i+m,p=_<p?_:p,d=w<d?w:d,g=_>g?_:g,y=w>y?w:y,_=o*s+u*i+f,w=a*s+h*i+m,p=_<p?_:p,d=w<d?w:d,g=_>g?_:g,y=w>y?w:y,this.minX=p,this.minY=d,this.maxX=g,this.maxY=y}addVertexData(e,r,n){let s=this.minX,i=this.minY,o=this.maxX,a=this.maxY;for(let u=r;u<n;u+=2){const h=e[u],f=e[u+1];s=h<s?h:s,i=f<i?f:i,o=h>o?h:o,a=f>a?f:a}this.minX=s,this.minY=i,this.maxX=o,this.maxY=a}addVertices(e,r,n,s){this.addVerticesMatrix(e.worldTransform,r,n,s)}addVerticesMatrix(e,r,n,s,i=0,o=i){const a=e.a,u=e.b,h=e.c,f=e.d,m=e.tx,p=e.ty;let d=this.minX,g=this.minY,y=this.maxX,_=this.maxY;for(let w=n;w<s;w+=2){const T=r[w],E=r[w+1],A=a*T+h*E+m,b=f*E+u*T+p;d=Math.min(d,A-i),y=Math.max(y,A+i),g=Math.min(g,b-o),_=Math.max(_,b+o)}this.minX=d,this.minY=g,this.maxX=y,this.maxY=_}addBounds(e){const r=this.minX,n=this.minY,s=this.maxX,i=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>s?e.maxX:s,this.maxY=e.maxY>i?e.maxY:i}addBoundsMask(e,r){const n=e.minX>r.minX?e.minX:r.minX,s=e.minY>r.minY?e.minY:r.minY,i=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=i&&s<=o){const a=this.minX,u=this.minY,h=this.maxX,f=this.maxY;this.minX=n<a?n:a,this.minY=s<u?s:u,this.maxX=i>h?i:h,this.maxY=o>f?o:f}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const n=e.minX>r.x?e.minX:r.x,s=e.minY>r.y?e.minY:r.y,i=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=i&&s<=o){const a=this.minX,u=this.minY,h=this.maxX,f=this.maxY;this.minX=n<a?n:a,this.minY=s<u?s:u,this.maxX=i>h?i:h,this.maxY=o>f?o:f}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,n,s,i,o){e-=i,r-=o,n+=i,s+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>s?this.maxY:s}};class tt extends wu{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Jd,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new _d,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let n=0;n<r.length;++n){const s=r[n];Object.defineProperty(tt.prototype,s,Object.getOwnPropertyDescriptor(e,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new Ee),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ee),e=this._localBoundsRect),this._localBounds||(this._localBounds=new _d);const r=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=s,this._bounds.updateID+=this._boundsID-i,o}toGlobal(e,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,n,s){return r&&(e=r.toGlobal(e,n,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,n=1,s=1,i=0,o=0,a=0,u=0,h=0){return this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=s||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=u,this.pivot.y=h,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new JD),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*jk}set angle(e){this.transform.rotation=e*Wk}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class JD extends tt{constructor(){super(...arguments),this.sortDirty=null}}tt.prototype.displayObjectUpdateTransform=tt.prototype.updateTransform;const e3=new Qe;function t3(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const Rb=class p0 extends tt{constructor(){super(),this.children=[],this.sortableChildren=p0.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.addChild(e[r]);else{const r=e[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.push(r),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this)}return e[0]}addChildAt(e,r){if(r<0||r>this.children.length)throw new Error(`${e}addChildAt: The index ${r} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(r,0,e),this._boundsID++,this.onChildrenChange(r),e.emit("added",this),this.emit("childAdded",e,this,r),e}swapChildren(e,r){if(e===r)return;const n=this.getChildIndex(e),s=this.getChildIndex(r);this.children[n]=r,this.children[s]=e,this.onChildrenChange(n<s?n:s)}getChildIndex(e){const r=this.children.indexOf(e);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r}setChildIndex(e,r){if(r<0||r>=this.children.length)throw new Error(`The index ${r} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);ma(this.children,n,1),this.children.splice(r,0,e),this.onChildrenChange(r)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let r=0;r<e.length;r++)this.removeChild(e[r]);else{const r=e[0],n=this.children.indexOf(r);if(n===-1)return null;r.parent=null,r.transform._parentID=-1,ma(this.children,n,1),this._boundsID++,this.onChildrenChange(n),r.emit("removed",this),this.emit("childRemoved",r,this,n)}return e[0]}removeChildAt(e){const r=this.getChildAt(e);return r.parent=null,r.transform._parentID=-1,ma(this.children,e,1),this._boundsID++,this.onChildrenChange(e),r.emit("removed",this),this.emit("childRemoved",r,this,e),r}removeChildren(e=0,r=this.children.length){const n=e,s=r,i=s-n;let o;if(i>0&&i<=s){o=this.children.splice(n,i);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let r=0,n=this.children.length;r<n;++r){const s=this.children[r];s._lastSortedIndex=r,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(t3),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const r=this.children[e];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){const n=r._mask.isMaskData?r._mask.maskObject:r._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(r._bounds,n._bounds)):this._bounds.addBounds(r._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,r=!1){const n=super.getLocalBounds(e);if(!r)for(let s=0,i=this.children.length;s<i;++s){const o=this.children[s];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const r=e.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,s;this.cullArea?(n=this.cullArea,s=this.worldTransform):this._render!==p0.prototype._render&&(n=this.getBounds(!0));const i=e.projection.transform;if(i&&(s?(s=e3.copyFrom(s),s.prepend(i)):s=i),n&&r.intersects(n,s))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const u=this.children[o],h=u.cullable;u.cullable=h||!this.cullArea,u.render(e),u.cullable=h}}render(e){var r;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(r=this.filters)!=null&&r.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,s=this.children.length;n<s;++n)this.children[n].render(e)}}renderAdvanced(e){var i,o,a;const r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let u=0;u<r.length;u++)r[u].enabled&&this._enabledFilters.push(r[u])}const s=r&&((i=this._enabledFilters)==null?void 0:i.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Tt.NONE));if(s&&e.batch.flush(),r&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let u=0,h=this.children.length;u<h;++u)this.children[u].render(e)}s&&e.batch.flush(),n&&e.mask.pop(this),r&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const r=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(r)for(let s=0;s<n.length;++s)n[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const r=this.getLocalBounds().width;r!==0?this.scale.x=e/r:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const r=this.getLocalBounds().height;r!==0?this.scale.y=e/r:this.scale.y=1,this._height=e}};Rb.defaultSortableChildren=!1;let ar=Rb;ar.prototype.containerUpdateTransform=ar.prototype.updateTransform;Object.defineProperties(le,{SORTABLE_CHILDREN:{get(){return ar.defaultSortableChildren},set(t){Ie("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),ar.defaultSortableChildren=t}}});var tf=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(tf||{});const ml=new Me,r3=new Uint16Array([0,1,2,0,2,3]);class ei extends ar{constructor(e){super(),this._anchor=new Vn(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new $e(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=we.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||se.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=r3,this.pluginName="batch",this.isSprite=!0,this._roundPixels=le.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ji(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ji(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,n=r.a,s=r.b,i=r.c,o=r.d,a=r.tx,u=r.ty,h=this.vertexData,f=e.trim,m=e.orig,p=this._anchor;let d=0,g=0,y=0,_=0;if(f?(g=f.x-p._x*m.width,d=g+f.width,_=f.y-p._y*m.height,y=_+f.height):(g=-p._x*m.width,d=g+m.width,_=-p._y*m.height,y=_+m.height),h[0]=n*g+i*_+a,h[1]=o*_+s*g+u,h[2]=n*d+i*_+a,h[3]=o*_+s*d+u,h[4]=n*d+i*y+a,h[5]=o*y+s*d+u,h[6]=n*g+i*y+a,h[7]=o*y+s*g+u,this._roundPixels){const w=le.RESOLUTION;for(let T=0;T<h.length;++T)h[T]=Math.round(h[T]*w)/w}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,n=e.orig,s=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,u=i.c,h=i.d,f=i.tx,m=i.ty,p=-s._x*n.width,d=p+n.width,g=-s._y*n.height,y=g+n.height;if(r[0]=o*p+u*g+f,r[1]=h*g+a*p+m,r[2]=o*d+u*g+f,r[3]=h*g+a*d+m,r[4]=o*d+u*y+f,r[5]=h*y+a*d+m,r[6]=o*p+u*y+f,r[7]=h*y+a*p+m,this._roundPixels){const _=le.RESOLUTION;for(let w=0;w<r.length;++w)r[w]=Math.round(r[w]*_)/_}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new _d),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ee),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,ml);const r=this._texture.orig.width,n=this._texture.orig.height,s=-r*this.anchor.x;let i=0;return ml.x>=s&&ml.x<s+r&&(i=-n*this.anchor.y,ml.y>=i&&ml.y<i+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const r=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!r)}this._texture=null}static from(e,r){const n=e instanceof se?e:se.from(e,r);return new ei(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=Ji(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=Ji(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||se.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const Zc={willReadFrequently:!0},Bn=class ge{static get experimentalLetterSpacingSupported(){let e=ge._experimentalLetterSpacingSupported;if(e!==void 0){const r=le.ADAPTER.getCanvasRenderingContext2D().prototype;e=ge._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,n,s,i,o,a,u,h){this.text=e,this.style=r,this.width=n,this.height=s,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=u,this.fontProperties=h}static measureText(e,r,n,s=ge._canvas){n=n??r.wordWrap;const i=r.toFontString(),o=ge.measureFont(i);o.fontSize===0&&(o.fontSize=r.fontSize,o.ascent=r.fontSize);const a=s.getContext("2d",Zc);a.font=i;const u=(n?ge.wordWrap(e,r,s):e).split(/(?:\r\n|\r|\n)/),h=new Array(u.length);let f=0;for(let g=0;g<u.length;g++){const y=ge._measureText(u[g],r.letterSpacing,a);h[g]=y,f=Math.max(f,y)}let m=f+r.strokeThickness;r.dropShadow&&(m+=r.dropShadowDistance);const p=r.lineHeight||o.fontSize+r.strokeThickness;let d=Math.max(p,o.fontSize+r.strokeThickness*2)+r.leading+(u.length-1)*(p+r.leading);return r.dropShadow&&(d+=r.dropShadowDistance),new ge(e,r,m,d,u,h,p+r.leading,f,o)}static _measureText(e,r,n){let s=!1;ge.experimentalLetterSpacingSupported&&(ge.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,s=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let i=n.measureText(e).width;return i>0&&(s?i-=r:i+=(ge.graphemeSegmenter(e).length-1)*r),i}static wordWrap(e,r,n=ge._canvas){const s=n.getContext("2d",Zc);let i=0,o="",a="";const u=Object.create(null),{letterSpacing:h,whiteSpace:f}=r,m=ge.collapseSpaces(f),p=ge.collapseNewlines(f);let d=!m;const g=r.wordWrapWidth+h,y=ge.tokenize(e);for(let _=0;_<y.length;_++){let w=y[_];if(ge.isNewline(w)){if(!p){a+=ge.addLine(o),d=!m,o="",i=0;continue}w=" "}if(m){const E=ge.isBreakingSpace(w),A=ge.isBreakingSpace(o[o.length-1]);if(E&&A)continue}const T=ge.getFromCache(w,h,u,s);if(T>g)if(o!==""&&(a+=ge.addLine(o),o="",i=0),ge.canBreakWords(w,r.breakWords)){const E=ge.wordWrapSplit(w);for(let A=0;A<E.length;A++){let b=E[A],I=b,R=1;for(;E[A+R];){const k=E[A+R];if(!ge.canBreakChars(I,k,w,A,r.breakWords))b+=k;else break;I=k,R++}A+=R-1;const P=ge.getFromCache(b,h,u,s);P+i>g&&(a+=ge.addLine(o),d=!1,o="",i=0),o+=b,i+=P}}else{o.length>0&&(a+=ge.addLine(o),o="",i=0);const E=_===y.length-1;a+=ge.addLine(w,!E),d=!1,o="",i=0}else T+i>g&&(d=!1,a+=ge.addLine(o),o="",i=0),(o.length>0||!ge.isBreakingSpace(w)||d)&&(o+=w,i+=T)}return a+=ge.addLine(o,!1),a}static addLine(e,r=!0){return e=ge.trimRight(e),e=r?`${e}
`:e,e}static getFromCache(e,r,n,s){let i=n[e];return typeof i!="number"&&(i=ge._measureText(e,r,s)+r,n[e]=i),i}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const n=e[r];if(!ge.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ge._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:ge._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const r=[];let n="";if(typeof e!="string")return r;for(let s=0;s<e.length;s++){const i=e[s],o=e[s+1];if(ge.isBreakingSpace(i,o)||ge.isNewline(i)){n!==""&&(r.push(n),n=""),r.push(i);continue}n+=i}return n!==""&&r.push(n),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,n,s,i){return!0}static wordWrapSplit(e){return ge.graphemeSegmenter(e)}static measureFont(e){if(ge._fonts[e])return ge._fonts[e];const r={ascent:0,descent:0,fontSize:0},n=ge._canvas,s=ge._context;s.font=e;const i=ge.METRICS_STRING+ge.BASELINE_SYMBOL,o=Math.ceil(s.measureText(i).width);let a=Math.ceil(s.measureText(ge.BASELINE_SYMBOL).width);const u=Math.ceil(ge.HEIGHT_MULTIPLIER*a);if(a=a*ge.BASELINE_MULTIPLIER|0,o===0||u===0)return ge._fonts[e]=r,r;n.width=o,n.height=u,s.fillStyle="#f00",s.fillRect(0,0,o,u),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(i,0,a);const h=s.getImageData(0,0,o,u).data,f=h.length,m=o*4;let p=0,d=0,g=!1;for(p=0;p<a;++p){for(let y=0;y<m;y+=4)if(h[d+y]!==255){g=!0;break}if(!g)d+=m;else break}for(r.ascent=a-p,d=f-m,g=!1,p=u;p>a;--p){for(let y=0;y<m;y+=4)if(h[d+y]!==255){g=!0;break}if(!g)d-=m;else break}return r.descent=p-a,r.fontSize=r.ascent+r.descent,ge._fonts[e]=r,r}static clearMetrics(e=""){e?delete ge._fonts[e]:ge._fonts={}}static get _canvas(){var e;if(!ge.__canvas){let r;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",Zc))!=null&&e.measureText)return ge.__canvas=n,n;r=le.ADAPTER.createCanvas()}catch{r=le.ADAPTER.createCanvas()}r.width=r.height=10,ge.__canvas=r}return ge.__canvas}static get _context(){return ge.__context||(ge.__context=ge._canvas.getContext("2d",Zc)),ge.__context}};Bn.METRICS_STRING="|q",Bn.BASELINE_SYMBOL="M",Bn.BASELINE_MULTIPLIER=1.4,Bn.HEIGHT_MULTIPLIER=2,Bn.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})(),Bn.experimentalLetterSpacing=!1,Bn._fonts={},Bn._newlines=[10,13],Bn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Wi=Bn;const n3=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Mb=class bl{constructor(e){this.styleID=0,this.reset(),Cm(this,e,e)}clone(){const e={};return Cm(e,this,bl.defaultStyle),new bl(e)}reset(){Cm(this,bl.defaultStyle,bl.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const r=Am(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const r=Am(e);this._fill!==r&&(this._fill=r,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){i3(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const r=Am(e);this._stroke!==r&&(this._stroke=r,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(let n=r.length-1;n>=0;n--){let s=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!n3.includes(s)&&(s=`"${s}"`),r[n]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${r.join(",")}`}};Mb.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:tf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Mr=Mb;function Am(t){const e=$e.shared,r=n=>{const s=e.setValue(n);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(t)?t.map(r):r(t)}function i3(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Cm(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}const s3={texture:!0,children:!1,baseTexture:!0},kb=class m0 extends ei{constructor(e,r,n){let s=!1;n||(n=le.ADAPTER.createCanvas(),s=!0),n.width=3,n.height=3;const i=se.from(n);i.orig=new Ee,i.trim=new Ee,super(i),this._ownCanvas=s,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=m0.defaultResolution??le.RESOLUTION,this._autoResolution=m0.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=r,this.localStyleID=-1}static get experimentalLetterSpacing(){return Wi.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Ie("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Wi.experimentalLetterSpacing=e}updateText(e){const r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,s=Wi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=s.width,o=s.height,a=s.lines,u=s.lineHeight,h=s.lineWidths,f=s.maxLineWidth,m=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+r.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=r.strokeThickness,n.textBaseline=r.textBaseline,n.lineJoin=r.lineJoin,n.miterLimit=r.miterLimit;let p,d;const g=r.dropShadow?2:1;for(let y=0;y<g;++y){const _=r.dropShadow&&y===0,w=_?Math.ceil(Math.max(1,o)+r.padding*2):0,T=w*this._resolution;if(_){n.fillStyle="black",n.strokeStyle="black";const A=r.dropShadowColor,b=r.dropShadowBlur*this._resolution,I=r.dropShadowDistance*this._resolution;n.shadowColor=$e.shared.setValue(A).setAlpha(r.dropShadowAlpha).toRgbaString(),n.shadowBlur=b,n.shadowOffsetX=Math.cos(r.dropShadowAngle)*I,n.shadowOffsetY=Math.sin(r.dropShadowAngle)*I+T}else n.fillStyle=this._generateFillStyle(r,a,s),n.strokeStyle=r.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let E=(u-m.fontSize)/2;u-m.fontSize<0&&(E=0);for(let A=0;A<a.length;A++)p=r.strokeThickness/2,d=r.strokeThickness/2+A*u+m.ascent+E,r.align==="right"?p+=f-h[A]:r.align==="center"&&(p+=(f-h[A])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(a[A],p+r.padding,d+r.padding-w,!0),r.fill&&this.drawLetterSpacing(a[A],p+r.padding,d+r.padding-w)}this.updateTexture()}drawLetterSpacing(e,r,n,s=!1){const i=this._style.letterSpacing;let o=!1;if(Wi.experimentalLetterSpacingSupported&&(Wi.experimentalLetterSpacing?(this.context.letterSpacing=`${i}px`,this.context.textLetterSpacing=`${i}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),i===0||o){s?this.context.strokeText(e,r,n):this.context.fillText(e,r,n);return}let a=r;const u=Wi.graphemeSegmenter(e);let h=this.context.measureText(e).width,f=0;for(let m=0;m<u.length;++m){const p=u[m];s?this.context.strokeText(p,a,n):this.context.fillText(p,a,n);let d="";for(let g=m+1;g<u.length;++g)d+=u[g];f=this.context.measureText(d).width,a+=h-f+i,h=f}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=Fk(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const r=this._texture,n=this._style,s=n.trim?0:n.padding,i=r.baseTexture;r.trim.width=r._frame.width=e.width/this._resolution,r.trim.height=r._frame.height=e.height/this._resolution,r.trim.x=-s,r.trim.y=-s,r.orig.width=r._frame.width-s*2,r.orig.height=r._frame.height-s*2,this._onTextureUpdate(),i.setRealSize(e.width,e.height,this._resolution),r.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,r){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,r)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,r,n){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let i;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,u=this.canvas.width/this._resolution-o-a*2,h=this.canvas.height/this._resolution-o-a*2,f=s.slice(),m=e.fillGradientStops.slice();if(!m.length){const p=f.length+1;for(let d=1;d<p;++d)m.push(d/p)}if(f.unshift(s[0]),m.unshift(0),f.push(s[s.length-1]),m.push(1),e.fillGradientType===tf.LINEAR_VERTICAL){i=this.context.createLinearGradient(u/2,a,u/2,h+a);const p=n.fontProperties.fontSize+e.strokeThickness;for(let d=0;d<r.length;d++){const g=n.lineHeight*(d-1)+p,y=n.lineHeight*d;let _=y;d>0&&g>y&&(_=(y+g)/2);const w=y+p,T=n.lineHeight*(d+1);let E=w;d+1<r.length&&T<w&&(E=(w+T)/2);const A=(E-_)/h;for(let b=0;b<f.length;b++){let I=0;typeof m[b]=="number"?I=m[b]:I=b/f.length;let R=Math.min(1,Math.max(0,_/h+I*A));R=Number(R.toFixed(5)),i.addColorStop(R,f[b])}}}else{i=this.context.createLinearGradient(a,h/2,u+a,h/2);const p=f.length+1;let d=1;for(let g=0;g<f.length;g++){let y;typeof m[g]=="number"?y=m[g]:y=d/p,i.addColorStop(y,f[g]),d++}}return i}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},s3,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const r=Ji(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const r=Ji(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Mr?this._style=e:this._style=new Mr(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};kb.defaultAutoResolution=!0;let $v=kb;class wd{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Fh{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const i in r){const o=r[i].match(/^[a-z]+/gm)[0],a=r[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(const h in a){const f=a[h].split("="),m=f[0],p=f[1].replace(/"/gm,""),d=parseFloat(p),g=isNaN(d)?p:d;u[m]=g}n[o].push(u)}const s=new wd;return n.info.forEach(i=>s.info.push({face:i.face,size:parseInt(i.size,10)})),n.common.forEach(i=>s.common.push({lineHeight:parseInt(i.lineHeight,10)})),n.page.forEach(i=>s.page.push({id:parseInt(i.id,10),file:i.file})),n.char.forEach(i=>s.char.push({id:parseInt(i.id,10),page:parseInt(i.page,10),x:parseInt(i.x,10),y:parseInt(i.y,10),width:parseInt(i.width,10),height:parseInt(i.height,10),xoffset:parseInt(i.xoffset,10),yoffset:parseInt(i.yoffset,10),xadvance:parseInt(i.xadvance,10)})),n.kerning.forEach(i=>s.kerning.push({first:parseInt(i.first,10),second:parseInt(i.second,10),amount:parseInt(i.amount,10)})),n.distanceField.forEach(i=>s.distanceField.push({distanceRange:parseInt(i.distanceRange,10),fieldType:i.fieldType})),s}}class g0{static test(e){const r=e;return typeof e!="string"&&"getElementsByTagName"in e&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new wd,n=e.getElementsByTagName("info"),s=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),u=e.getElementsByTagName("distanceField");for(let h=0;h<n.length;h++)r.info.push({face:n[h].getAttribute("face"),size:parseInt(n[h].getAttribute("size"),10)});for(let h=0;h<s.length;h++)r.common.push({lineHeight:parseInt(s[h].getAttribute("lineHeight"),10)});for(let h=0;h<i.length;h++)r.page.push({id:parseInt(i[h].getAttribute("id"),10)||0,file:i[h].getAttribute("file")});for(let h=0;h<o.length;h++){const f=o[h];r.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)r.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<u.length;h++)r.distanceField.push({fieldType:u[h].getAttribute("fieldType"),distanceRange:parseInt(u[h].getAttribute("distanceRange"),10)});return r}}class v0{static test(e){return typeof e=="string"&&e.includes("<font>")?g0.test(le.ADAPTER.parseXML(e)):!1}static parse(e){return g0.parse(le.ADAPTER.parseXML(e))}}const Pm=[Fh,g0,v0];function o3(t){for(let e=0;e<Pm.length;e++)if(Pm[e].test(t))return Pm[e];return null}function a3(t,e,r,n,s,i){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const u=r.dropShadow?r.dropShadowDistance:0,h=r.padding||0,f=t.width/n-u-h*2,m=t.height/n-u-h*2,p=o.slice(),d=r.fillGradientStops.slice();if(!d.length){const g=p.length+1;for(let y=1;y<g;++y)d.push(y/g)}if(p.unshift(o[0]),d.unshift(0),p.push(o[o.length-1]),d.push(1),r.fillGradientType===tf.LINEAR_VERTICAL){a=e.createLinearGradient(f/2,h,f/2,m+h);let g=0;const y=(i.fontProperties.fontSize+r.strokeThickness)/m;for(let _=0;_<s.length;_++){const w=i.lineHeight*_;for(let T=0;T<p.length;T++){let E=0;typeof d[T]=="number"?E=d[T]:E=T/p.length;const A=w/m+E*y;let b=Math.max(g,A);b=Math.min(b,1),a.addColorStop(b,p[T]),g=b}}}else{a=e.createLinearGradient(h,m/2,f+h,m/2);const g=p.length+1;let y=1;for(let _=0;_<p.length;_++){let w;typeof d[_]=="number"?w=d[_]:w=y/g,a.addColorStop(w,p[_]),y++}}return a}function l3(t,e,r,n,s,i,o){const a=r.text,u=r.fontProperties;e.translate(n,s),e.scale(i,i);const h=o.strokeThickness/2,f=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=a3(t,e,o,i,[a],r),e.strokeStyle=o.stroke,o.dropShadow){const m=o.dropShadowColor,p=o.dropShadowBlur*i,d=o.dropShadowDistance*i;e.shadowColor=$e.shared.setValue(m).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=p,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*d,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*d}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,h,f+r.lineHeight-u.descent),o.fill&&e.fillText(a,h,f+r.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Nh(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function Db(t){return Array.from?Array.from(t):t.split("")}function u3(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const s=t[r];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const i=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<i)throw new Error("[BitmapFont]: Invalid character range.");for(let a=i,u=o;a<=u;a++)e.push(String.fromCharCode(a))}else e.push(...Db(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const zi=class On{constructor(e,r,n){var f;const[s]=e.info,[i]=e.common,[o]=e.page,[a]=e.distanceField,u=Ei(o.file),h={};this._ownsTextures=n,this.font=s.face,this.size=s.size,this.lineHeight=i.lineHeight/u,this.chars={},this.pageTextures=h;for(let m=0;m<e.page.length;m++){const{id:p,file:d}=e.page[m];h[p]=r instanceof Array?r[m]:r[d],a!=null&&a.fieldType&&a.fieldType!=="none"&&(h[p].baseTexture.alphaMode=gr.NO_PREMULTIPLIED_ALPHA,h[p].baseTexture.mipmap=Kn.OFF)}for(let m=0;m<e.char.length;m++){const{id:p,page:d}=e.char[m];let{x:g,y,width:_,height:w,xoffset:T,yoffset:E,xadvance:A}=e.char[m];g/=u,y/=u,_/=u,w/=u,T/=u,E/=u,A/=u;const b=new Ee(g+h[d].frame.x/u,y+h[d].frame.y/u,_,w);this.chars[p]={xOffset:T,yOffset:E,xAdvance:A,kerning:{},texture:new se(h[d].baseTexture,b),page:d}}for(let m=0;m<e.kerning.length;m++){let{first:p,second:d,amount:g}=e.kerning[m];p/=u,d/=u,g/=u,this.chars[d]&&(this.chars[d].kerning[p]=g)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((f=a==null?void 0:a.fieldType)==null?void 0:f.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,r,n){let s;if(e instanceof wd)s=e;else{const o=o3(e);if(!o)throw new Error("Unrecognized data format for font.");s=o.parse(e)}r instanceof se&&(r=[r]);const i=new On(s,r,n);return On.available[i.font]=i,i}static uninstall(e){const r=On.available[e];if(!r)throw new Error(`No font found named '${e}'`);r.destroy(),delete On.available[e]}static from(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:i,resolution:o,textureWidth:a,textureHeight:u,...h}=Object.assign({},On.defaultOptions,n),f=u3(s),m=r instanceof Mr?r:new Mr(r),p=a,d=new wd;d.info[0]={face:m.fontFamily,size:m.fontSize},d.common[0]={lineHeight:m.fontSize};let g=0,y=0,_,w,T,E=0;const A=[];for(let I=0;I<f.length;I++){_||(_=le.ADAPTER.createCanvas(),_.width=a,_.height=u,w=_.getContext("2d"),T=new Se(_,{resolution:o,...h}),A.push(new se(T)),d.page.push({id:A.length-1,file:""}));const R=f[I],P=Wi.measureText(R,m,!1,_),k=P.width,M=Math.ceil(P.height),B=Math.ceil((m.fontStyle==="italic"?2:1)*k);if(y>=u-M*o){if(y===0)throw new Error(`[BitmapFont] textureHeight ${u}px is too small (fontFamily: '${m.fontFamily}', fontSize: ${m.fontSize}px, char: '${R}')`);--I,_=null,w=null,T=null,y=0,g=0,E=0;continue}if(E=Math.max(M+P.fontProperties.descent,E),B*o+g>=p){if(g===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${m.fontFamily}', fontSize: ${m.fontSize}px, char: '${R}')`);--I,y+=E*o,y=Math.ceil(y),g=0,E=0;continue}l3(_,w,P,g,y,o,m);const F=Nh(P.text);d.char.push({id:F,page:A.length-1,x:g/o,y:y/o,width:B,height:M,xoffset:0,yoffset:0,xadvance:k-(m.dropShadow?m.dropShadowDistance:0)-(m.stroke?m.strokeThickness:0)}),g+=(B+2*i)*o,g=Math.ceil(g)}if(!(n!=null&&n.skipKerning))for(let I=0,R=f.length;I<R;I++){const P=f[I];for(let k=0;k<R;k++){const M=f[k],B=w.measureText(P).width,F=w.measureText(M).width,N=w.measureText(P+M).width-(B+F);N&&d.kerning.push({first:Nh(P),second:Nh(M),amount:N})}}const b=new On(d,A,!0);return On.available[e]!==void 0&&On.uninstall(e),On.available[e]=b,b}};zi.ALPHA=[["a","z"],["A","Z"]," "],zi.NUMERIC=[["0","9"]],zi.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],zi.ASCII=[[" ","~"]],zi.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:zi.ALPHANUMERIC},zi.available={};let Hi=zi;class c3{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Im=new Me,ow=new qs,Fb=class Nb extends ar{constructor(e,r,n,s=fn.TRIANGLES){super(),this.geometry=e,this.shader=r,this.state=n||Jn.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=le.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===fn.TRIANGLES&&r.length<Nb.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),e.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(r),e.state.set(this.state),e.geometry.bind(this.geometry,r),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const r=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const s=this.transform.worldTransform,i=s.a,o=s.b,a=s.c,u=s.d,h=s.tx,f=s.ty,m=this.vertexData;for(let p=0;p<m.length/2;p++){const d=r[p*2],g=r[p*2+1];m[p*2]=i*d+a*g+h,m[p*2+1]=o*d+u*g+f}if(this._roundPixels){const p=le.RESOLUTION;for(let d=0;d<m.length;++d)m[d]=Math.round(m[d]*p)/p}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new c3(e,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Im);const r=this.geometry.getBuffer("aVertexPosition").data,n=ow.points,s=this.geometry.getIndex().data,i=s.length,o=this.drawMode===4?3:1;for(let a=0;a+2<i;a+=o){const u=s[a]*2,h=s[a+1]*2,f=s[a+2]*2;if(n[0]=r[u],n[1]=r[u+1],n[2]=r[h],n[3]=r[h+1],n[4]=r[f],n[5]=r[f+1],ow.contains(Im.x,Im.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Fb.BATCHABLE_SIZE=100;let hu=Fb;class rf extends ds{constructor(e,r,n){super();const s=new gt(e),i=new gt(r,!0),o=new gt(n,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,ye.FLOAT).addAttribute("aTextureCoord",i,2,!1,ye.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var h3=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,d3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class du extends Qn{constructor(e,r){const n={uSampler:e,alpha:1,uTextureMatrix:Qe.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||mi.from(d3,h3),n),this._colorDirty=!1,this.uvMatrix=new zv(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new $e(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;$e.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}var f3=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,p3=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const aw=[],lw=[],uw=[],Bb=class Ob extends ar{constructor(e,r={}){super();const{align:n,tint:s,maxWidth:i,letterSpacing:o,fontName:a,fontSize:u}=Object.assign({},Ob.styleDefaults,r);if(!Hi.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new $e(s),this._font=void 0,this._fontName=a,this._fontSize=u,this.text=e,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Vn(()=>{this.dirty=!0},this,0,0),this._roundPixels=le.ROUND_PIXELS,this.dirty=!0,this._resolution=le.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var B;const e=Hi.available[this._fontName],r=this.fontSize,n=r/e.size,s=new Me,i=[],o=[],a=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",h=Db(u),f=this._maxWidth*e.size/r,m=e.distanceFieldType==="none"?aw:lw;let p=null,d=0,g=0,y=0,_=-1,w=0,T=0,E=0,A=0;for(let F=0;F<h.length;F++){const N=h[F],U=Nh(N);if(/(?:\s)/.test(N)&&(_=F,w=d,A++),N==="\r"||N===`
`){o.push(d),a.push(-1),g=Math.max(g,d),++y,++T,s.x=0,s.y+=e.lineHeight,p=null,A=0;continue}const H=e.chars[U];if(!H)continue;p&&H.kerning[p]&&(s.x+=H.kerning[p]);const Q=uw.pop()||{texture:se.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Me};Q.texture=H.texture,Q.line=y,Q.charCode=U,Q.position.x=Math.round(s.x+H.xOffset+this._letterSpacing/2),Q.position.y=Math.round(s.y+H.yOffset),Q.prevSpaces=A,i.push(Q),d=Q.position.x+Math.max(H.xAdvance-H.xOffset,H.texture.orig.width),s.x+=H.xAdvance+this._letterSpacing,E=Math.max(E,H.yOffset+H.texture.height),p=U,_!==-1&&f>0&&s.x>f&&(++T,ma(i,1+_-T,1+F-_),F=_,_=-1,o.push(w),a.push(i.length>0?i[i.length-1].prevSpaces:0),g=Math.max(g,w),y++,s.x=0,s.y+=e.lineHeight,p=null,A=0)}const b=h[h.length-1];b!=="\r"&&b!==`
`&&(/(?:\s)/.test(b)&&(d=w),o.push(d),g=Math.max(g,d),a.push(-1));const I=[];for(let F=0;F<=y;F++){let N=0;this._align==="right"?N=g-o[F]:this._align==="center"?N=(g-o[F])/2:this._align==="justify"&&(N=a[F]<0?0:(g-o[F])/a[F]),I.push(N)}const R=i.length,P={},k=[],M=this._activePagesMeshData;m.push(...M);for(let F=0;F<R;F++){const N=i[F].texture,U=N.baseTexture.uid;if(!P[U]){let H=m.pop();if(!H){const W=new rf;let O,V;e.distanceFieldType==="none"?(O=new du(se.EMPTY),V=we.NORMAL):(O=new du(se.EMPTY,{program:mi.from(p3,f3),uniforms:{uFWidth:0}}),V=we.NORMAL_NPM);const G=new hu(W,O);G.blendMode=V,H={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:G,vertices:null,uvs:null,indices:null}}H.index=0,H.indexCount=0,H.vertexCount=0,H.uvsCount=0,H.total=0;const{_textureCache:Q}=this;Q[U]=Q[U]||new se(N.baseTexture),H.mesh.texture=Q[U],H.mesh.tint=this._tintColor.value,k.push(H),P[U]=H}P[U].total++}for(let F=0;F<M.length;F++)k.includes(M[F])||this.removeChild(M[F].mesh);for(let F=0;F<k.length;F++)k[F].mesh.parent!==this&&this.addChild(k[F].mesh);this._activePagesMeshData=k;for(const F in P){const N=P[F],U=N.total;if(!(((B=N.indices)==null?void 0:B.length)>6*U)||N.vertices.length<hu.BATCHABLE_SIZE*2)N.vertices=new Float32Array(4*2*U),N.uvs=new Float32Array(4*2*U),N.indices=new Uint16Array(6*U);else{const H=N.total,Q=N.vertices;for(let W=H*4*2;W<Q.length;W++)Q[W]=0}N.mesh.size=6*U}for(let F=0;F<R;F++){const N=i[F];let U=N.position.x+I[N.line]*(this._align==="justify"?N.prevSpaces:1);this._roundPixels&&(U=Math.round(U));const H=U*n,Q=N.position.y*n,W=N.texture,O=P[W.baseTexture.uid],V=W.frame,G=W._uvs,j=O.index++;O.indices[j*6+0]=0+j*4,O.indices[j*6+1]=1+j*4,O.indices[j*6+2]=2+j*4,O.indices[j*6+3]=0+j*4,O.indices[j*6+4]=2+j*4,O.indices[j*6+5]=3+j*4,O.vertices[j*8+0]=H,O.vertices[j*8+1]=Q,O.vertices[j*8+2]=H+V.width*n,O.vertices[j*8+3]=Q,O.vertices[j*8+4]=H+V.width*n,O.vertices[j*8+5]=Q+V.height*n,O.vertices[j*8+6]=H,O.vertices[j*8+7]=Q+V.height*n,O.uvs[j*8+0]=G.x0,O.uvs[j*8+1]=G.y0,O.uvs[j*8+2]=G.x1,O.uvs[j*8+3]=G.y1,O.uvs[j*8+4]=G.x2,O.uvs[j*8+5]=G.y2,O.uvs[j*8+6]=G.x3,O.uvs[j*8+7]=G.y3}this._textWidth=g*n,this._textHeight=(s.y+e.lineHeight)*n;for(const F in P){const N=P[F];if(this.anchor.x!==0||this.anchor.y!==0){let W=0;const O=this._textWidth*this.anchor.x,V=this._textHeight*this.anchor.y;for(let G=0;G<N.total;G++)N.vertices[W++]-=O,N.vertices[W++]-=V,N.vertices[W++]-=O,N.vertices[W++]-=V,N.vertices[W++]-=O,N.vertices[W++]-=V,N.vertices[W++]-=O,N.vertices[W++]-=V}this._maxLineHeight=E*n;const U=N.mesh.geometry.getBuffer("aVertexPosition"),H=N.mesh.geometry.getBuffer("aTextureCoord"),Q=N.mesh.geometry.getIndex();U.data=N.vertices,H.data=N.uvs,Q.data=N.indices,U.update(),H.update(),Q.update()}for(let F=0;F<i.length;F++)uw.push(i[F]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:r,distanceFieldType:n,size:s}=Hi.available[this._fontName];if(n!=="none"){const{a:i,b:o,c:a,d:u}=this.worldTransform,h=Math.sqrt(i*i+o*o),f=Math.sqrt(a*a+u*u),m=(Math.abs(h)+Math.abs(f))/2,p=this.fontSize/s,d=e._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=m*r*p*d}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Hi.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Hi.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Hi.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:r}=this,n=Hi.available[this._fontName].distanceFieldType==="none"?aw:lw;n.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],n.filter(s=>r[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=se.EMPTY});for(const s in r)r[s].destroy(),delete r[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};Bb.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let m3=Bb;const cw={loader:oe.LoadParser,resolver:oe.ResolveParser,cache:oe.CacheParser,detection:oe.DetectionParser};fe.handle(oe.Asset,t=>{const e=t.ref;Object.entries(cw).filter(([r])=>!!e[r]).forEach(([r,n])=>fe.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(cw).filter(r=>!!e[r]).forEach(r=>fe.remove(e[r]))});class g3{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Oa(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function ys(t,e){const r=t.split("?")[0],n=Ot.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const dn=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||r?e(n):n):t),y0=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};function Lb(t,e,r,n,s){const i=e[r];for(let o=0;o<i.length;o++){const a=i[o];r<e.length-1?Lb(t.replace(n[r],a),e,r+1,n,s):s.push(t.replace(n[r],a))}}function v3(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const s=[];r.forEach(i=>{const o=i.substring(1,i.length-1).split(",");s.push(o)}),Lb(t,s,0,r,n)}else n.push(t);return n}const Sd=t=>!Array.isArray(t);class y3{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=dn(e);let s;for(let a=0;a<this.parsers.length;a++){const u=this.parsers[a];if(u.test(r)){s=u.getCacheableAssets(n,r);break}}s||(s={},n.forEach(a=>{s[a]=r}));const i=Object.keys(s),o={cacheKeys:i,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),i.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==r&&console.warn("[Cache] already has key:",a),this._cache.set(a,s[a])}),r instanceof se){const a=r;n.forEach(u=>{a.baseTexture!==se.EMPTY.baseTexture&&Se.addToCache(a.baseTexture,u),se.addToCache(a,u)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(n=>{this._cache.delete(n)}),r.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const $s=new y3;class x3{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let s=null,i=null;if(r.loadParser&&(i=this._parserHash[r.loadParser],i||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!i){for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];if(h.load&&((o=h.test)!=null&&o.call(h,e,r,this))){i=h;break}}if(!i)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await i.load(e,r,this),n.parser=i;for(let u=0;u<this.parsers.length;u++){const h=this.parsers[u];h.parse&&h.parse&&await((a=h.testParse)==null?void 0:a.call(h,s,r,this))&&(s=await h.parse(s,r,this)||s,n.parser=h)}return s})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const s={},i=Sd(e),o=dn(e,h=>({alias:[h],src:h})),a=o.length,u=o.map(async h=>{const f=Ot.toAbsolute(h.src);if(!s[h.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,h)),s[h.src]=await this.promiseCache[f].promise,r&&r(++n/a)}catch(m){throw delete this.promiseCache[f],delete s[h.src],new Error(`[Loader.load] Failed to load ${f}.
${m}`)}});return await Promise.all(u),i?s[o[0].src]:s}async unload(e){const r=dn(e,n=>({alias:[n],src:n})).map(async n=>{var o,a;const s=Ot.toAbsolute(n.src),i=this.promiseCache[s];if(i){const u=await i.promise;delete this.promiseCache[s],(a=(o=i.parser)==null?void 0:o.unload)==null||a.call(o,u,n,this)}});await Promise.all(r)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var _n=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(_n||{});const _3=".json",w3="application/json",S3={extension:{type:oe.LoadParser,priority:_n.Low},name:"loadJson",test(t){return Oa(t,w3)||ys(t,_3)},async load(t){return await(await le.ADAPTER.fetch(t)).json()}};fe.add(S3);const E3=".txt",T3="text/plain",b3={name:"loadTxt",extension:{type:oe.LoadParser,priority:_n.Low},test(t){return Oa(t,T3)||ys(t,E3)},async load(t){return await(await le.ADAPTER.fetch(t)).text()}};fe.add(b3);const A3=["normal","bold","100","200","300","400","500","600","700","800","900"],C3=[".ttf",".otf",".woff",".woff2"],P3=["font/ttf","font/otf","font/woff","font/woff2"],I3=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function R3(t){const e=Ot.extname(t),r=Ot.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1));let n=r.length>0;for(const i of r)if(!i.match(I3)){n=!1;break}let s=r.join(" ");return n||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const M3=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function k3(t){return M3.test(t)?t:encodeURI(t)}const D3={extension:{type:oe.LoadParser,priority:_n.Low},name:"loadWebFont",test(t){return Oa(t,P3)||ys(t,C3)},async load(t,e){var n,s,i;const r=le.ADAPTER.getFontFaceSet();if(r){const o=[],a=((n=e.data)==null?void 0:n.family)??R3(t),u=((i=(s=e.data)==null?void 0:s.weights)==null?void 0:i.filter(f=>A3.includes(f)))??["normal"],h=e.data??{};for(let f=0;f<u.length;f++){const m=u[f],p=new FontFace(a,`url(${k3(t)})`,{...h,weight:m});await p.load(),r.add(p),o.push(p)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>le.ADAPTER.getFontFaceSet().delete(e))}};fe.add(D3);const F3=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let va=null,x0=class{constructor(){va||(va=URL.createObjectURL(new Blob([F3],{type:"application/javascript"}))),this.worker=new Worker(va)}};x0.revokeObjectURL=function(){va&&(URL.revokeObjectURL(va),va=null)};const N3=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let ya=null;class Ub{constructor(){ya||(ya=URL.createObjectURL(new Blob([N3],{type:"application/javascript"}))),this.worker=new Worker(ya)}}Ub.revokeObjectURL=function(){ya&&(URL.revokeObjectURL(ya),ya=null)};let hw=0,Rm;class B3{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new x0;r.addEventListener("message",n=>{r.terminate(),x0.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Rm===void 0&&(Rm=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Rm&&(this._createdWorkers++,e=new Ub().worker,e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((s,i)=>{this.queue.push({id:e,arguments:r,resolve:s,reject:i})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),n=r.id;this.resolveHash[hw]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:hw++,id:n})}}const dw=new B3;function Tu(t,e,r){t.resource.internal=!0;const n=new se(t),s=()=>{delete e.promiseCache[r],$s.has(r)&&$s.remove(r)};return n.baseTexture.once("destroyed",()=>{r in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),n.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),n}const O3=[".jpeg",".jpg",".png",".webp",".avif"],L3=["image/jpeg","image/png","image/webp","image/avif"];async function U3(t){const e=await le.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const nf={name:"loadTextures",extension:{type:oe.LoadParser,priority:_n.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Oa(t,L3)||ys(t,O3)},async load(t,e,r){var a;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;n?this.config.preferWorkers&&await dw.isImageBitmapSupported()?s=await dw.loadImageBitmap(t):s=await U3(t):s=await new Promise((u,h)=>{const f=new Image;f.crossOrigin=this.config.crossOrigin,f.src=t,f.complete?u(f):(f.onload=()=>u(f),f.onerror=m=>h(m))});const i={...e.data};i.resolution??(i.resolution=Ei(t)),n&&((a=i.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(i.resourceOptions={...i.resourceOptions},i.resourceOptions.ownsImageBitmap=!0);const o=new Se(s,i);return o.resource.src=t,Tu(o,r,t)},unload(t){t.destroy(!0)}};fe.add(nf);const G3=".svg",z3="image/svg+xml",H3={extension:{type:oe.LoadParser,priority:_n.High},name:"loadSVG",test(t){return Oa(t,z3)||ys(t,G3)},async testParse(t){return h0.test(t)},async parse(t,e,r){var i;const n=new h0(t,(i=e==null?void 0:e.data)==null?void 0:i.resourceOptions);await n.load();const s=new Se(n,{resolution:Ei(t),...e==null?void 0:e.data});return s.resource.src=e.src,Tu(s,r,e.src)},async load(t,e){return(await le.ADAPTER.fetch(t)).text()},unload:nf.unload};fe.add(H3);const $3=[".mp4",".m4v",".webm",".ogv"],V3=["video/mp4","video/webm","video/ogg"],j3={name:"loadVideo",extension:{type:oe.LoadParser,priority:_n.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return Oa(t,V3)||ys(t,$3)},async load(t,e,r){var o;let n;const s=await(await le.ADAPTER.fetch(t)).blob(),i=URL.createObjectURL(s);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},u=new Ib(i,a);await u.load();const h=new Se(u,{alphaMode:await gk(),resolution:Ei(t),...e==null?void 0:e.data});h.resource.src=t,n=Tu(h,r,t),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(i)})}catch(a){throw URL.revokeObjectURL(i),a}return n},unload(t){t.destroy(!0)}};fe.add(j3);class W3{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(e){const{alias:r,name:n,src:s,srcs:i}=e;return dn(r||n||s||i,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];Array.isArray(r)?r.forEach(s=>{const i=s.src??s.srcs,o=s.alias??s.name;let a;if(typeof o=="string"){const u=this._createBundleAssetId(e,o);n.push(u),a=[o,u]}else{const u=o.map(h=>this._createBundleAssetId(e,h));n.push(...u),a=[...o,...u]}this.add({...s,alias:a,src:i})}):Object.keys(r).forEach(s=>{const i=[s,this._createBundleAssetId(e,s)];if(typeof r[s]=="string")this.add({alias:i,src:r[s]});else if(Array.isArray(r[s]))this.add({alias:i,src:r[s]});else{const o=r[s],a=o.src??o.srcs;this.add({...o,alias:i,src:Array.isArray(a)?a:[a]})}n.push(...i)}),this._bundles[e]=n}add(e,r,n,s,i){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Ie("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:r,data:n,format:s,loadParser:i})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=u=>{this.hasKey(u)&&console.warn(`[Resolver] already has key: ${u} overwriting`)},dn(o).forEach(u=>{const{src:h,srcs:f}=u;let{data:m,format:p,loadParser:d}=u;const g=dn(h||f).map(w=>typeof w=="string"?v3(w):Array.isArray(w)?w:[w]),y=this.getAlias(u);Array.isArray(y)?y.forEach(a):a(y);const _=[];g.forEach(w=>{w.forEach(T=>{let E={};if(typeof T!="object"){E.src=T;for(let A=0;A<this._parsers.length;A++){const b=this._parsers[A];if(b.test(T)){E=b.parse(T);break}}}else m=T.data??m,p=T.format??p,d=T.loadParser??d,E={...E,...T};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${E.src}`);E=this.buildResolvedAsset(E,{aliases:y,data:m,format:p,loadParser:d}),_.push(E)})}),y.forEach(w=>{this._assetMap[w]=_})})}resolveBundle(e){const r=Sd(e);e=dn(e);const n={};return e.forEach(s=>{const i=this._bundles[s];if(i){const o=this.resolve(i),a={};for(const u in o){const h=o[u];a[this._extractAssetIdFromBundle(s,u)]=h}n[s]=a}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const s in r)n[s]=r[s].src;return n}return r.src}resolve(e){const r=Sd(e);e=dn(e);const n={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let i=this._assetMap[s];const o=i[0],a=this._getPreferredOrder(i);a==null||a.priority.forEach(u=>{a.params[u].forEach(h=>{const f=i.filter(m=>m[u]?m[u]===h:!1);f.length&&(i=f)})}),this._resolverHash[s]=i[0]??o}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});n[s]=this._resolverHash[s]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[0],s=this._preferredOrder.find(i=>i.params.format.includes(n.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}buildResolvedAsset(e,r){const{aliases:n,data:s,loadParser:i,format:o}=r;return(this._basePath||this._rootPath)&&(e.src=Ot.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=i??e.loadParser,e.format=o??e.format??Ot.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class X3{constructor(){this._detections=[],this._initialized=!1,this.resolver=new W3,this.loader=new x3,this.cache=$s,this._backgroundLoader=new g3(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var i,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const r=((i=e.texturePreference)==null?void 0:i.resolution)??1,n=typeof r=="number"?[r]:r,s=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,n,s,i){this.resolver.add(e,r,n,s,i)}async load(e,r){this._initialized||await this.init();const n=Sd(e),s=dn(e).map(a=>{if(typeof a!="string"){const u=this.resolver.getAlias(a);return u.some(h=>!this.resolver.hasKey(h))&&this.add(a),Array.isArray(u)?u[0]:u}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),i=this.resolver.resolve(s),o=await this._mapLoadToResolve(i,r);return n?o[s[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const s=this.resolver.resolveBundle(e),i={},o=Object.keys(s);let a=0,u=0;const h=()=>{r==null||r(++a/u)},f=o.map(m=>{const p=s[m];return u+=Object.keys(p).length,this._mapLoadToResolve(p,h).then(d=>{i[m]=d})});return await Promise.all(f),n?i[e[0]]:i}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return $s.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=$s.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=Object.values(e),s=Object.keys(e);this._backgroundLoader.active=!1;const i=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,u)=>{const h=i[a.src],f=[a.src];a.alias&&f.push(...a.alias),o[s[u]]=h,$s.set(f,h)}),o}async unload(e){this._initialized||await this.init();const r=dn(e).map(s=>typeof s!="string"?s.src:s),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=dn(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(s=>this._unloadFromResolved(r[s]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{$s.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?r=await n.add(r):e.skipDetections||(r=await n.remove(r));return r=r.filter((n,s)=>r.indexOf(n)===s),r}get detections(){return this._detections}get preferWorkers(){return nf.config.preferWorkers}set preferWorkers(e){Ie("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const qc=new X3;fe.handleByList(oe.LoadParser,qc.loader.parsers).handleByList(oe.ResolveParser,qc.resolver.parsers).handleByList(oe.CacheParser,qc.cache.parsers).handleByList(oe.DetectionParser,qc.detections);const Y3={extension:oe.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof se),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((s,i)=>{r[n+(i===0?"":i+1)]=s})}),r}};fe.add(Y3);async function Gb(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const Q3={extension:{type:oe.DetectionParser,priority:1},test:async()=>Gb("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};fe.add(Q3);const K3={extension:{type:oe.DetectionParser,priority:0},test:async()=>Gb("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};fe.add(K3);const fw=["png","jpg","jpeg"],Z3={extension:{type:oe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...fw],remove:async t=>t.filter(e=>!fw.includes(e))};fe.add(Z3);const q3="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Vv(t){return q3?!1:document.createElement("video").canPlayType(t)!==""}const J3={extension:{type:oe.DetectionParser,priority:0},test:async()=>Vv("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};fe.add(J3);const eF={extension:{type:oe.DetectionParser,priority:0},test:async()=>Vv("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};fe.add(eF);const tF={extension:{type:oe.DetectionParser,priority:0},test:async()=>Vv("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};fe.add(tF);const rF={extension:oe.ResolveParser,test:nf.test,parse:t=>{var e;return{resolution:parseFloat(((e=le.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:Ot.extname(t).slice(1),src:t}}};fe.add(rF);const nF=[".xml",".fnt"],iF={extension:{type:oe.LoadParser,priority:_n.Normal},name:"loadBitmapFont",test(t){return nF.includes(Ot.extname(t).toLowerCase())},async testParse(t){return Fh.test(t)||v0.test(t)},async parse(t,e,r){const n=Fh.test(t)?Fh.parse(t):v0.parse(t),{src:s}=e,{page:i}=n,o=[];for(let h=0;h<i.length;++h){const f=i[h].file;let m=Ot.join(Ot.dirname(s),f);m=y0(m,s),o.push(m)}const a=await r.load(o),u=o.map(h=>a[h]);return Hi.install(n,u,!0)},async load(t,e){return(await le.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};fe.add(iF);const Ed={build(t){const e=t.points;let r,n,s,i,o,a;if(t.type===$t.CIRC){const g=t.shape;r=g.x,n=g.y,o=a=g.radius,s=i=0}else if(t.type===$t.ELIP){const g=t.shape;r=g.x,n=g.y,o=g.width,a=g.height,s=i=0}else{const g=t.shape,y=g.width/2,_=g.height/2;r=g.x+y,n=g.y+_,o=a=Math.max(0,Math.min(g.radius,Math.min(y,_))),s=y-o,i=_-a}if(!(o>=0&&a>=0&&s>=0&&i>=0)){e.length=0;return}const u=Math.ceil(2.3*Math.sqrt(o+a)),h=u*8+(s?4:0)+(i?4:0);if(e.length=h,h===0)return;if(u===0){e.length=8,e[0]=e[6]=r+s,e[1]=e[3]=n+i,e[2]=e[4]=r-s,e[5]=e[7]=n-i;return}let f=0,m=u*4+(s?2:0)+2,p=m,d=h;{const g=s+o,y=i,_=r+g,w=r-g,T=n+y;if(e[f++]=_,e[f++]=T,e[--m]=T,e[--m]=w,i){const E=n-y;e[p++]=w,e[p++]=E,e[--d]=E,e[--d]=_}}for(let g=1;g<u;g++){const y=Math.PI/2*(g/u),_=s+Math.cos(y)*o,w=i+Math.sin(y)*a,T=r+_,E=r-_,A=n+w,b=n-w;e[f++]=T,e[f++]=A,e[--m]=A,e[--m]=E,e[p++]=E,e[p++]=b,e[--d]=b,e[--d]=T}{const g=s,y=i+a,_=r+g,w=r-g,T=n+y,E=n-y;e[f++]=_,e[f++]=T,e[--d]=E,e[--d]=_,s&&(e[f++]=w,e[f++]=T,e[--d]=E,e[--d]=w)}},triangulate(t,e){const r=t.points,n=e.points,s=e.indices;if(r.length===0)return;let i=n.length/2;const o=i;let a,u;if(t.type!==$t.RREC){const f=t.shape;a=f.x,u=f.y}else{const f=t.shape;a=f.x+f.width/2,u=f.y+f.height/2}const h=t.matrix;n.push(t.matrix?h.a*a+h.c*u+h.tx:a,t.matrix?h.b*a+h.d*u+h.ty:u),i++,n.push(r[0],r[1]);for(let f=2;f<r.length;f+=2)n.push(r[f],r[f+1]),s.push(i++,o,i);s.push(o+1,o,i)}};function pw(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let s=0,i=t[r-2],o=t[r-1];s<r;s+=2){const a=t[s],u=t[s+1];n+=(a-i)*(u+o),i=a,o=u}if(!e&&n>0||e&&n<=0){const s=r/2;for(let i=s+s%2;i<r;i+=2){const o=r-i-2,a=r-i-1,u=i,h=i+1;[t[o],t[u]]=[t[u],t[o]],[t[a],t[h]]=[t[h],t[a]]}}}const zb={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,s=e.points,i=e.indices;if(r.length>=6){pw(r,!1);const o=[];for(let h=0;h<n.length;h++){const f=n[h];pw(f.points,!0),o.push(r.length/2),r=r.concat(f.points)}const a=O2(r,o,2);if(!a)return;const u=s.length/2;for(let h=0;h<a.length;h+=3)i.push(a[h]+u),i.push(a[h+1]+u),i.push(a[h+2]+u);for(let h=0;h<r.length;h++)s.push(r[h])}}},sF={build(t){const e=t.shape,r=e.x,n=e.y,s=e.width,i=e.height,o=t.points;o.length=0,s>=0&&i>=0&&o.push(r,n,r+s,n,r+s,n+i,r,n+i)},triangulate(t,e){const r=t.points,n=e.points;if(r.length===0)return;const s=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},oF={build(t){Ed.build(t)},triangulate(t,e){Ed.triangulate(t,e)}};var $r=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))($r||{}),es=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(es||{});const Ma={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class mw{static curveTo(e,r,n,s,i,o){const a=o[o.length-2],u=o[o.length-1]-r,h=a-e,f=s-r,m=n-e,p=Math.abs(u*m-h*f);if(p<1e-8||i===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const d=u*u+h*h,g=f*f+m*m,y=u*f+h*m,_=i*Math.sqrt(d)/p,w=i*Math.sqrt(g)/p,T=_*y/d,E=w*y/g,A=_*m+w*h,b=_*f+w*u,I=h*(w+T),R=u*(w+T),P=m*(_+E),k=f*(_+E),M=Math.atan2(R-b,I-A),B=Math.atan2(k-b,P-A);return{cx:A+e,cy:b+r,radius:i,startAngle:M,endAngle:B,anticlockwise:h*f>m*u}}static arc(e,r,n,s,i,o,a,u,h){const f=a-o,m=Ma._segmentsCount(Math.abs(f)*i,Math.ceil(Math.abs(f)/md)*40),p=f/(m*2),d=p*2,g=Math.cos(p),y=Math.sin(p),_=m-1,w=_%1/_;for(let T=0;T<=_;++T){const E=T+w*T,A=p+o+d*E,b=Math.cos(A),I=-Math.sin(A);h.push((g*b+y*I)*i+n,(g*-I+y*b)*i+s)}}}class aF{constructor(){this.reset()}begin(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class jv{static curveLength(e,r,n,s,i,o,a,u){let h=0,f=0,m=0,p=0,d=0,g=0,y=0,_=0,w=0,T=0,E=0,A=e,b=r;for(let I=1;I<=10;++I)f=I/10,m=f*f,p=m*f,d=1-f,g=d*d,y=g*d,_=y*e+3*g*f*n+3*d*m*i+p*a,w=y*r+3*g*f*s+3*d*m*o+p*u,T=A-_,E=b-w,A=_,b=w,h+=Math.sqrt(T*T+E*E);return h}static curveTo(e,r,n,s,i,o,a){const u=a[a.length-2],h=a[a.length-1];a.length-=2;const f=Ma._segmentsCount(jv.curveLength(u,h,e,r,n,s,i,o));let m=0,p=0,d=0,g=0,y=0;a.push(u,h);for(let _=1,w=0;_<=f;++_)w=_/f,m=1-w,p=m*m,d=p*m,g=w*w,y=g*w,a.push(d*u+3*p*w*e+3*m*g*n+y*i,d*h+3*p*w*r+3*m*g*s+y*o)}}function gw(t,e,r,n,s,i,o,a){const u=t-r*s,h=e-n*s,f=t+r*i,m=e+n*i;let p,d;o?(p=n,d=-r):(p=-n,d=r);const g=u+p,y=h+d,_=f+p,w=m+d;return a.push(g,y,_,w),2}function ks(t,e,r,n,s,i,o,a){const u=r-t,h=n-e;let f=Math.atan2(u,h),m=Math.atan2(s-t,i-e);a&&f<m?f+=Math.PI*2:!a&&f>m&&(m+=Math.PI*2);let p=f;const d=m-f,g=Math.abs(d),y=Math.sqrt(u*u+h*h),_=(15*g*Math.sqrt(y)/Math.PI>>0)+1,w=d/_;if(p+=w,a){o.push(t,e,r,n);for(let T=1,E=p;T<_;T++,E+=w)o.push(t,e,t+Math.sin(E)*y,e+Math.cos(E)*y);o.push(t,e,s,i)}else{o.push(r,n,t,e);for(let T=1,E=p;T<_;T++,E+=w)o.push(t+Math.sin(E)*y,e+Math.cos(E)*y,t,e);o.push(s,i,t,e)}return _*2}function lF(t,e){const r=t.shape;let n=t.points||r.points.slice();const s=e.closePointEps;if(n.length===0)return;const i=t.lineStyle,o=new Me(n[0],n[1]),a=new Me(n[n.length-2],n[n.length-1]),u=r.type!==$t.POLY||r.closeStroke,h=Math.abs(o.x-a.x)<s&&Math.abs(o.y-a.y)<s;if(u){n=n.slice(),h&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const W=(o.x+a.x)*.5,O=(a.y+o.y)*.5;n.unshift(W,O),n.push(W,O)}const f=e.points,m=n.length/2;let p=n.length;const d=f.length/2,g=i.width/2,y=g*g,_=i.miterLimit*i.miterLimit;let w=n[0],T=n[1],E=n[2],A=n[3],b=0,I=0,R=-(T-A),P=w-E,k=0,M=0,B=Math.sqrt(R*R+P*P);R/=B,P/=B,R*=g,P*=g;const F=i.alignment,N=(1-F)*2,U=F*2;u||(i.cap===es.ROUND?p+=ks(w-R*(N-U)*.5,T-P*(N-U)*.5,w-R*N,T-P*N,w+R*U,T+P*U,f,!0)+2:i.cap===es.SQUARE&&(p+=gw(w,T,R,P,N,U,!0,f))),f.push(w-R*N,T-P*N,w+R*U,T+P*U);for(let W=1;W<m-1;++W){w=n[(W-1)*2],T=n[(W-1)*2+1],E=n[W*2],A=n[W*2+1],b=n[(W+1)*2],I=n[(W+1)*2+1],R=-(T-A),P=w-E,B=Math.sqrt(R*R+P*P),R/=B,P/=B,R*=g,P*=g,k=-(A-I),M=E-b,B=Math.sqrt(k*k+M*M),k/=B,M/=B,k*=g,M*=g;const O=E-w,V=T-A,G=E-b,j=I-A,Z=O*G+V*j,pe=V*G-j*O,ue=pe<0;if(Math.abs(pe)<.001*Math.abs(Z)){f.push(E-R*N,A-P*N,E+R*U,A+P*U),Z>=0&&(i.join===$r.ROUND?p+=ks(E,A,E-R*N,A-P*N,E-k*N,A-M*N,f,!1)+4:p+=2,f.push(E-k*U,A-M*U,E+k*N,A+M*N));continue}const Te=(-R+w)*(-P+A)-(-R+E)*(-P+T),ve=(-k+b)*(-M+A)-(-k+E)*(-M+I),be=(O*ve-G*Te)/pe,Le=(j*Te-V*ve)/pe,wt=(be-E)*(be-E)+(Le-A)*(Le-A),Ke=E+(be-E)*N,Ae=A+(Le-A)*N,He=E-(be-E)*U,De=A-(Le-A)*U,Xt=Math.min(O*O+V*V,G*G+j*j),ut=ue?N:U,wn=Xt+ut*ut*y,_s=wt<=wn;let ti=i.join;if(ti===$r.MITER&&wt/y>_&&(ti=$r.BEVEL),_s)switch(ti){case $r.MITER:{f.push(Ke,Ae,He,De);break}case $r.BEVEL:{ue?f.push(Ke,Ae,E+R*U,A+P*U,Ke,Ae,E+k*U,A+M*U):f.push(E-R*N,A-P*N,He,De,E-k*N,A-M*N,He,De),p+=2;break}case $r.ROUND:{ue?(f.push(Ke,Ae,E+R*U,A+P*U),p+=ks(E,A,E+R*U,A+P*U,E+k*U,A+M*U,f,!0)+4,f.push(Ke,Ae,E+k*U,A+M*U)):(f.push(E-R*N,A-P*N,He,De),p+=ks(E,A,E-R*N,A-P*N,E-k*N,A-M*N,f,!1)+4,f.push(E-k*N,A-M*N,He,De));break}}else{switch(f.push(E-R*N,A-P*N,E+R*U,A+P*U),ti){case $r.MITER:{ue?f.push(He,De,He,De):f.push(Ke,Ae,Ke,Ae),p+=2;break}case $r.ROUND:{ue?p+=ks(E,A,E+R*U,A+P*U,E+k*U,A+M*U,f,!0)+2:p+=ks(E,A,E-R*N,A-P*N,E-k*N,A-M*N,f,!1)+2;break}}f.push(E-k*N,A-M*N,E+k*U,A+M*U),p+=2}}w=n[(m-2)*2],T=n[(m-2)*2+1],E=n[(m-1)*2],A=n[(m-1)*2+1],R=-(T-A),P=w-E,B=Math.sqrt(R*R+P*P),R/=B,P/=B,R*=g,P*=g,f.push(E-R*N,A-P*N,E+R*U,A+P*U),u||(i.cap===es.ROUND?p+=ks(E-R*(N-U)*.5,A-P*(N-U)*.5,E-R*N,A-P*N,E+R*U,A+P*U,f,!1)+2:i.cap===es.SQUARE&&(p+=gw(E,A,R,P,N,U,!1,f)));const H=e.indices,Q=Ma.epsilon*Ma.epsilon;for(let W=d;W<p+d-2;++W)w=f[W*2],T=f[W*2+1],E=f[(W+1)*2],A=f[(W+1)*2+1],b=f[(W+2)*2],I=f[(W+2)*2+1],!(Math.abs(w*(A-I)+E*(I-T)+b*(T-A))<Q)&&H.push(W,W+1,W+2)}function uF(t,e){let r=0;const n=t.shape,s=t.points||n.points,i=n.type!==$t.POLY||n.closeStroke;if(s.length===0)return;const o=e.points,a=e.indices,u=s.length/2,h=o.length/2;let f=h;for(o.push(s[0],s[1]),r=1;r<u;r++)o.push(s[r*2],s[r*2+1]),a.push(f,f+1),f++;i&&a.push(f,h)}function vw(t,e){t.lineStyle.native?uF(t,e):lF(t,e)}class Wv{static curveLength(e,r,n,s,i,o){const a=e-2*n+i,u=r-2*s+o,h=2*n-2*e,f=2*s-2*r,m=4*(a*a+u*u),p=4*(a*h+u*f),d=h*h+f*f,g=2*Math.sqrt(m+p+d),y=Math.sqrt(m),_=2*m*y,w=2*Math.sqrt(d),T=p/y;return(_*g+y*p*(g-w)+(4*d*m-p*p)*Math.log((2*y+T+g)/(T+w)))/(4*_)}static curveTo(e,r,n,s,i){const o=i[i.length-2],a=i[i.length-1],u=Ma._segmentsCount(Wv.curveLength(o,a,e,r,n,s));let h=0,f=0;for(let m=1;m<=u;++m){const p=m/u;h=o+(e-o)*p,f=a+(r-a)*p,i.push(h+(e+(n-e)*p-h)*p,f+(r+(s-r)*p-f)*p)}}}const Mm={[$t.POLY]:zb,[$t.CIRC]:Ed,[$t.ELIP]:Ed,[$t.RECT]:sF,[$t.RREC]:oF},yw=[],Jc=[];class Td{constructor(e,r=null,n=null,s=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=s,this.type=e.type}clone(){return new Td(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const No=new Me,Hb=class $b extends XT{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new _d,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Jc.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r.reset(),yw.push(r)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,r=null,n=null,s=null){const i=new Td(e,r,n,s);return this.graphicsData.push(i),this.dirty++,this}drawHole(e,r=null){if(!this.graphicsData.length)return null;const n=new Td(e,null,null,r),s=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=s.lineStyle,s.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const r=this.graphicsData;for(let n=0;n<r.length;++n){const s=r[n];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,No):No.copyFrom(e),s.shape.contains(No.x,No.y))){let i=!1;if(s.holes){for(let o=0;o<s.holes.length;o++)if(s.holes[o].shape.contains(No.x,No.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,r=this.graphicsData;let n=null,s=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],s=n.style);for(let u=this.shapeIndex;u<r.length;u++){this.shapeIndex++;const h=r[u],f=h.fillStyle,m=h.lineStyle;Mm[h.type].build(h),h.matrix&&this.transformPoints(h.points,h.matrix),(f.visible||m.visible)&&this.processHoles(h.holes);for(let p=0;p<2;p++){const d=p===0?f:m;if(!d.visible)continue;const g=d.texture.baseTexture,y=this.indices.length,_=this.points.length/2;g.wrapMode=vi.REPEAT,p===0?this.processFill(h):this.processLine(h);const w=this.points.length/2-_;w!==0&&(n&&!this._compareStyles(s,d)&&(n.end(y,_),n=null),n||(n=yw.pop()||new aF,n.begin(d,y,_),this.batches.push(n),s=d),this.addUvs(this.points,e,d.texture,_,w,d.matrix))}}const i=this.indices.length,o=this.points.length/2;if(n&&n.end(i,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,r){return!(!e||!r||e.texture.baseTexture!==r.texture.baseTexture||e.color+e.alpha!==r.color+r.alpha||!!e.native!=!!r.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,r=this.graphicsData.length;e<r;e++){const n=this.graphicsData[e],s=n.fillStyle,i=n.lineStyle;if(s&&!s.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let r=0,n=e.length;r<n;r++){const s=e[r];for(let i=0;i<s.size;i++){const o=s.start+i;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let r=0;r<e.length;r++)if(e[r].style.native)return!1;return this.points.length<$b.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Se._globalBatch;for(let m=0;m<this.drawCalls.length;m++)this.drawCalls[m].texArray.clear(),Jc.push(this.drawCalls[m]);this.drawCalls.length=0;const r=this.colors,n=this.textureIds;let s=Jc.pop();s||(s=new t0,s.texArray=new s0),s.texArray.count=0,s.start=0,s.size=0,s.type=fn.TRIANGLES;let i=0,o=null,a=0,u=!1,h=fn.TRIANGLES,f=0;this.drawCalls.push(s);for(let m=0;m<this.batches.length;m++){const p=this.batches[m],d=8,g=p.style,y=g.texture.baseTexture;u!==!!g.native&&(u=!!g.native,h=u?fn.LINES:fn.TRIANGLES,o=null,i=d,e++),o!==y&&(o=y,y._batchEnabled!==e&&(i===d&&(e++,i=0,s.size>0&&(s=Jc.pop(),s||(s=new t0,s.texArray=new s0),this.drawCalls.push(s)),s.start=f,s.size=0,s.texArray.count=0,s.type=h),y.touched=1,y._batchEnabled=e,y._batchLocation=i,y.wrapMode=vi.REPEAT,s.texArray.elements[s.texArray.count++]=y,i++)),s.size+=p.size,f+=p.size,a=y._batchLocation,this.addColors(r,g.color,g.alpha,p.attribSize,p.attribStart),this.addTextureIds(n,a,p.attribSize,p.attribStart)}Se._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,r=this.uvs,n=this.colors,s=this.textureIds,i=new ArrayBuffer(e.length*3*4),o=new Float32Array(i),a=new Uint32Array(i);let u=0;for(let h=0;h<e.length/2;h++)o[u++]=e[h*2],o[u++]=e[h*2+1],o[u++]=r[h*2],o[u++]=r[h*2+1],a[u++]=n[h],o[u++]=s[h];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?zb.triangulate(e,this):Mm[e.type].triangulate(e,this)}processLine(e){vw(e,this);for(let r=0;r<e.holes.length;r++)vw(e.holes[r],this)}processHoles(e){for(let r=0;r<e.length;r++){const n=e[r];Mm[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,r){for(let n=0;n<e.length/2;n++){const s=e[n*2],i=e[n*2+1];e[n*2]=r.a*s+r.c*i+r.tx,e[n*2+1]=r.b*s+r.d*i+r.ty}}addColors(e,r,n,s,i=0){const o=$e.shared.setValue(r).toLittleEndianNumber(),a=$e.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,i+s);for(let u=0;u<s;u++)e[i+u]=a}addTextureIds(e,r,n,s=0){e.length=Math.max(e.length,s+n);for(let i=0;i<n;i++)e[s+i]=r}addUvs(e,r,n,s,i,o=null){let a=0;const u=r.length,h=n.frame;for(;a<i;){let m=e[(s+a)*2],p=e[(s+a)*2+1];if(o){const d=o.a*m+o.c*p+o.tx;p=o.b*m+o.d*p+o.ty,m=d}a++,r.push(m/h.width,p/h.height)}const f=n.baseTexture;(h.width<f.width||h.height<f.height)&&this.adjustUvs(r,n,u,i)}adjustUvs(e,r,n,s){const i=r.baseTexture,o=1e-6,a=n+s*2,u=r.frame,h=u.width/i.width,f=u.height/i.height;let m=u.x/u.width,p=u.y/u.height,d=Math.floor(e[n]+o),g=Math.floor(e[n+1]+o);for(let y=n+2;y<a;y+=2)d=Math.min(d,Math.floor(e[y]+o)),g=Math.min(g,Math.floor(e[y+1]+o));m-=d,p-=g;for(let y=n;y<a;y+=2)e[y]=(e[y]+m)*h,e[y+1]=(e[y+1]+p)*f}};Hb.BATCHABLE_SIZE=100;let cF=Hb;class sf{constructor(){this.color=16777215,this.alpha=1,this.texture=se.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new sf;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=se.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Xv extends sf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=es.BUTT,this.join=$r.MITER,this.miterLimit=10}clone(){const e=new Xv;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=es.BUTT,this.join=$r.MITER,this.miterLimit=10}}const km={},_0=class Bh extends ar{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new sf,this._lineStyle=new Xv,this._matrix=null,this._holeMode=!1,this.state=Jn.for2d(),this._geometry=e||new cF,this._geometry.refCount++,this._transformID=-1,this._tintColor=new $e(16777215),this.blendMode=we.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Bh(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,r=0,n,s=.5,i=!1){return typeof e=="number"&&(e={width:e,color:r,alpha:n,alignment:s,native:i}),this.lineTextureStyle(e)}lineTextureStyle(e){const r={width:0,texture:se.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:es.BUTT,join:$r.MITER,miterLimit:10};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new qs,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[r-2],e[r-1]))}else this.currentPath=new qs,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,r){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=r,this}lineTo(e,r){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,s=n[n.length-2],i=n[n.length-1];return(s!==e||i!==r)&&n.push(e,r),this}_initCurve(e=0,r=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,r]):this.moveTo(e,r)}quadraticCurveTo(e,r,n,s){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),Wv.curveTo(e,r,n,s,i),this}bezierCurveTo(e,r,n,s,i,o){return this._initCurve(),jv.curveTo(e,r,n,s,i,o,this.currentPath.points),this}arcTo(e,r,n,s,i){this._initCurve(e,r);const o=this.currentPath.points,a=mw.curveTo(e,r,n,s,i,o);if(a){const{cx:u,cy:h,radius:f,startAngle:m,endAngle:p,anticlockwise:d}=a;this.arc(u,h,f,m,p,d)}return this}arc(e,r,n,s,i,o=!1){if(s===i)return this;if(!o&&i<=s?i+=md:o&&s<=i&&(s+=md),i-s===0)return this;const a=e+Math.cos(s)*n,u=r+Math.sin(s)*n,h=this._geometry.closePointEps;let f=this.currentPath?this.currentPath.points:null;if(f){const m=Math.abs(f[f.length-2]-a),p=Math.abs(f[f.length-1]-u);m<h&&p<h||f.push(a,u)}else this.moveTo(a,u),f=this.currentPath.points;return mw.arc(a,u,e,r,n,s,i,o,f),this}beginFill(e=0,r){return this.beginTextureFill({texture:se.WHITE,color:e,alpha:r})}normalizeColor(e){const r=$e.shared.setValue(e.color??0);e.color=r.toNumber(),e.alpha??(e.alpha=r.alpha)}beginTextureFill(e){const r={texture:se.WHITE,color:16777215,matrix:null};e=Object.assign(r,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,r,n,s){return this.drawShape(new Ee(e,r,n,s))}drawRoundedRect(e,r,n,s,i){return this.drawShape(new qd(e,r,n,s,i))}drawCircle(e,r,n){return this.drawShape(new Kd(e,r,n))}drawEllipse(e,r,n,s){return this.drawShape(new Zd(e,r,n,s))}drawPolygon(...e){let r,n=!0;const s=e[0];s.points?(n=s.closeStroke,r=s.points):Array.isArray(e[0])?r=e[0]:r=e;const i=new qs(r);return i.closeStroke=n,this.drawShape(i),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===$t.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const r=this._geometry;r.updateBatches(),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,r=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let s=0;s<n;s++){const i=e.batches[s],o=i.style.color,a=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),h=new Uint16Array(e.indicesUint16.buffer,i.start*2,i.size),f={vertexData:a,blendMode:r,indices:h,uvs:u,_batchRGB:$e.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[s]=f}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let r=0,n=this.batches.length;r<n;r++){const s=this.batches[r];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const r=this._resolveDirectShader(e),n=this._geometry,s=this.worldAlpha,i=r.uniforms,o=n.drawCalls;i.translationMatrix=this.transform.worldTransform,$e.shared.setValue(this._tintColor).premultiply(s).toArray(i.tint),e.shader.bind(r),e.geometry.bind(n,r),e.state.set(this.state);for(let a=0,u=o.length;a<u;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,r){const{texArray:n,type:s,size:i,start:o}=r,a=n.count;for(let u=0;u<a;u++)e.texture.bind(n.elements[u],u);e.geometry.draw(s,i,o)}_resolveDirectShader(e){let r=this.shader;const n=this.pluginName;if(!r){if(!km[n]){const{maxTextures:s}=e.plugins[n],i=new Int32Array(s);for(let u=0;u<s;u++)i[u]=u;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Qe,default:yn.from({uSamplers:i},!0)},a=e.plugins[n]._shader.program;km[n]=new Qn(a,o)}r=km[n]}return r}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:r,minY:n,maxX:s,maxY:i}=e.bounds;this._bounds.addFrame(this.transform,r,n,s,i)}containsPoint(e){return this.worldTransform.applyInverse(e,Bh._TEMP_POINT),this._geometry.containsPoint(Bh._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const r=this.batches[e];r._tintRGB=$e.shared.setValue(this._tintColor).multiply(r._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const r=this.transform.worldTransform,n=r.a,s=r.b,i=r.c,o=r.d,a=r.tx,u=r.ty,h=this._geometry.points,f=this.vertexData;let m=0;for(let p=0;p<h.length;p+=2){const d=h[p],g=h[p+1];f[m++]=n*d+i*g+a,f[m++]=o*g+s*d+u}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};_0.curves=Ma,_0._TEMP_POINT=new Me;let $l=_0;class hF extends rf{constructor(e=100,r=100,n=10,s=10){super(),this.segWidth=n,this.segHeight=s,this.width=e,this.height=r,this.build()}build(){const e=this.segWidth*this.segHeight,r=[],n=[],s=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,u=this.height/o;for(let f=0;f<e;f++){const m=f%this.segWidth,p=f/this.segWidth|0;r.push(m*a,p*u),n.push(m/i,p/o)}const h=i*o;for(let f=0;f<h;f++){const m=f%i,p=f/i|0,d=p*this.segWidth+m,g=p*this.segWidth+m+1,y=(p+1)*this.segWidth+m,_=(p+1)*this.segWidth+m+1;s.push(d,g,y,g,_,y)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class dF extends rf{constructor(e=200,r,n=0){super(new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6)),this.points=r,this._width=e,this.textureScale=n,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const r=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),s=this.getIndex();if(e.length<1)return;r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));const i=n.data,o=s.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;let a=0,u=e[0];const h=this._width*this.textureScale,f=e.length;for(let p=0;p<f;p++){const d=p*4;if(this.textureScale>0){const g=u.x-e[p].x,y=u.y-e[p].y,_=Math.sqrt(g*g+y*y);u=e[p],a+=_/h}else a=p/(f-1);i[d]=a,i[d+1]=0,i[d+2]=a,i[d+3]=1}let m=0;for(let p=0;p<f-1;p++){const d=p*2;o[m++]=d,o[m++]=d+1,o[m++]=d+2,o[m++]=d+2,o[m++]=d+1,o[m++]=d+3}n.update(),s.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let r=e[0],n,s=0,i=0;const o=this.buffers[0].data,a=e.length,u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let h=0;h<a;h++){const f=e[h],m=h*4;h<e.length-1?n=e[h+1]:n=f,i=-(n.x-r.x),s=n.y-r.y;const p=Math.sqrt(s*s+i*i);p<1e-6?(s=0,i=0):(s/=p,i/=p,s*=u,i*=u),o[m]=f.x+s,o[m+1]=f.y+i,o[m+2]=f.x-s,o[m+3]=f.y-i,r=f}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class fF extends hu{constructor(e,r,n){const s=new hF(e.width,e.height,r,n),i=new du(se.WHITE);super(s,i),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:r,height:n}=this.shader.texture;this.autoResize&&(e.width!==r||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const eh=10;class pF extends fF{constructor(e,r,n,s,i){var o,a,u,h;super(se.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=r??((o=e.defaultBorders)==null?void 0:o.left)??eh,this._rightWidth=s??((a=e.defaultBorders)==null?void 0:a.right)??eh,this._topHeight=n??((u=e.defaultBorders)==null?void 0:u.top)??eh,this._bottomHeight=i??((h=e.defaultBorders)==null?void 0:h.bottom)??eh,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,r=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*r,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*r,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,r=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*r,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*r,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,s=this._height>n?1:this._height/n;return Math.min(r,s)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,r=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const n=1/this._origWidth,s=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=n*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-n*this._rightWidth,r[9]=r[11]=r[13]=r[15]=s*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class mF extends hu{constructor(e=se.EMPTY,r,n,s,i){const o=new rf(r,n,s);o.getBuffer("aVertexPosition").static=!1;const a=new du(e);super(o,a,null,i),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class gF extends hu{constructor(e,r,n=0){const s=new dF(e.height,r,n),i=new du(e);n>0&&(e.baseTexture.wrapMode=vi.REPEAT),super(s,i),this.autoUpdate=!0}_render(e){const r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),super._render(e)}}class vF extends ar{constructor(e=1500,r,n=16384,s=!1){super();const i=16384;n>i&&(n=i),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=we.NORMAL,this.autoResize=s,this.roundPixels=!0,this.baseTexture=null,this.setProperties(r),this._tintColor=new $e(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const r=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class xw{constructor(e,r,n){this.geometry=new ds,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<e.length;++s){let i=e[s];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||ye.FLOAT,offset:i.offset},r[s]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new gt(Rk(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new gt(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=s,s+=a.size,this.staticStride+=a.size}const i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new gt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===ye.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===ye.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,r,n){for(let s=0;s<this.dynamicProperties.length;s++){const i=this.dynamicProperties[s];i.uploadFunction(e,r,n,i.type===ye.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,n){for(let s=0;s<this.staticProperties.length;s++){const i=this.staticProperties[s];i.uploadFunction(e,r,n,i.type===ye.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var yF=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,xF=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Vb extends ef{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Qe,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:ye.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Qn.from(xF,yF,{}),this.state=Jn.for2d()}render(e){const r=e.children,n=e._maxSize,s=e._batchSize,i=this.renderer;let o=r.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const u=r[0]._texture.baseTexture,h=u.alphaMode>0;this.state.blendMode=VT(e.blendMode,h),i.state.set(this.state);const f=i.gl,m=e.worldTransform.copyTo(this.tempMatrix);m.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=m.toArray(!0),this.shader.uniforms.uColor=$e.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,h).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);let p=!1;for(let d=0,g=0;d<o;d+=s,g+=1){let y=o-d;y>s&&(y=s),g>=a.length&&a.push(this._generateOneMoreBuffer(e));const _=a[g];_.uploadDynamic(r,d,y);const w=e._bufferUpdateIDs[g]||0;p=p||_._updateID<w,p&&(_._updateID=e._updateID,_.uploadStatic(r,d,y)),i.geometry.bind(_.geometry),f.drawElements(f.TRIANGLES,y*6,f.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],n=e._maxSize,s=e._batchSize,i=e._properties;for(let o=0;o<n;o+=s)r.push(new xw(this.properties,i,s));return r}_generateOneMoreBuffer(e){const r=e._batchSize,n=e._properties;return new xw(this.properties,n,r)}uploadVertices(e,r,n,s,i,o){let a=0,u=0,h=0,f=0;for(let m=0;m<n;++m){const p=e[r+m],d=p._texture,g=p.scale.x,y=p.scale.y,_=d.trim,w=d.orig;_?(u=_.x-p.anchor.x*w.width,a=u+_.width,f=_.y-p.anchor.y*w.height,h=f+_.height):(a=w.width*(1-p.anchor.x),u=w.width*-p.anchor.x,h=w.height*(1-p.anchor.y),f=w.height*-p.anchor.y),s[o]=u*g,s[o+1]=f*y,s[o+i]=a*g,s[o+i+1]=f*y,s[o+i*2]=a*g,s[o+i*2+1]=h*y,s[o+i*3]=u*g,s[o+i*3+1]=h*y,o+=i*4}}uploadPosition(e,r,n,s,i,o){for(let a=0;a<n;a++){const u=e[r+a].position;s[o]=u.x,s[o+1]=u.y,s[o+i]=u.x,s[o+i+1]=u.y,s[o+i*2]=u.x,s[o+i*2+1]=u.y,s[o+i*3]=u.x,s[o+i*3+1]=u.y,o+=i*4}}uploadRotation(e,r,n,s,i,o){for(let a=0;a<n;a++){const u=e[r+a].rotation;s[o]=u,s[o+i]=u,s[o+i*2]=u,s[o+i*3]=u,o+=i*4}}uploadUvs(e,r,n,s,i,o){for(let a=0;a<n;++a){const u=e[r+a]._texture._uvs;u?(s[o]=u.x0,s[o+1]=u.y0,s[o+i]=u.x1,s[o+i+1]=u.y1,s[o+i*2]=u.x2,s[o+i*2+1]=u.y2,s[o+i*3]=u.x3,s[o+i*3+1]=u.y3,o+=i*4):(s[o]=0,s[o+1]=0,s[o+i]=0,s[o+i+1]=0,s[o+i*2]=0,s[o+i*2+1]=0,s[o+i*3]=0,s[o+i*3+1]=0,o+=i*4)}}uploadTint(e,r,n,s,i,o){for(let a=0;a<n;++a){const u=e[r+a],h=$e.shared.setValue(u._tintRGB).toPremultiplied(u.alpha,u.texture.baseTexture.alphaMode>0);s[o]=h,s[o+i]=h,s[o+i*2]=h,s[o+i*3]=h,o+=i*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Vb.extension={name:"particle",type:oe.RendererPlugin};fe.add(Vb);class fu extends ei{constructor(e,r=!0){super(e[0]instanceof se?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=r,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Nt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Nt.shared.add(this.update,this,fs.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const r=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=r/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const r=[];for(let n=0;n<e.length;++n)r.push(se.from(e[n]));return new fu(r)}static fromImages(e){const r=[];for(let n=0;n<e.length;++n)r.push(se.from(e[n]));return new fu(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof se)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Nt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Nt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const gl=new Me;class Yv extends ei{constructor(e,r=100,n=100){super(e),this.tileTransform=new Jd,this._width=r,this._height=n,this.uvMatrix=this.texture.uvMatrix||new zv(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,r=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,r,n,s)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ee),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,gl);const r=this._width,n=this._height,s=-r*this.anchor._x;if(gl.x>=s&&gl.x<s+r){const i=-n*this.anchor._y;if(gl.y>=i&&gl.y<i+n)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,r){const n=e instanceof se?e:se.from(e,r);return new Yv(n,r.width,r.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var _F=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,wF=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,SF=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,_w=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,EF=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const th=new Qe;class jb extends ef{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new nb,this.state=Jn.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=Qn.from(_w,EF,r),this.shader=e.context.webGLVersion>1?Qn.from(wF,_F,r):Qn.from(_w,SF,r)}render(e){const r=this.renderer,n=this.quad;let s=n.vertices;s[0]=s[6]=e._width*-e.anchor.x,s[1]=s[3]=e._height*-e.anchor.y,s[2]=s[4]=e._width*(1-e.anchor.x),s[5]=s[7]=e._height*(1-e.anchor.y);const i=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;s=n.uvs,s[0]=s[6]=-i,s[1]=s[3]=-o,s[2]=s[4]=1-i,s[5]=s[7]=1-o,n.invalidate();const a=e._texture,u=a.baseTexture,h=u.alphaMode>0,f=e.tileTransform.localTransform,m=e.uvMatrix;let p=u.isPowerOfTwo&&a.frame.width===u.width&&a.frame.height===u.height;p&&(u._glTextures[r.CONTEXT_UID]?p=u.wrapMode!==vi.CLAMP:u.wrapMode===vi.CLAMP&&(u.wrapMode=vi.REPEAT));const d=p?this.simpleShader:this.shader,g=a.width,y=a.height,_=e._width,w=e._height;th.set(f.a*g/_,f.b*g/w,f.c*y/_,f.d*y/w,f.tx/_,f.ty/w),th.invert(),p?th.prepend(m.mapCoord):(d.uniforms.uMapCoord=m.mapCoord.toArray(!0),d.uniforms.uClampFrame=m.uClampFrame,d.uniforms.uClampOffset=m.uClampOffset),d.uniforms.uTransform=th.toArray(!0),d.uniforms.uColor=$e.shared.setValue(e.tint).premultiply(e.worldAlpha,h).toArray(d.uniforms.uColor),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,r.shader.bind(d),r.geometry.bind(n),this.state.blendMode=VT(e.blendMode,h),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}jb.extension={name:"tilingSprite",type:oe.RendererPlugin};fe.add(jb);const Wb=class w0{constructor(e){this.stage=new ar,e=Object.assign({forceCanvas:!1},e),this.renderer=VD(e),w0._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,r){const n=w0._plugins.slice(0);n.reverse(),n.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Wb._plugins=[];let of=Wb;fe.handleByList(oe.Application,of._plugins);class Xb{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:i}=this._resizeTo;r=s,n=i}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Xb.extension=oe.Application;fe.add(Xb);var Yb={exports:{}},TF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",bF=TF,AF=bF;function Qb(){}function Kb(){}Kb.resetWarningCache=Qb;var CF=function(){function t(n,s,i,o,a,u){if(u!==AF){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Kb,resetWarningCache:Qb};return r.PropTypes=r,r};Yb.exports=CF();var PF=Yb.exports;const Xe=mu(PF);function Ir(t){return Ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(t)}function Zb(t){var e=function(r,n){if(Ir(r)!=="object"||r===null)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var i=s.call(r,n||"default");if(Ir(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(t,"string");return Ir(e)==="symbol"?e:String(e)}function mt(t,e,r){return(e=Zb(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dm(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bi(t){return function(e){if(Array.isArray(e))return Dm(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return Dm(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dm(e,r):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dt(t,e){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s]}var IF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function RF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var MF=function(t){return t==null};function Al(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=bi(t);else{if(t===null||Ir(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(r){return!MF(r)&&!isNaN(r)}).map(Number)}function ww(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Fm(t){return t instanceof Me||t instanceof Vn}var bd=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function Nm(t,e,r){if(Fm(t[e])&&Fm(r))t[e].copyFrom(r);else if(Fm(t[e])){var n=Al(r);dt(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(r),Ir(r)),t[e].set(n.shift(),n.shift())}else t[e]=r}var Bo,qb=function(t){var e,r=t;if(!Array.isArray(r)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");r=Object.keys(t)}var n={};return r.forEach(function(s){n[s]=!0}),function(s){return n[s]!==void 0}},Jb=function(t){return function(){return!t.apply(void 0,arguments)}},S0="children",kF=(mt(Bo={},S0,!0),mt(Bo,"parent",!0),mt(Bo,"worldAlpha",!0),mt(Bo,"worldTransform",!0),mt(Bo,"worldVisible",!0),Bo),E0={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Zn=function(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var u,h;a==null||(u=a.__reactpixi)===null||u===void 0||(h=u.root)===null||h===void 0||h.emit("__REACT_PIXI_REQUEST_RENDER__")})},s=function(a,u){if(r.hasOwnProperty(a))return dt(u.typeofs.some(function(h){return Ir(r[a])===h})||u.instanceofs.some(function(h){return r[a]instanceof h}),"".concat(t," ").concat(a," prop is invalid")),r[a]};if(r.texture)return dt(r.texture instanceof se,"".concat(t," texture needs to be typeof `Texture`")),r.texture;var i=s("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||s("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||s("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,se]});dt(!!i,"".concat(t," could not get texture from props"));var o=se.from(i);return o.__reactpixi={root:e},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},DF=Jb(qb([].concat(bi(Object.keys(kF)),bi(bd))));function qn(t,e,r){var n=!1;if(dt(tt.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",Ir(t)),!r.ignoreEvents)for(var s=typeof t.removeListener=="function",i=typeof t.on=="function",o=0;o<bd.length;o++){var a=bd[o];e[a]!==r[a]&&(n=!0,typeof e[a]=="function"&&s&&t.removeListener(a,e[a]),typeof r[a]=="function"&&i&&t.on(a,r[a]))}var u=Object.keys(r||{});if(r.overwriteProps){for(var h=0;h<u.length;h++){var f=u[h];e[f]!==r[f]&&(n=!0,Nm(t,f,r[f]))}return n}for(var m=u.filter(DF),p=0;p<m.length;p++){var d=m[p],g=r[d];r[d]!==e[d]&&(n=!0),g!==void 0?Nm(t,d,g):d in E0?(console.warn("setting default value: ".concat(d,", from: ").concat(t[d]," to: ").concat(g," for"),t),n=!0,Nm(t,d,E0[d])):console.warn("ignoring prop: ".concat(d,", from ").concat(t[d]," to ").concat(g," for"),t)}return n}var FF=function(t,e){var r=e.text,n=e.style;return new m3(r,n)},NF=function(){return new ar};function xs(t,e){if(t==null)return{};var r,n,s=function(o,a){if(o==null)return{};var u,h,f={},m=Object.keys(o);for(h=0;h<m.length;h++)u=m[h],a.indexOf(u)>=0||(f[u]=o[u]);return f}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}var BF=["draw","geometry"],OF=function(t,e){var r=e.geometry;dt(!r||r instanceof $l,"Graphics geometry needs to be a `Graphics`");var n=r?new $l(r.geometry):new $l;return n.applyProps=function(s,i,o){var a=o.draw;o.geometry;var u=qn(s,i,xs(o,BF));return i.draw!==a&&typeof a=="function"&&(u=!0,a.call(n,n)),u},n},LF=["image","texture"],UF=function(t,e){var r=e.leftWidth,n=r===void 0?10:r,s=e.topHeight,i=s===void 0?10:s,o=e.rightWidth,a=o===void 0?10:o,u=e.bottomHeight,h=u===void 0?10:u,f=Zn("NineSlicePlane",t,e),m=new pF(f,n,i,a,h);return m.applyProps=function(p,d,g){var y=g.image,_=g.texture,w=qn(p,d,xs(g,LF));return(y||_)&&(_!==d.texture&&(w=!0),p.texture=Zn("NineSlicePlane",t,g)),w},m};function Sw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function rh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Sw(Object(r),!0).forEach(function(n){mt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var GF=function(t,e){var r=e.maxSize,n=r===void 0?1500:r,s=e.batchSize,i=s===void 0?16384:s,o=e.autoResize,a=o!==void 0&&o,u=rh(rh({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),h=rh(rh({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),f=new vF(n,u,i,a);return f.willUnmount=function(m,p,d){m.destroy(h)},f},zF=["image","texture"],HF=function(t,e){var r=new ei(Zn("Sprite",t,e));return r.applyProps=function(n,s,i){var o=i.image,a=i.texture,u=qn(n,s,xs(i,zF));return(a&&s.texture!==i.texture||o&&s.image!==i.image)&&(s.texture!==i.texture&&(u=!0),n.texture=Zn("Sprite",t,i)),u},r},$F=["textures","isPlaying","initialFrame","images"],VF=function(t,e){var r=e.textures,n=e.images,s=e.isPlaying,i=s===void 0||s,o=e.initialFrame,a=function(h){return h.map(function(f){return dt(f instanceof se||(f==null?void 0:f.texture),"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),f})},u=n?fu.fromImages(n):new fu(a(r));return u[i?"gotoAndPlay":"gotoAndStop"](o||0),u.applyProps=function(h,f,m){var p=m.textures,d=m.isPlaying,g=m.initialFrame,y=m.images,_=qn(h,f,xs(m,$F));if(y&&f.images!==y){for(var w=[],T=0;T<y.length;++T)w.push(se.from(y[T]));h.textures=w,_=!0}if(p&&f.textures!==p&&(h.textures=a(p),_=!0),d!==f.isPlaying||g!==f.initialFrame){var E=typeof g=="number"?g:u.currentFrame||0;u[d?"gotoAndPlay":"gotoAndStop"](E),_=!0}return _},u},jF=function(t,e){var r=e.text,n=r===void 0?"":r,s=e.style,i=s===void 0?{}:s,o=e.isSprite,a=new $v(n,i);return o?(a.updateText(),new ei(a.texture)):a},WF=["tileScale","tilePosition","image","texture"],XF=function(t,e){var r=e.width,n=r===void 0?100:r,s=e.height,i=s===void 0?100:s,o=Zn("TilingSprite",t,e),a=new Yv(o,n,i);return a.applyProps=function(u,h,f){var m=f.tileScale,p=f.tilePosition,d=f.image,g=f.texture,y=qn(u,h,xs(f,WF));if(p){var _,w=Al(p);(_=u.tilePosition).set.apply(_,bi(w)),y=!ww(Al(h.tilePosition),w)||y}if(m){var T,E=Al(m);(T=u.tileScale).set.apply(T,bi(E)),y=!ww(Al(h.tileScale),E)||y}return(d||g)&&(g!==h.texture&&(y=!0),u.texture=Zn("Sprite",t,f)),y},a},YF=["image","texture"],QF=function(t,e){var r=Zn("Mesh",t,e),n=e.vertices,s=e.uvs,i=e.indices,o=e.drawMode,a=o===void 0?fn.TRIANGLES:o,u=new mF(r,n,s,i,a);return u.applyProps=function(h,f,m){var p=m.image,d=m.texture,g=qn(h,f,xs(m,YF));return(p||d)&&(d!==f.texture&&(g=!0),h.texture=Zn("Mesh",t,m)),g},u},KF=["image","texture"],ZF=function(t,e){var r=Zn("SimpleRope",t,e),n=e.points,s=new gF(r,n);return s.applyProps=function(i,o,a){var u=a.image,h=a.texture,f=xs(a,KF);dt(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<Point>");var m=qn(i,o,f);return(u||h)&&(h!==o.texture&&(m=!0),i.texture=Zn("SimpleRope",t,a)),m},s},qF=Object.freeze({__proto__:null,BitmapText:FF,Container:NF,Graphics:OF,NineSlicePlane:UF,ParticleContainer:GF,Sprite:HF,Text:jF,TilingSprite:XF,SimpleMesh:QF,SimpleRope:ZF,AnimatedSprite:VF});function Ew(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Tw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ew(Object(r),!0).forEach(function(n){mt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var _r={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},JF=Object.keys(_r).reduce(function(t,e){return Tw(Tw({},t),{},mt({},e,qF[e]))},{}),eA={};function eN(t,e){return dt(!!t,"Expect type to be defined, got `%s`",t),dt(!_r[t],"Component `%s` could not be created, already exists in default components.",t),eA[t]=e,t}var bw,Aw,Cw,Pw,T0={},b0={},tN={get exports(){return b0},set exports(t){b0=t}},Iw={};function rN(){return Aw||(Aw=1,tN.exports=(bw||(bw=1,function(t){function e(O,V){var G=O.length;O.push(V);e:for(;0<G;){var j=G-1>>>1,Z=O[j];if(!(0<s(Z,V)))break e;O[j]=V,O[G]=Z,G=j}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var V=O[0],G=O.pop();if(G!==V){O[0]=G;e:for(var j=0,Z=O.length,pe=Z>>>1;j<pe;){var ue=2*(j+1)-1,Te=O[ue],ve=ue+1,be=O[ve];if(0>s(Te,G))ve<Z&&0>s(be,Te)?(O[j]=be,O[ve]=G,j=ve):(O[j]=Te,O[ue]=G,j=ue);else{if(!(ve<Z&&0>s(be,G)))break e;O[j]=be,O[ve]=G,j=ve}}}return V}function s(O,V){var G=O.sortIndex-V.sortIndex;return G!==0?G:O.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],f=1,m=null,p=3,d=!1,g=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function E(O){for(var V=r(h);V!==null;){if(V.callback===null)n(h);else{if(!(V.startTime<=O))break;n(h),V.sortIndex=V.expirationTime,e(u,V)}V=r(h)}}function A(O){if(y=!1,E(O),!g)if(r(u)!==null)g=!0,Q(b);else{var V=r(h);V!==null&&W(A,V.startTime-O)}}function b(O,V){g=!1,y&&(y=!1,w(k),k=-1),d=!0;var G=p;try{for(E(V),m=r(u);m!==null&&(!(m.expirationTime>V)||O&&!F());){var j=m.callback;if(typeof j=="function"){m.callback=null,p=m.priorityLevel;var Z=j(m.expirationTime<=V);V=t.unstable_now(),typeof Z=="function"?m.callback=Z:m===r(u)&&n(u),E(V)}else n(u);m=r(u)}if(m!==null)var pe=!0;else{var ue=r(h);ue!==null&&W(A,ue.startTime-V),pe=!1}return pe}finally{m=null,p=G,d=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,R=!1,P=null,k=-1,M=5,B=-1;function F(){return!(t.unstable_now()-B<M)}function N(){if(P!==null){var O=t.unstable_now();B=O;var V=!0;try{V=P(!0,O)}finally{V?I():(R=!1,P=null)}}else R=!1}if(typeof T=="function")I=function(){T(N)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,H=U.port2;U.port1.onmessage=N,I=function(){H.postMessage(null)}}else I=function(){_(N,0)};function Q(O){P=O,R||(R=!0,I())}function W(O,V){k=_(function(){O(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){g||d||(g=!0,Q(b))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var G=p;p=V;try{return O()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=p;p=O;try{return V()}finally{p=G}},t.unstable_scheduleCallback=function(O,V,G){var j=t.unstable_now();switch(G=typeof G=="object"&&G!==null&&typeof(G=G.delay)=="number"&&0<G?j+G:j,O){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return O={id:f++,callback:V,priorityLevel:O,startTime:G,expirationTime:Z=G+Z,sortIndex:-1},G>j?(O.sortIndex=G,e(h,O),r(u)===null&&O===r(h)&&(y?(w(k),k=-1):y=!0,W(A,G-j))):(O.sortIndex=Z,e(u,O),g||d||(g=!0,Q(b))),O},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(O){var V=p;return function(){var G=p;p=V;try{return O.apply(this,arguments)}finally{p=G}}}}(Iw)),Iw)),b0}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function nN(){return Pw||(Pw=1,Cw=function(t){var e={},r=jn,n=rN(),s=Object.assign;function i(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,v=1;v<arguments.length;v++)c+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),u=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),A=Symbol.iterator;function b(l){return l===null||typeof l!="object"?null:typeof(l=A&&l[A]||l["@@iterator"])=="function"?l:null}function I(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case h:return"Fragment";case u:return"Portal";case m:return"Profiler";case f:return"StrictMode";case y:return"Suspense";case _:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case d:return(l.displayName||"Context")+".Consumer";case p:return(l._context.displayName||"Context")+".Provider";case g:var c=l.render;return(l=l.displayName)||(l=(l=c.displayName||c.name||"")!==""?"ForwardRef("+l+")":"ForwardRef"),l;case w:return(c=l.displayName||null)!==null?c:I(l.type)||"Memo";case T:c=l._payload,l=l._init;try{return I(l(c))}catch{}}return null}function R(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=(l=c.render).displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I(c);case 8:return c===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function P(l){var c=l,v=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do 4098&(c=l).flags&&(v=c.return),l=c.return;while(l)}return c.tag===3?v:null}function k(l){if(P(l)!==l)throw Error(i(188))}function M(l){var c=l.alternate;if(!c){if((c=P(l))===null)throw Error(i(188));return c!==l?null:l}for(var v=l,x=c;;){var S=v.return;if(S===null)break;var C=S.alternate;if(C===null){if((x=S.return)!==null){v=x;continue}break}if(S.child===C.child){for(C=S.child;C;){if(C===v)return k(S),l;if(C===x)return k(S),c;C=C.sibling}throw Error(i(188))}if(v.return!==x.return)v=S,x=C;else{for(var D=!1,L=S.child;L;){if(L===v){D=!0,v=S,x=C;break}if(L===x){D=!0,x=S,v=C;break}L=L.sibling}if(!D){for(L=C.child;L;){if(L===v){D=!0,v=C,x=S;break}if(L===x){D=!0,x=C,v=S;break}L=L.sibling}if(!D)throw Error(i(189))}}if(v.alternate!==x)throw Error(i(190))}if(v.tag!==3)throw Error(i(188));return v.stateNode.current===v?l:c}function B(l){return(l=M(l))!==null?F(l):null}function F(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=F(l);if(c!==null)return c;l=l.sibling}return null}function N(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){if(l.tag!==4){var c=N(l);if(c!==null)return c}l=l.sibling}return null}var U,H=Array.isArray,Q=t.getPublicInstance,W=t.getRootHostContext,O=t.getChildHostContext,V=t.prepareForCommit,G=t.resetAfterCommit,j=t.createInstance,Z=t.appendInitialChild,pe=t.finalizeInitialChildren,ue=t.prepareUpdate,Te=t.shouldSetTextContent,ve=t.createTextInstance,be=t.scheduleTimeout,Le=t.cancelTimeout,wt=t.noTimeout,Ke=t.isPrimaryRenderer,Ae=t.supportsMutation,He=t.supportsPersistence,De=t.supportsHydration,Xt=t.getInstanceFromNode,ut=t.preparePortalMount,wn=t.getCurrentEventPriority,_s=t.detachDeletedInstance,ti=t.supportsMicrotasks,Pu=t.scheduleMicrotask,Ci=t.supportsTestSelectors,Iu=t.findFiberRoot,ho=t.getBoundingRect,uf=t.getTextContent,ws=t.isHiddenSubtree,fo=t.matchAccessibilityRole,po=t.setFocusIfFocusable,IA=t.setupIntersectionObserver,RA=t.appendChild,MA=t.appendChildToContainer,kA=t.commitTextUpdate,DA=t.commitMount,FA=t.commitUpdate,NA=t.insertBefore,BA=t.insertInContainerBefore,OA=t.removeChild,LA=t.removeChildFromContainer,Kv=t.resetTextContent,UA=t.hideInstance,GA=t.hideTextInstance,zA=t.unhideInstance,HA=t.unhideTextInstance,$A=t.clearContainer,VA=t.cloneInstance,Zv=t.createContainerChildSet,qv=t.appendChildToContainerChildSet,jA=t.finalizeContainerChildren,cf=t.replaceContainerChildren,Jv=t.cloneHiddenInstance,ey=t.cloneHiddenTextInstance,WA=t.canHydrateInstance,XA=t.canHydrateTextInstance,YA=t.canHydrateSuspenseInstance,ty=t.isSuspenseInstancePending,hf=t.isSuspenseInstanceFallback,QA=t.getSuspenseInstanceFallbackErrorDetails,KA=t.registerSuspenseInstanceRetry,Ru=t.getNextHydratableSibling,ZA=t.getFirstHydratableChild,qA=t.getFirstHydratableChildWithinContainer,JA=t.getFirstHydratableChildWithinSuspenseInstance,eC=t.hydrateInstance,tC=t.hydrateTextInstance,rC=t.hydrateSuspenseInstance,nC=t.getNextHydratableInstanceAfterSuspenseInstance,iC=t.commitHydratedContainer,sC=t.commitHydratedSuspenseInstance,oC=t.clearSuspenseBoundary,aC=t.clearSuspenseBoundaryFromContainer,lC=t.shouldDeleteUnhydratedTailInstances,uC=t.didNotMatchHydratedContainerTextInstance,cC=t.didNotMatchHydratedTextInstance;function La(l){if(U===void 0)try{throw Error()}catch(v){var c=v.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+l}var df=!1;function ff(l,c){if(!l||df)return"";df=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Y){var x=Y}Reflect.construct(l,[],c)}else{try{c.call()}catch(Y){x=Y}l.call(c.prototype)}else{try{throw Error()}catch(Y){x=Y}l()}}catch(Y){if(Y&&x&&typeof Y.stack=="string"){for(var S=Y.stack.split(`
`),C=x.stack.split(`
`),D=S.length-1,L=C.length-1;1<=D&&0<=L&&S[D]!==C[L];)L--;for(;1<=D&&0<=L;D--,L--)if(S[D]!==C[L]){if(D!==1||L!==1)do if(D--,0>--L||S[D]!==C[L]){var $=`
`+S[D].replace(" at new "," at ");return l.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",l.displayName)),$}while(1<=D&&0<=L);break}}}finally{df=!1,Error.prepareStackTrace=v}return(l=l?l.displayName||l.name:"")?La(l):""}var hC=Object.prototype.hasOwnProperty,pf=[],mo=-1;function Pi(l){return{current:l}}function Ze(l){0>mo||(l.current=pf[mo],pf[mo]=null,mo--)}function Ve(l,c){mo++,pf[mo]=l.current,l.current=c}var Ii={},Yt=Pi(Ii),cr=Pi(!1),Ss=Ii;function go(l,c){var v=l.type.contextTypes;if(!v)return Ii;var x=l.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var S,C={};for(S in v)C[S]=c[S];return x&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=C),C}function wr(l){return(l=l.childContextTypes)!=null}function mf(){Ze(cr),Ze(Yt)}function ry(l,c,v){if(Yt.current!==Ii)throw Error(i(168));Ve(Yt,c),Ve(cr,v)}function ny(l,c,v){var x=l.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return v;for(var S in x=x.getChildContext())if(!(S in c))throw Error(i(108,R(l)||"Unknown",S));return s({},v,x)}function Mu(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Ii,Ss=Yt.current,Ve(Yt,l),Ve(cr,cr.current),!0}function iy(l,c,v){var x=l.stateNode;if(!x)throw Error(i(169));v?(l=ny(l,c,Ss),x.__reactInternalMemoizedMergedChildContext=l,Ze(cr),Ze(Yt),Ve(Yt,l)):Ze(cr),Ve(cr,v)}var qr=Math.clz32?Math.clz32:function(l){return(l>>>=0)===0?32:31-(dC(l)/fC|0)|0},dC=Math.log,fC=Math.LN2,gf=64,vf=4194304;function Ua(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&l;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&l;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function ku(l,c){var v=l.pendingLanes;if(v===0)return 0;var x=0,S=l.suspendedLanes,C=l.pingedLanes,D=268435455&v;if(D!==0){var L=D&~S;L!==0?x=Ua(L):(C&=D)!==0&&(x=Ua(C))}else(D=v&~S)!==0?x=Ua(D):C!==0&&(x=Ua(C));if(x===0)return 0;if(c!==0&&c!==x&&!(c&S)&&((S=x&-x)>=(C=c&-c)||S===16&&4194240&C))return c;if(4&x&&(x|=16&v),(c=l.entangledLanes)!==0)for(l=l.entanglements,c&=x;0<c;)S=1<<(v=31-qr(c)),x|=l[v],c&=~S;return x}function pC(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;default:return-1}}function yf(l){return(l=-1073741825&l.pendingLanes)!==0?l:1073741824&l?1073741824:0}function sy(){var l=gf;return!(4194240&(gf<<=1))&&(gf=64),l}function xf(l){for(var c=[],v=0;31>v;v++)c.push(l);return c}function Ga(l,c,v){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),(l=l.eventTimes)[c=31-qr(c)]=v}function _f(l,c){var v=l.entangledLanes|=c;for(l=l.entanglements;v;){var x=31-qr(v),S=1<<x;S&c|l[x]&c&&(l[x]|=c),v&=~S}}var Be=0;function oy(l){return 1<(l&=-l)?4<l?268435455&l?16:536870912:4:1}var wf=n.unstable_scheduleCallback,ay=n.unstable_cancelCallback,mC=n.unstable_shouldYield,gC=n.unstable_requestPaint,Ct=n.unstable_now,Sf=n.unstable_ImmediatePriority,vC=n.unstable_UserBlockingPriority,ly=n.unstable_NormalPriority,yC=n.unstable_IdlePriority,Du=null,Sn=null,Jr=typeof Object.is=="function"?Object.is:function(l,c){return l===c&&(l!==0||1/l==1/c)||l!=l&&c!=c},ri=null,Fu=!1,Ef=!1;function uy(l){ri===null?ri=[l]:ri.push(l)}function En(){if(!Ef&&ri!==null){Ef=!0;var l=0,c=Be;try{var v=ri;for(Be=1;l<v.length;l++){var x=v[l];do x=x(!0);while(x!==null)}ri=null,Fu=!1}catch(S){throw ri!==null&&(ri=ri.slice(l+1)),wf(Sf,En),S}finally{Be=c,Ef=!1}}return null}var vo=[],yo=0,Nu=null,Bu=0,Fr=[],Nr=0,Es=null,Tn=1,ni="";function Ts(l,c){vo[yo++]=Bu,vo[yo++]=Nu,Nu=l,Bu=c}function cy(l,c,v){Fr[Nr++]=Tn,Fr[Nr++]=ni,Fr[Nr++]=Es,Es=l;var x=Tn;l=ni;var S=32-qr(x)-1;x&=~(1<<S),v+=1;var C=32-qr(c)+S;if(30<C){var D=S-S%5;C=(x&(1<<D)-1).toString(32),x>>=D,S-=D,Tn=1<<32-qr(c)+S|v<<S|x,ni=C+l}else Tn=1<<C|v<<S|x,ni=l}function Tf(l){l.return!==null&&(Ts(l,1),cy(l,1,0))}function bf(l){for(;l===Nu;)Nu=vo[--yo],vo[yo]=null,Bu=vo[--yo],vo[yo]=null;for(;l===Es;)Es=Fr[--Nr],Fr[Nr]=null,ni=Fr[--Nr],Fr[Nr]=null,Tn=Fr[--Nr],Fr[Nr]=null}var Sr=null,Br=null,qe=!1,za=!1,en=null;function hy(l,c){var v=zr(5,null,null,0);v.elementType="DELETED",v.stateNode=c,v.return=l,(c=l.deletions)===null?(l.deletions=[v],l.flags|=16):c.push(v)}function dy(l,c){switch(l.tag){case 5:return(c=WA(c,l.type,l.pendingProps))!==null&&(l.stateNode=c,Sr=l,Br=ZA(c),!0);case 6:return(c=XA(c,l.pendingProps))!==null&&(l.stateNode=c,Sr=l,Br=null,!0);case 13:if((c=YA(c))!==null){var v=Es!==null?{id:Tn,overflow:ni}:null;return l.memoizedState={dehydrated:c,treeContext:v,retryLane:1073741824},(v=zr(18,null,null,0)).stateNode=c,v.return=l,l.child=v,Sr=l,Br=null,!0}return!1;default:return!1}}function Af(l){return(1&l.mode)!=0&&(128&l.flags)==0}function Cf(l){if(qe){var c=Br;if(c){var v=c;if(!dy(l,c)){if(Af(l))throw Error(i(418));c=Ru(v);var x=Sr;c&&dy(l,c)?hy(x,v):(l.flags=-4097&l.flags|2,qe=!1,Sr=l)}}else{if(Af(l))throw Error(i(418));l.flags=-4097&l.flags|2,qe=!1,Sr=l}}}function fy(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Sr=l}function Ou(l){if(!De||l!==Sr)return!1;if(!qe)return fy(l),qe=!0,!1;if(l.tag!==3&&(l.tag!==5||lC(l.type)&&!Te(l.type,l.memoizedProps))){var c=Br;if(c){if(Af(l))throw py(),Error(i(418));for(;c;)hy(l,c),c=Ru(c)}}if(fy(l),l.tag===13){if(!De)throw Error(i(316));if(!(l=(l=l.memoizedState)!==null?l.dehydrated:null))throw Error(i(317));Br=nC(l)}else Br=Sr?Ru(l.stateNode):null;return!0}function py(){for(var l=Br;l;)l=Ru(l)}function xo(){De&&(Br=Sr=null,za=qe=!1)}function Pf(l){en===null?en=[l]:en.push(l)}var xC=o.ReactCurrentBatchConfig;function Lu(l,c){if(Jr(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var v=Object.keys(l),x=Object.keys(c);if(v.length!==x.length)return!1;for(x=0;x<v.length;x++){var S=v[x];if(!hC.call(c,S)||!Jr(l[S],c[S]))return!1}return!0}function _C(l){switch(l.tag){case 5:return La(l.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 2:case 15:return l=ff(l.type,!1);case 11:return l=ff(l.type.render,!1);case 1:return l=ff(l.type,!0);default:return""}}function tn(l,c){if(l&&l.defaultProps){for(var v in c=s({},c),l=l.defaultProps)c[v]===void 0&&(c[v]=l[v]);return c}return c}var Uu=Pi(null),Gu=null,_o=null,If=null;function Rf(){If=_o=Gu=null}function my(l,c,v){Ke?(Ve(Uu,c._currentValue),c._currentValue=v):(Ve(Uu,c._currentValue2),c._currentValue2=v)}function Mf(l){var c=Uu.current;Ze(Uu),Ke?l._currentValue=c:l._currentValue2=c}function kf(l,c,v){for(;l!==null;){var x=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),l===v)break;l=l.return}}function wo(l,c){Gu=l,If=_o=null,(l=l.dependencies)!==null&&l.firstContext!==null&&(l.lanes&c&&(hr=!0),l.firstContext=null)}function Or(l){var c=Ke?l._currentValue:l._currentValue2;if(If!==l)if(l={context:l,memoizedValue:c,next:null},_o===null){if(Gu===null)throw Error(i(308));_o=l,Gu.dependencies={lanes:0,firstContext:l}}else _o=_o.next=l;return c}var bs=null;function Df(l){bs===null?bs=[l]:bs.push(l)}function gy(l,c,v,x){var S=c.interleaved;return S===null?(v.next=v,Df(c)):(v.next=S.next,S.next=v),c.interleaved=v,bn(l,x)}function bn(l,c){l.lanes|=c;var v=l.alternate;for(v!==null&&(v.lanes|=c),v=l,l=l.return;l!==null;)l.childLanes|=c,(v=l.alternate)!==null&&(v.childLanes|=c),v=l,l=l.return;return v.tag===3?v.stateNode:null}var Ri=!1;function Ff(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vy(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function ii(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function Mi(l,c,v){var x=l.updateQueue;if(x===null)return null;if(x=x.shared,(2&Fe)!=0){var S=x.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),x.pending=c,bn(l,v)}return(S=x.interleaved)===null?(c.next=c,Df(x)):(c.next=S.next,S.next=c),x.interleaved=c,bn(l,v)}function zu(l,c,v){if((c=c.updateQueue)!==null&&(c=c.shared,(4194240&v)!=0)){var x=c.lanes;v|=x&=l.pendingLanes,c.lanes=v,_f(l,v)}}function yy(l,c){var v=l.updateQueue,x=l.alternate;if(x!==null&&v===(x=x.updateQueue)){var S=null,C=null;if((v=v.firstBaseUpdate)!==null){do{var D={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};C===null?S=C=D:C=C.next=D,v=v.next}while(v!==null);C===null?S=C=c:C=C.next=c}else S=C=c;return v={baseState:x.baseState,firstBaseUpdate:S,lastBaseUpdate:C,shared:x.shared,effects:x.effects},void(l.updateQueue=v)}(l=v.lastBaseUpdate)===null?v.firstBaseUpdate=c:l.next=c,v.lastBaseUpdate=c}function Hu(l,c,v,x){var S=l.updateQueue;Ri=!1;var C=S.firstBaseUpdate,D=S.lastBaseUpdate,L=S.shared.pending;if(L!==null){S.shared.pending=null;var $=L,Y=$.next;$.next=null,D===null?C=Y:D.next=Y,D=$;var q=l.alternate;q!==null&&(L=(q=q.updateQueue).lastBaseUpdate)!==D&&(L===null?q.firstBaseUpdate=Y:L.next=Y,q.lastBaseUpdate=$)}if(C!==null){var ie=S.baseState;for(D=0,q=Y=$=null,L=C;;){var K=L.lane,re=L.eventTime;if((x&K)===K){q!==null&&(q=q.next={eventTime:re,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var de=l,Ce=L;switch(K=c,re=v,Ce.tag){case 1:if(typeof(de=Ce.payload)=="function"){ie=de.call(re,ie,K);break e}ie=de;break e;case 3:de.flags=-65537&de.flags|128;case 0:if((K=typeof(de=Ce.payload)=="function"?de.call(re,ie,K):de)==null)break e;ie=s({},ie,K);break e;case 2:Ri=!0}}L.callback!==null&&L.lane!==0&&(l.flags|=64,(K=S.effects)===null?S.effects=[L]:K.push(L))}else re={eventTime:re,lane:K,tag:L.tag,payload:L.payload,callback:L.callback,next:null},q===null?(Y=q=re,$=ie):q=q.next=re,D|=K;if((L=L.next)===null){if((L=S.shared.pending)===null)break;L=(K=L).next,K.next=null,S.lastBaseUpdate=K,S.shared.pending=null}}if(q===null&&($=ie),S.baseState=$,S.firstBaseUpdate=Y,S.lastBaseUpdate=q,(c=S.shared.interleaved)!==null){S=c;do D|=S.lane,S=S.next;while(S!==c)}else C===null&&(S.shared.lanes=0);Cs|=D,l.lanes=D,l.memoizedState=ie}}function xy(l,c,v){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var x=l[c],S=x.callback;if(S!==null){if(x.callback=null,x=v,typeof S!="function")throw Error(i(191,S));S.call(x)}}}var _y=new r.Component().refs;function Nf(l,c,v,x){v=(v=v(x,c=l.memoizedState))==null?c:s({},c,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var $u={isMounted:function(l){return!!(l=l._reactInternals)&&P(l)===l},enqueueSetState:function(l,c,v){l=l._reactInternals;var x=Zt(),S=Ni(l),C=ii(x,S);C.payload=c,v!=null&&(C.callback=v),(c=Mi(l,C,S))!==null&&(Gr(c,l,S,x),zu(c,l,S))},enqueueReplaceState:function(l,c,v){l=l._reactInternals;var x=Zt(),S=Ni(l),C=ii(x,S);C.tag=1,C.payload=c,v!=null&&(C.callback=v),(c=Mi(l,C,S))!==null&&(Gr(c,l,S,x),zu(c,l,S))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var v=Zt(),x=Ni(l),S=ii(v,x);S.tag=2,c!=null&&(S.callback=c),(c=Mi(l,S,x))!==null&&(Gr(c,l,x,v),zu(c,l,x))}};function wy(l,c,v,x,S,C,D){return typeof(l=l.stateNode).shouldComponentUpdate=="function"?l.shouldComponentUpdate(x,C,D):!c.prototype||!c.prototype.isPureReactComponent||!Lu(v,x)||!Lu(S,C)}function Sy(l,c,v){var x=!1,S=Ii,C=c.contextType;return typeof C=="object"&&C!==null?C=Or(C):(S=wr(c)?Ss:Yt.current,C=(x=(x=c.contextTypes)!=null)?go(l,S):Ii),c=new c(v,C),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=$u,l.stateNode=c,c._reactInternals=l,x&&((l=l.stateNode).__reactInternalMemoizedUnmaskedChildContext=S,l.__reactInternalMemoizedMaskedChildContext=C),c}function Ey(l,c,v,x){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(v,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(v,x),c.state!==l&&$u.enqueueReplaceState(c,c.state,null)}function Bf(l,c,v,x){var S=l.stateNode;S.props=v,S.state=l.memoizedState,S.refs=_y,Ff(l);var C=c.contextType;typeof C=="object"&&C!==null?S.context=Or(C):(C=wr(c)?Ss:Yt.current,S.context=go(l,C)),S.state=l.memoizedState,typeof(C=c.getDerivedStateFromProps)=="function"&&(Nf(l,c,C,v),S.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(c=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),c!==S.state&&$u.enqueueReplaceState(S,S.state,null),Hu(l,v,S,x),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308)}function Ha(l,c,v){if((l=v.ref)!==null&&typeof l!="function"&&typeof l!="object"){if(v._owner){if(v=v._owner){if(v.tag!==1)throw Error(i(309));var x=v.stateNode}if(!x)throw Error(i(147,l));var S=x,C=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===C?c.ref:(c=function(D){var L=S.refs;L===_y&&(L=S.refs={}),D===null?delete L[C]:L[C]=D},c._stringRef=C,c)}if(typeof l!="string")throw Error(i(284));if(!v._owner)throw Error(i(290,l))}return l}function Vu(l,c){throw l=Object.prototype.toString.call(c),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function Ty(l){return(0,l._init)(l._payload)}function by(l){function c(J,z){if(l){var X=J.deletions;X===null?(J.deletions=[z],J.flags|=16):X.push(z)}}function v(J,z){if(!l)return null;for(;z!==null;)c(J,z),z=z.sibling;return null}function x(J,z){for(J=new Map;z!==null;)z.key!==null?J.set(z.key,z):J.set(z.index,z),z=z.sibling;return J}function S(J,z){return(J=Oi(J,z)).index=0,J.sibling=null,J}function C(J,z,X){return J.index=X,l?(X=J.alternate)!==null?(X=X.index)<z?(J.flags|=2,z):X:(J.flags|=2,z):(J.flags|=1048576,z)}function D(J){return l&&J.alternate===null&&(J.flags|=2),J}function L(J,z,X,ee){return z===null||z.tag!==6?((z=Sp(X,J.mode,ee)).return=J,z):((z=S(z,X)).return=J,z)}function $(J,z,X,ee){var _e=X.type;return _e===h?q(J,z,X.props.children,ee,X.key):z!==null&&(z.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===T&&Ty(_e)===z.type)?((ee=S(z,X.props)).ref=Ha(J,z,X),ee.return=J,ee):((ee=gc(X.type,X.key,X.props,null,J.mode,ee)).ref=Ha(J,z,X),ee.return=J,ee)}function Y(J,z,X,ee){return z===null||z.tag!==4||z.stateNode.containerInfo!==X.containerInfo||z.stateNode.implementation!==X.implementation?((z=Ep(X,J.mode,ee)).return=J,z):((z=S(z,X.children||[])).return=J,z)}function q(J,z,X,ee,_e){return z===null||z.tag!==7?((z=Rs(X,J.mode,ee,_e)).return=J,z):((z=S(z,X)).return=J,z)}function ie(J,z,X){if(typeof z=="string"&&z!==""||typeof z=="number")return(z=Sp(""+z,J.mode,X)).return=J,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case a:return(X=gc(z.type,z.key,z.props,null,J.mode,X)).ref=Ha(J,null,z),X.return=J,X;case u:return(z=Ep(z,J.mode,X)).return=J,z;case T:return ie(J,(0,z._init)(z._payload),X)}if(H(z)||b(z))return(z=Rs(z,J.mode,X,null)).return=J,z;Vu(J,z)}return null}function K(J,z,X,ee){var _e=z!==null?z.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return _e!==null?null:L(J,z,""+X,ee);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case a:return X.key===_e?$(J,z,X,ee):null;case u:return X.key===_e?Y(J,z,X,ee):null;case T:return K(J,z,(_e=X._init)(X._payload),ee)}if(H(X)||b(X))return _e!==null?null:q(J,z,X,ee,null);Vu(J,X)}return null}function re(J,z,X,ee,_e){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return L(z,J=J.get(X)||null,""+ee,_e);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:return $(z,J=J.get(ee.key===null?X:ee.key)||null,ee,_e);case u:return Y(z,J=J.get(ee.key===null?X:ee.key)||null,ee,_e);case T:return re(J,z,X,(0,ee._init)(ee._payload),_e)}if(H(ee)||b(ee))return q(z,J=J.get(X)||null,ee,_e,null);Vu(z,ee)}return null}function de(J,z,X,ee){for(var _e=null,Ue=null,me=z,Oe=z=0,Ut=null;me!==null&&Oe<X.length;Oe++){me.index>Oe?(Ut=me,me=null):Ut=me.sibling;var Ge=K(J,me,X[Oe],ee);if(Ge===null){me===null&&(me=Ut);break}l&&me&&Ge.alternate===null&&c(J,me),z=C(Ge,z,Oe),Ue===null?_e=Ge:Ue.sibling=Ge,Ue=Ge,me=Ut}if(Oe===X.length)return v(J,me),qe&&Ts(J,Oe),_e;if(me===null){for(;Oe<X.length;Oe++)(me=ie(J,X[Oe],ee))!==null&&(z=C(me,z,Oe),Ue===null?_e=me:Ue.sibling=me,Ue=me);return qe&&Ts(J,Oe),_e}for(me=x(J,me);Oe<X.length;Oe++)(Ut=re(me,J,Oe,X[Oe],ee))!==null&&(l&&Ut.alternate!==null&&me.delete(Ut.key===null?Oe:Ut.key),z=C(Ut,z,Oe),Ue===null?_e=Ut:Ue.sibling=Ut,Ue=Ut);return l&&me.forEach(function(Li){return c(J,Li)}),qe&&Ts(J,Oe),_e}function Ce(J,z,X,ee){var _e=b(X);if(typeof _e!="function")throw Error(i(150));if((X=_e.call(X))==null)throw Error(i(151));for(var Ue=_e=null,me=z,Oe=z=0,Ut=null,Ge=X.next();me!==null&&!Ge.done;Oe++,Ge=X.next()){me.index>Oe?(Ut=me,me=null):Ut=me.sibling;var Li=K(J,me,Ge.value,ee);if(Li===null){me===null&&(me=Ut);break}l&&me&&Li.alternate===null&&c(J,me),z=C(Li,z,Oe),Ue===null?_e=Li:Ue.sibling=Li,Ue=Li,me=Ut}if(Ge.done)return v(J,me),qe&&Ts(J,Oe),_e;if(me===null){for(;!Ge.done;Oe++,Ge=X.next())(Ge=ie(J,Ge.value,ee))!==null&&(z=C(Ge,z,Oe),Ue===null?_e=Ge:Ue.sibling=Ge,Ue=Ge);return qe&&Ts(J,Oe),_e}for(me=x(J,me);!Ge.done;Oe++,Ge=X.next())(Ge=re(me,J,Oe,Ge.value,ee))!==null&&(l&&Ge.alternate!==null&&me.delete(Ge.key===null?Oe:Ge.key),z=C(Ge,z,Oe),Ue===null?_e=Ge:Ue.sibling=Ge,Ue=Ge);return l&&me.forEach(function(VC){return c(J,VC)}),qe&&Ts(J,Oe),_e}return function J(z,X,ee,_e){if(typeof ee=="object"&&ee!==null&&ee.type===h&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case a:e:{for(var Ue=ee.key,me=X;me!==null;){if(me.key===Ue){if((Ue=ee.type)===h){if(me.tag===7){v(z,me.sibling),(X=S(me,ee.props.children)).return=z,z=X;break e}}else if(me.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===T&&Ty(Ue)===me.type){v(z,me.sibling),(X=S(me,ee.props)).ref=Ha(z,me,ee),X.return=z,z=X;break e}v(z,me);break}c(z,me),me=me.sibling}ee.type===h?((X=Rs(ee.props.children,z.mode,_e,ee.key)).return=z,z=X):((_e=gc(ee.type,ee.key,ee.props,null,z.mode,_e)).ref=Ha(z,X,ee),_e.return=z,z=_e)}return D(z);case u:e:{for(me=ee.key;X!==null;){if(X.key===me){if(X.tag===4&&X.stateNode.containerInfo===ee.containerInfo&&X.stateNode.implementation===ee.implementation){v(z,X.sibling),(X=S(X,ee.children||[])).return=z,z=X;break e}v(z,X);break}c(z,X),X=X.sibling}(X=Ep(ee,z.mode,_e)).return=z,z=X}return D(z);case T:return J(z,X,(me=ee._init)(ee._payload),_e)}if(H(ee))return de(z,X,ee,_e);if(b(ee))return Ce(z,X,ee,_e);Vu(z,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"?(ee=""+ee,X!==null&&X.tag===6?(v(z,X.sibling),(X=S(X,ee)).return=z,z=X):(v(z,X),(X=Sp(ee,z.mode,_e)).return=z,z=X),D(z)):v(z,X)}}var So=by(!0),Ay=by(!1),$a={},Lr=Pi($a),Va=Pi($a),Eo=Pi($a);function An(l){if(l===$a)throw Error(i(174));return l}function Of(l,c){Ve(Eo,c),Ve(Va,l),Ve(Lr,$a),l=W(c),Ze(Lr),Ve(Lr,l)}function To(){Ze(Lr),Ze(Va),Ze(Eo)}function Cy(l){var c=An(Eo.current),v=An(Lr.current);v!==(c=O(v,l.type,c))&&(Ve(Va,l),Ve(Lr,c))}function Lf(l){Va.current===l&&(Ze(Lr),Ze(Va))}var ct=Pi(0);function ju(l){for(var c=l;c!==null;){if(c.tag===13){var v=c.memoizedState;if(v!==null&&((v=v.dehydrated)===null||ty(v)||hf(v)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(128&c.flags)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Uf=[];function Gf(){for(var l=0;l<Uf.length;l++){var c=Uf[l];Ke?c._workInProgressVersionPrimary=null:c._workInProgressVersionSecondary=null}Uf.length=0}var Wu=o.ReactCurrentDispatcher,zf=o.ReactCurrentBatchConfig,As=0,rt=null,Pt=null,It=null,Xu=!1,ja=!1,Wa=0,wC=0;function Qt(){throw Error(i(321))}function Hf(l,c){if(c===null)return!1;for(var v=0;v<c.length&&v<l.length;v++)if(!Jr(l[v],c[v]))return!1;return!0}function $f(l,c,v,x,S,C){if(As=C,rt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Wu.current=l===null||l.memoizedState===null?bC:AC,l=v(x,S),ja){C=0;do{if(ja=!1,Wa=0,25<=C)throw Error(i(301));C+=1,It=Pt=null,c.updateQueue=null,Wu.current=CC,l=v(x,S)}while(ja)}if(Wu.current=Ku,c=Pt!==null&&Pt.next!==null,As=0,It=Pt=rt=null,Xu=!1,c)throw Error(i(300));return l}function Vf(){var l=Wa!==0;return Wa=0,l}function Cn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?rt.memoizedState=It=l:It=It.next=l,It}function Ur(){if(Pt===null){var l=rt.alternate;l=l!==null?l.memoizedState:null}else l=Pt.next;var c=It===null?rt.memoizedState:It.next;if(c!==null)It=c,Pt=l;else{if(l===null)throw Error(i(310));l={memoizedState:(Pt=l).memoizedState,baseState:Pt.baseState,baseQueue:Pt.baseQueue,queue:Pt.queue,next:null},It===null?rt.memoizedState=It=l:It=It.next=l}return It}function Xa(l,c){return typeof c=="function"?c(l):c}function jf(l){var c=Ur(),v=c.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=l;var x=Pt,S=x.baseQueue,C=v.pending;if(C!==null){if(S!==null){var D=S.next;S.next=C.next,C.next=D}x.baseQueue=S=C,v.pending=null}if(S!==null){C=S.next,x=x.baseState;var L=D=null,$=null,Y=C;do{var q=Y.lane;if((As&q)===q)$!==null&&($=$.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),x=Y.hasEagerState?Y.eagerState:l(x,Y.action);else{var ie={lane:q,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};$===null?(L=$=ie,D=x):$=$.next=ie,rt.lanes|=q,Cs|=q}Y=Y.next}while(Y!==null&&Y!==C);$===null?D=x:$.next=L,Jr(x,c.memoizedState)||(hr=!0),c.memoizedState=x,c.baseState=D,c.baseQueue=$,v.lastRenderedState=x}if((l=v.interleaved)!==null){S=l;do C=S.lane,rt.lanes|=C,Cs|=C,S=S.next;while(S!==l)}else S===null&&(v.lanes=0);return[c.memoizedState,v.dispatch]}function Wf(l){var c=Ur(),v=c.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=l;var x=v.dispatch,S=v.pending,C=c.memoizedState;if(S!==null){v.pending=null;var D=S=S.next;do C=l(C,D.action),D=D.next;while(D!==S);Jr(C,c.memoizedState)||(hr=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),v.lastRenderedState=C}return[C,x]}function Py(){}function Iy(l,c){var v=rt,x=Ur(),S=c(),C=!Jr(x.memoizedState,S);if(C&&(x.memoizedState=S,hr=!0),x=x.queue,Xf(ky.bind(null,v,x,l),[l]),x.getSnapshot!==c||C||It!==null&&1&It.memoizedState.tag){if(v.flags|=2048,Ya(9,My.bind(null,v,x,S,c),void 0,null),Rt===null)throw Error(i(349));30&As||Ry(v,c,S)}return S}function Ry(l,c,v){l.flags|=16384,l={getSnapshot:c,value:v},(c=rt.updateQueue)===null?(c={lastEffect:null,stores:null},rt.updateQueue=c,c.stores=[l]):(v=c.stores)===null?c.stores=[l]:v.push(l)}function My(l,c,v,x){c.value=v,c.getSnapshot=x,Dy(c)&&Fy(l)}function ky(l,c,v){return v(function(){Dy(c)&&Fy(l)})}function Dy(l){var c=l.getSnapshot;l=l.value;try{var v=c();return!Jr(l,v)}catch{return!0}}function Fy(l){var c=bn(l,1);c!==null&&Gr(c,l,1,-1)}function Ny(l){var c=Cn();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:l},c.queue=l,l=l.dispatch=TC.bind(null,rt,l),[c.memoizedState,l]}function Ya(l,c,v,x){return l={tag:l,create:c,destroy:v,deps:x,next:null},(c=rt.updateQueue)===null?(c={lastEffect:null,stores:null},rt.updateQueue=c,c.lastEffect=l.next=l):(v=c.lastEffect)===null?c.lastEffect=l.next=l:(x=v.next,v.next=l,l.next=x,c.lastEffect=l),l}function By(){return Ur().memoizedState}function Yu(l,c,v,x){var S=Cn();rt.flags|=l,S.memoizedState=Ya(1|c,v,void 0,x===void 0?null:x)}function Qu(l,c,v,x){var S=Ur();x=x===void 0?null:x;var C=void 0;if(Pt!==null){var D=Pt.memoizedState;if(C=D.destroy,x!==null&&Hf(x,D.deps))return void(S.memoizedState=Ya(c,v,C,x))}rt.flags|=l,S.memoizedState=Ya(1|c,v,C,x)}function Oy(l,c){return Yu(8390656,8,l,c)}function Xf(l,c){return Qu(2048,8,l,c)}function Ly(l,c){return Qu(4,2,l,c)}function Uy(l,c){return Qu(4,4,l,c)}function Gy(l,c){return typeof c=="function"?(l=l(),c(l),function(){c(null)}):c!=null?(l=l(),c.current=l,function(){c.current=null}):void 0}function zy(l,c,v){return v=v!=null?v.concat([l]):null,Qu(4,4,Gy.bind(null,c,l),v)}function Yf(){}function Hy(l,c){var v=Ur();c=c===void 0?null:c;var x=v.memoizedState;return x!==null&&c!==null&&Hf(c,x[1])?x[0]:(v.memoizedState=[l,c],l)}function $y(l,c){var v=Ur();c=c===void 0?null:c;var x=v.memoizedState;return x!==null&&c!==null&&Hf(c,x[1])?x[0]:(l=l(),v.memoizedState=[l,c],l)}function Vy(l,c,v){return 21&As?(Jr(v,c)||(v=sy(),rt.lanes|=v,Cs|=v,l.baseState=!0),c):(l.baseState&&(l.baseState=!1,hr=!0),l.memoizedState=v)}function SC(l,c){var v=Be;Be=v!==0&&4>v?v:4,l(!0);var x=zf.transition;zf.transition={};try{l(!1),c()}finally{Be=v,zf.transition=x}}function jy(){return Ur().memoizedState}function EC(l,c,v){var x=Ni(l);v={lane:x,action:v,hasEagerState:!1,eagerState:null,next:null},Wy(l)?Xy(c,v):(v=gy(l,c,v,x))!==null&&(Gr(v,l,x,Zt()),Yy(v,c,x))}function TC(l,c,v){var x=Ni(l),S={lane:x,action:v,hasEagerState:!1,eagerState:null,next:null};if(Wy(l))Xy(c,S);else{var C=l.alternate;if(l.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer)!==null)try{var D=c.lastRenderedState,L=C(D,v);if(S.hasEagerState=!0,S.eagerState=L,Jr(L,D)){var $=c.interleaved;return $===null?(S.next=S,Df(c)):(S.next=$.next,$.next=S),void(c.interleaved=S)}}catch{}(v=gy(l,c,S,x))!==null&&(Gr(v,l,x,S=Zt()),Yy(v,c,x))}}function Wy(l){var c=l.alternate;return l===rt||c!==null&&c===rt}function Xy(l,c){ja=Xu=!0;var v=l.pending;v===null?c.next=c:(c.next=v.next,v.next=c),l.pending=c}function Yy(l,c,v){if(4194240&v){var x=c.lanes;v|=x&=l.pendingLanes,c.lanes=v,_f(l,v)}}var Ku={readContext:Or,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},bC={readContext:Or,useCallback:function(l,c){return Cn().memoizedState=[l,c===void 0?null:c],l},useContext:Or,useEffect:Oy,useImperativeHandle:function(l,c,v){return v=v!=null?v.concat([l]):null,Yu(4194308,4,Gy.bind(null,c,l),v)},useLayoutEffect:function(l,c){return Yu(4194308,4,l,c)},useInsertionEffect:function(l,c){return Yu(4,2,l,c)},useMemo:function(l,c){var v=Cn();return c=c===void 0?null:c,l=l(),v.memoizedState=[l,c],l},useReducer:function(l,c,v){var x=Cn();return c=v!==void 0?v(c):c,x.memoizedState=x.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},x.queue=l,l=l.dispatch=EC.bind(null,rt,l),[x.memoizedState,l]},useRef:function(l){return l={current:l},Cn().memoizedState=l},useState:Ny,useDebugValue:Yf,useDeferredValue:function(l){return Cn().memoizedState=l},useTransition:function(){var l=Ny(!1),c=l[0];return l=SC.bind(null,l[1]),Cn().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,v){var x=rt,S=Cn();if(qe){if(v===void 0)throw Error(i(407));v=v()}else{if(v=c(),Rt===null)throw Error(i(349));30&As||Ry(x,c,v)}S.memoizedState=v;var C={value:v,getSnapshot:c};return S.queue=C,Oy(ky.bind(null,x,C,l),[l]),x.flags|=2048,Ya(9,My.bind(null,x,C,v,c),void 0,null),v},useId:function(){var l=Cn(),c=Rt.identifierPrefix;if(qe){var v=ni;c=":"+c+"R"+(v=(Tn&~(1<<32-qr(Tn)-1)).toString(32)+v),0<(v=Wa++)&&(c+="H"+v.toString(32)),c+=":"}else c=":"+c+"r"+(v=wC++).toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},AC={readContext:Or,useCallback:Hy,useContext:Or,useEffect:Xf,useImperativeHandle:zy,useInsertionEffect:Ly,useLayoutEffect:Uy,useMemo:$y,useReducer:jf,useRef:By,useState:function(){return jf(Xa)},useDebugValue:Yf,useDeferredValue:function(l){return Vy(Ur(),Pt.memoizedState,l)},useTransition:function(){return[jf(Xa)[0],Ur().memoizedState]},useMutableSource:Py,useSyncExternalStore:Iy,useId:jy,unstable_isNewReconciler:!1},CC={readContext:Or,useCallback:Hy,useContext:Or,useEffect:Xf,useImperativeHandle:zy,useInsertionEffect:Ly,useLayoutEffect:Uy,useMemo:$y,useReducer:Wf,useRef:By,useState:function(){return Wf(Xa)},useDebugValue:Yf,useDeferredValue:function(l){var c=Ur();return Pt===null?c.memoizedState=l:Vy(c,Pt.memoizedState,l)},useTransition:function(){return[Wf(Xa)[0],Ur().memoizedState]},useMutableSource:Py,useSyncExternalStore:Iy,useId:jy,unstable_isNewReconciler:!1};function bo(l,c){try{var v="",x=c;do v+=_C(x),x=x.return;while(x);var S=v}catch(C){S=`
Error generating stack: `+C.message+`
`+C.stack}return{value:l,source:c,stack:S,digest:null}}function Qf(l,c,v){return{value:l,source:null,stack:v??null,digest:c??null}}function Kf(l,c){try{console.error(c.value)}catch(v){setTimeout(function(){throw v})}}var PC=typeof WeakMap=="function"?WeakMap:Map;function Qy(l,c,v){(v=ii(-1,v)).tag=3,v.payload={element:null};var x=c.value;return v.callback=function(){cc||(cc=!0,mp=x),Kf(0,c)},v}function Ky(l,c,v){(v=ii(-1,v)).tag=3;var x=l.type.getDerivedStateFromError;if(typeof x=="function"){var S=c.value;v.payload=function(){return x(S)},v.callback=function(){Kf(0,c)}}var C=l.stateNode;return C!==null&&typeof C.componentDidCatch=="function"&&(v.callback=function(){Kf(0,c),typeof x!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})}),v}function Zy(l,c,v){var x=l.pingCache;if(x===null){x=l.pingCache=new PC;var S=new Set;x.set(c,S)}else(S=x.get(c))===void 0&&(S=new Set,x.set(c,S));S.has(v)||(S.add(v),l=OC.bind(null,l,c,v),c.then(l,l))}function qy(l){do{var c;if((c=l.tag===13)&&(c=(c=l.memoizedState)===null||c.dehydrated!==null),c)return l;l=l.return}while(l!==null);return null}function Jy(l,c,v,x,S){return 1&l.mode?(l.flags|=65536,l.lanes=S,l):(l===c?l.flags|=65536:(l.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:((c=ii(-1,1)).tag=2,Mi(v,c,1))),v.lanes|=1),l)}var IC=o.ReactCurrentOwner,hr=!1;function dr(l,c,v,x){c.child=l===null?Ay(c,null,v,x):So(c,l.child,v,x)}function e1(l,c,v,x,S){v=v.render;var C=c.ref;return wo(c,S),x=$f(l,c,v,x,C,S),v=Vf(),l===null||hr?(qe&&v&&Tf(c),c.flags|=1,dr(l,c,x,S),c.child):(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~S,si(l,c,S))}function t1(l,c,v,x,S){if(l===null){var C=v.type;return typeof C!="function"||wp(C)||C.defaultProps!==void 0||v.compare!==null||v.defaultProps!==void 0?((l=gc(v.type,null,x,c,c.mode,S)).ref=c.ref,l.return=c,c.child=l):(c.tag=15,c.type=C,r1(l,c,C,x,S))}if(C=l.child,(l.lanes&S)==0){var D=C.memoizedProps;if((v=(v=v.compare)!==null?v:Lu)(D,x)&&l.ref===c.ref)return si(l,c,S)}return c.flags|=1,(l=Oi(C,x)).ref=c.ref,l.return=c,c.child=l}function r1(l,c,v,x,S){if(l!==null){var C=l.memoizedProps;if(Lu(C,x)&&l.ref===c.ref){if(hr=!1,c.pendingProps=x=C,(l.lanes&S)==0)return c.lanes=l.lanes,si(l,c,S);131072&l.flags&&(hr=!0)}}return Zf(l,c,v,x,S)}function n1(l,c,v){var x=c.pendingProps,S=x.children,C=l!==null?l.memoizedState:null;if(x.mode==="hidden")if(!(1&c.mode))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Co,Er),Er|=v;else{if(!(1073741824&v))return l=C!==null?C.baseLanes|v:v,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,Ve(Co,Er),Er|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=C!==null?C.baseLanes:v,Ve(Co,Er),Er|=x}else C!==null?(x=C.baseLanes|v,c.memoizedState=null):x=v,Ve(Co,Er),Er|=x;return dr(l,c,S,v),c.child}function i1(l,c){var v=c.ref;(l===null&&v!==null||l!==null&&l.ref!==v)&&(c.flags|=512,c.flags|=2097152)}function Zf(l,c,v,x,S){var C=wr(v)?Ss:Yt.current;return C=go(c,C),wo(c,S),v=$f(l,c,v,x,C,S),x=Vf(),l===null||hr?(qe&&x&&Tf(c),c.flags|=1,dr(l,c,v,S),c.child):(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~S,si(l,c,S))}function s1(l,c,v,x,S){if(wr(v)){var C=!0;Mu(c)}else C=!1;if(wo(c,S),c.stateNode===null)ec(l,c),Sy(c,v,x),Bf(c,v,x,S),x=!0;else if(l===null){var D=c.stateNode,L=c.memoizedProps;D.props=L;var $=D.context,Y=v.contextType;typeof Y=="object"&&Y!==null?Y=Or(Y):Y=go(c,Y=wr(v)?Ss:Yt.current);var q=v.getDerivedStateFromProps,ie=typeof q=="function"||typeof D.getSnapshotBeforeUpdate=="function";ie||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(L!==x||$!==Y)&&Ey(c,D,x,Y),Ri=!1;var K=c.memoizedState;D.state=K,Hu(c,x,D,S),$=c.memoizedState,L!==x||K!==$||cr.current||Ri?(typeof q=="function"&&(Nf(c,v,q,x),$=c.memoizedState),(L=Ri||wy(c,v,L,x,K,$,Y))?(ie||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=$),D.props=x,D.state=$,D.context=Y,x=L):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{D=c.stateNode,vy(l,c),L=c.memoizedProps,Y=c.type===c.elementType?L:tn(c.type,L),D.props=Y,ie=c.pendingProps,K=D.context,typeof($=v.contextType)=="object"&&$!==null?$=Or($):$=go(c,$=wr(v)?Ss:Yt.current);var re=v.getDerivedStateFromProps;(q=typeof re=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(L!==ie||K!==$)&&Ey(c,D,x,$),Ri=!1,K=c.memoizedState,D.state=K,Hu(c,x,D,S);var de=c.memoizedState;L!==ie||K!==de||cr.current||Ri?(typeof re=="function"&&(Nf(c,v,re,x),de=c.memoizedState),(Y=Ri||wy(c,v,Y,x,K,de,$)||!1)?(q||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(x,de,$),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(x,de,$)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||L===l.memoizedProps&&K===l.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||L===l.memoizedProps&&K===l.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=de),D.props=x,D.state=de,D.context=$,x=Y):(typeof D.componentDidUpdate!="function"||L===l.memoizedProps&&K===l.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||L===l.memoizedProps&&K===l.memoizedState||(c.flags|=1024),x=!1)}return qf(l,c,v,x,C,S)}function qf(l,c,v,x,S,C){i1(l,c);var D=(128&c.flags)!=0;if(!x&&!D)return S&&iy(c,v,!1),si(l,c,C);x=c.stateNode,IC.current=c;var L=D&&typeof v.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,l!==null&&D?(c.child=So(c,l.child,null,C),c.child=So(c,null,L,C)):dr(l,c,L,C),c.memoizedState=x.state,S&&iy(c,v,!0),c.child}function o1(l){var c=l.stateNode;c.pendingContext?ry(0,c.pendingContext,c.pendingContext!==c.context):c.context&&ry(0,c.context,!1),Of(l,c.containerInfo)}function a1(l,c,v,x,S){return xo(),Pf(S),c.flags|=256,dr(l,c,v,x),c.child}var Qa,Ka,Zu,qu,Jf={dehydrated:null,treeContext:null,retryLane:0};function ep(l){return{baseLanes:l,cachePool:null,transitions:null}}function l1(l,c,v){var x,S=c.pendingProps,C=ct.current,D=!1,L=(128&c.flags)!=0;if((x=L)||(x=(l===null||l.memoizedState!==null)&&(2&C)!=0),x?(D=!0,c.flags&=-129):l!==null&&l.memoizedState===null||(C|=1),Ve(ct,1&C),l===null)return Cf(c),(l=c.memoizedState)!==null&&(l=l.dehydrated)!==null?(1&c.mode?hf(l)?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(L=S.children,l=S.fallback,D?(S=c.mode,D=c.child,L={mode:"hidden",children:L},!(1&S)&&D!==null?(D.childLanes=0,D.pendingProps=L):D=vc(L,S,0,null),l=Rs(l,S,v,null),D.return=c,l.return=c,D.sibling=l,c.child=D,c.child.memoizedState=ep(v),c.memoizedState=Jf,l):tp(c,L));if((C=l.memoizedState)!==null&&(x=C.dehydrated)!==null)return function(Y,q,ie,K,re,de,Ce){if(ie)return 256&q.flags?(q.flags&=-257,Ju(Y,q,Ce,K=Qf(Error(i(422))))):q.memoizedState!==null?(q.child=Y.child,q.flags|=128,null):(de=K.fallback,re=q.mode,K=vc({mode:"visible",children:K.children},re,0,null),(de=Rs(de,re,Ce,null)).flags|=2,K.return=q,de.return=q,K.sibling=de,q.child=K,1&q.mode&&So(q,Y.child,null,Ce),q.child.memoizedState=ep(Ce),q.memoizedState=Jf,de);if(!(1&q.mode))return Ju(Y,q,Ce,null);if(hf(re))return K=QA(re).digest,de=Error(i(419)),K=Qf(de,K,void 0),Ju(Y,q,Ce,K);if(ie=(Ce&Y.childLanes)!=0,hr||ie){if((K=Rt)!==null){switch(Ce&-Ce){case 4:re=2;break;case 16:re=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:re=32;break;case 536870912:re=268435456;break;default:re=0}(re=re&(K.suspendedLanes|Ce)?0:re)!==0&&re!==de.retryLane&&(de.retryLane=re,bn(Y,re),Gr(K,Y,re,-1))}return _p(),Ju(Y,q,Ce,K=Qf(Error(i(421))))}return ty(re)?(q.flags|=128,q.child=Y.child,q=LC.bind(null,Y),KA(re,q),null):(Y=de.treeContext,De&&(Br=JA(re),Sr=q,qe=!0,en=null,za=!1,Y!==null&&(Fr[Nr++]=Tn,Fr[Nr++]=ni,Fr[Nr++]=Es,Tn=Y.id,ni=Y.overflow,Es=q)),q=tp(q,K.children),q.flags|=4096,q)}(l,c,L,S,x,C,v);if(D){D=S.fallback,L=c.mode,x=(C=l.child).sibling;var $={mode:"hidden",children:S.children};return!(1&L)&&c.child!==C?((S=c.child).childLanes=0,S.pendingProps=$,c.deletions=null):(S=Oi(C,$)).subtreeFlags=14680064&C.subtreeFlags,x!==null?D=Oi(x,D):(D=Rs(D,L,v,null)).flags|=2,D.return=c,S.return=c,S.sibling=D,c.child=S,S=D,D=c.child,L=(L=l.child.memoizedState)===null?ep(v):{baseLanes:L.baseLanes|v,cachePool:null,transitions:L.transitions},D.memoizedState=L,D.childLanes=l.childLanes&~v,c.memoizedState=Jf,S}return l=(D=l.child).sibling,S=Oi(D,{mode:"visible",children:S.children}),!(1&c.mode)&&(S.lanes=v),S.return=c,S.sibling=null,l!==null&&((v=c.deletions)===null?(c.deletions=[l],c.flags|=16):v.push(l)),c.child=S,c.memoizedState=null,S}function tp(l,c){return(c=vc({mode:"visible",children:c},l.mode,0,null)).return=l,l.child=c}function Ju(l,c,v,x){return x!==null&&Pf(x),So(c,l.child,null,v),(l=tp(c,c.pendingProps.children)).flags|=2,c.memoizedState=null,l}function u1(l,c,v){l.lanes|=c;var x=l.alternate;x!==null&&(x.lanes|=c),kf(l.return,c,v)}function rp(l,c,v,x,S){var C=l.memoizedState;C===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:v,tailMode:S}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=x,C.tail=v,C.tailMode=S)}function c1(l,c,v){var x=c.pendingProps,S=x.revealOrder,C=x.tail;if(dr(l,c,x.children,v),(2&(x=ct.current))!=0)x=1&x|2,c.flags|=128;else{if(l!==null&&128&l.flags)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&u1(l,v,c);else if(l.tag===19)u1(l,v,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}x&=1}if(Ve(ct,x),(1&c.mode)==0)c.memoizedState=null;else switch(S){case"forwards":for(v=c.child,S=null;v!==null;)(l=v.alternate)!==null&&ju(l)===null&&(S=v),v=v.sibling;(v=S)===null?(S=c.child,c.child=null):(S=v.sibling,v.sibling=null),rp(c,!1,S,v,C);break;case"backwards":for(v=null,S=c.child,c.child=null;S!==null;){if((l=S.alternate)!==null&&ju(l)===null){c.child=S;break}l=S.sibling,S.sibling=v,v=S,S=l}rp(c,!0,v,null,C);break;case"together":rp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ec(l,c){!(1&c.mode)&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function si(l,c,v){if(l!==null&&(c.dependencies=l.dependencies),Cs|=c.lanes,(v&c.childLanes)==0)return null;if(l!==null&&c.child!==l.child)throw Error(i(153));if(c.child!==null){for(v=Oi(l=c.child,l.pendingProps),c.child=v,v.return=c;l.sibling!==null;)l=l.sibling,(v=v.sibling=Oi(l,l.pendingProps)).return=c;v.sibling=null}return c.child}function Pn(l){l.flags|=4}function h1(l,c){if(l!==null&&l.child===c.child)return!0;if(16&c.flags)return!1;for(l=c.child;l!==null;){if(12854&l.flags||12854&l.subtreeFlags)return!1;l=l.sibling}return!0}if(Ae)Qa=function(l,c){for(var v=c.child;v!==null;){if(v.tag===5||v.tag===6)Z(l,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break;for(;v.sibling===null;){if(v.return===null||v.return===c)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Ka=function(){},Zu=function(l,c,v,x,S){if((l=l.memoizedProps)!==x){var C=c.stateNode,D=An(Lr.current);v=ue(C,v,l,x,S,D),(c.updateQueue=v)&&Pn(c)}},qu=function(l,c,v,x){v!==x&&Pn(c)};else if(He){Qa=function(l,c,v,x){for(var S=c.child;S!==null;){if(S.tag===5){var C=S.stateNode;v&&x&&(C=Jv(C,S.type,S.memoizedProps,S)),Z(l,C)}else if(S.tag===6)C=S.stateNode,v&&x&&(C=ey(C,S.memoizedProps,S)),Z(l,C);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)(C=S.child)!==null&&(C.return=S),Qa(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};var d1=function(l,c,v,x){for(var S=c.child;S!==null;){if(S.tag===5){var C=S.stateNode;v&&x&&(C=Jv(C,S.type,S.memoizedProps,S)),qv(l,C)}else if(S.tag===6)C=S.stateNode,v&&x&&(C=ey(C,S.memoizedProps,S)),qv(l,C);else if(S.tag!==4){if(S.tag===22&&S.memoizedState!==null)(C=S.child)!==null&&(C.return=S),d1(l,S,!0,!0);else if(S.child!==null){S.child.return=S,S=S.child;continue}}if(S===c)break;for(;S.sibling===null;){if(S.return===null||S.return===c)return;S=S.return}S.sibling.return=S.return,S=S.sibling}};Ka=function(l,c){var v=c.stateNode;if(!h1(l,c)){l=v.containerInfo;var x=Zv(l);d1(x,c,!1,!1),v.pendingChildren=x,Pn(c),jA(l,x)}},Zu=function(l,c,v,x,S){var C=l.stateNode,D=l.memoizedProps;if((l=h1(l,c))&&D===x)c.stateNode=C;else{var L=c.stateNode,$=An(Lr.current),Y=null;D!==x&&(Y=ue(L,v,D,x,S,$)),l&&Y===null?c.stateNode=C:(C=VA(C,Y,v,D,x,c,l,L),pe(C,v,x,S,$)&&Pn(c),c.stateNode=C,l?Pn(c):Qa(C,c,!1,!1))}},qu=function(l,c,v,x){v!==x?(l=An(Eo.current),v=An(Lr.current),c.stateNode=ve(x,l,v,c),Pn(c)):c.stateNode=l.stateNode}}else Ka=function(){},Zu=function(){},qu=function(){};function Za(l,c){if(!qe)switch(l.tailMode){case"hidden":c=l.tail;for(var v=null;c!==null;)c.alternate!==null&&(v=c),c=c.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var x=null;v!==null;)v.alternate!==null&&(x=v),v=v.sibling;x===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:x.sibling=null}}function nr(l){var c=l.alternate!==null&&l.alternate.child===l.child,v=0,x=0;if(c)for(var S=l.child;S!==null;)v|=S.lanes|S.childLanes,x|=14680064&S.subtreeFlags,x|=14680064&S.flags,S.return=l,S=S.sibling;else for(S=l.child;S!==null;)v|=S.lanes|S.childLanes,x|=S.subtreeFlags,x|=S.flags,S.return=l,S=S.sibling;return l.subtreeFlags|=x,l.childLanes=v,c}function RC(l,c,v){var x=c.pendingProps;switch(bf(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(c),null;case 1:case 17:return wr(c.type)&&mf(),nr(c),null;case 3:return v=c.stateNode,To(),Ze(cr),Ze(Yt),Gf(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),l!==null&&l.child!==null||(Ou(c)?Pn(c):l===null||l.memoizedState.isDehydrated&&!(256&c.flags)||(c.flags|=1024,en!==null&&(yp(en),en=null))),Ka(l,c),nr(c),null;case 5:Lf(c),v=An(Eo.current);var S=c.type;if(l!==null&&c.stateNode!=null)Zu(l,c,S,x,v),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(i(166));return nr(c),null}if(l=An(Lr.current),Ou(c)){if(!De)throw Error(i(175));l=eC(c.stateNode,c.type,c.memoizedProps,v,l,c,!za),c.updateQueue=l,l!==null&&Pn(c)}else{var C=j(S,x,v,l,c);Qa(C,c,!1,!1),c.stateNode=C,pe(C,S,x,v,l)&&Pn(c)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return nr(c),null;case 6:if(l&&c.stateNode!=null)qu(l,c,l.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(i(166));if(l=An(Eo.current),v=An(Lr.current),Ou(c)){if(!De)throw Error(i(176));if(l=c.stateNode,v=c.memoizedProps,(x=tC(l,v,c,!za))&&(S=Sr)!==null)switch(S.tag){case 3:uC(S.stateNode.containerInfo,l,v,(1&S.mode)!=0);break;case 5:cC(S.type,S.memoizedProps,S.stateNode,l,v,(1&S.mode)!=0)}x&&Pn(c)}else c.stateNode=ve(x,l,v,c)}return nr(c),null;case 13:if(Ze(ct),x=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(qe&&Br!==null&&1&c.mode&&!(128&c.flags))py(),xo(),c.flags|=98560,S=!1;else if(S=Ou(c),x!==null&&x.dehydrated!==null){if(l===null){if(!S)throw Error(i(318));if(!De)throw Error(i(344));if(!(S=(S=c.memoizedState)!==null?S.dehydrated:null))throw Error(i(317));rC(S,c)}else xo(),!(128&c.flags)&&(c.memoizedState=null),c.flags|=4;nr(c),S=!1}else en!==null&&(yp(en),en=null),S=!0;if(!S)return 65536&c.flags?c:null}return 128&c.flags?(c.lanes=v,c):((v=x!==null)!=(l!==null&&l.memoizedState!==null)&&v&&(c.child.flags|=8192,1&c.mode&&(l===null||1&ct.current?St===0&&(St=3):_p())),c.updateQueue!==null&&(c.flags|=4),nr(c),null);case 4:return To(),Ka(l,c),l===null&&ut(c.stateNode.containerInfo),nr(c),null;case 10:return Mf(c.type._context),nr(c),null;case 19:if(Ze(ct),(S=c.memoizedState)===null)return nr(c),null;if(x=(128&c.flags)!=0,(C=S.rendering)===null)if(x)Za(S,!1);else{if(St!==0||l!==null&&128&l.flags)for(l=c.child;l!==null;){if((C=ju(l))!==null){for(c.flags|=128,Za(S,!1),(l=C.updateQueue)!==null&&(c.updateQueue=l,c.flags|=4),c.subtreeFlags=0,l=v,v=c.child;v!==null;)S=l,(x=v).flags&=14680066,(C=x.alternate)===null?(x.childLanes=0,x.lanes=S,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=C.childLanes,x.lanes=C.lanes,x.child=C.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=C.memoizedProps,x.memoizedState=C.memoizedState,x.updateQueue=C.updateQueue,x.type=C.type,S=C.dependencies,x.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),v=v.sibling;return Ve(ct,1&ct.current|2),c.child}l=l.sibling}S.tail!==null&&Ct()>pp&&(c.flags|=128,x=!0,Za(S,!1),c.lanes=4194304)}else{if(!x)if((l=ju(C))!==null){if(c.flags|=128,x=!0,(l=l.updateQueue)!==null&&(c.updateQueue=l,c.flags|=4),Za(S,!0),S.tail===null&&S.tailMode==="hidden"&&!C.alternate&&!qe)return nr(c),null}else 2*Ct()-S.renderingStartTime>pp&&v!==1073741824&&(c.flags|=128,x=!0,Za(S,!1),c.lanes=4194304);S.isBackwards?(C.sibling=c.child,c.child=C):((l=S.last)!==null?l.sibling=C:c.child=C,S.last=C)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=Ct(),c.sibling=null,l=ct.current,Ve(ct,x?1&l|2:1&l),c):(nr(c),null);case 22:case 23:return xp(),v=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==v&&(c.flags|=8192),v&&1&c.mode?1073741824&Er&&(nr(c),Ae&&6&c.subtreeFlags&&(c.flags|=8192)):nr(c),null;case 24:case 25:return null}throw Error(i(156,c.tag))}function MC(l,c){switch(bf(c),c.tag){case 1:return wr(c.type)&&mf(),65536&(l=c.flags)?(c.flags=-65537&l|128,c):null;case 3:return To(),Ze(cr),Ze(Yt),Gf(),65536&(l=c.flags)&&!(128&l)?(c.flags=-65537&l|128,c):null;case 5:return Lf(c),null;case 13:if(Ze(ct),(l=c.memoizedState)!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(i(340));xo()}return 65536&(l=c.flags)?(c.flags=-65537&l|128,c):null;case 19:return Ze(ct),null;case 4:return To(),null;case 10:return Mf(c.type._context),null;case 22:case 23:return xp(),null;default:return null}}var tc=!1,Kt=!1,kC=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Ao(l,c){var v=l.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(x){Je(l,c,x)}else v.current=null}function f1(l,c,v){try{v()}catch(x){Je(l,c,x)}}var p1=!1;function qa(l,c,v){var x=c.updateQueue;if((x=x!==null?x.lastEffect:null)!==null){var S=x=x.next;do{if((S.tag&l)===l){var C=S.destroy;S.destroy=void 0,C!==void 0&&f1(c,v,C)}S=S.next}while(S!==x)}}function rc(l,c){if((c=(c=c.updateQueue)!==null?c.lastEffect:null)!==null){var v=c=c.next;do{if((v.tag&l)===l){var x=v.create;v.destroy=x()}v=v.next}while(v!==c)}}function np(l){var c=l.ref;if(c!==null){var v=l.stateNode;l.tag===5?l=Q(v):l=v,typeof c=="function"?c(l):c.current=l}}function m1(l){var c=l.alternate;c!==null&&(l.alternate=null,m1(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode)!==null&&_s(c),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function g1(l){return l.tag===5||l.tag===3||l.tag===4}function v1(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||g1(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(2&l.flags||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(2&l.flags))return l.stateNode}}function ip(l,c,v){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?BA(v,l,c):MA(v,l);else if(x!==4&&(l=l.child)!==null)for(ip(l,c,v),l=l.sibling;l!==null;)ip(l,c,v),l=l.sibling}function sp(l,c,v){var x=l.tag;if(x===5||x===6)l=l.stateNode,c?NA(v,l,c):RA(v,l);else if(x!==4&&(l=l.child)!==null)for(sp(l,c,v),l=l.sibling;l!==null;)sp(l,c,v),l=l.sibling}var ir=null,In=!1;function Rn(l,c,v){for(v=v.child;v!==null;)op(l,c,v),v=v.sibling}function op(l,c,v){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(Du,v)}catch{}switch(v.tag){case 5:Kt||Ao(v,c);case 6:if(Ae){var x=ir,S=In;ir=null,Rn(l,c,v),In=S,(ir=x)!==null&&(In?LA(ir,v.stateNode):OA(ir,v.stateNode))}else Rn(l,c,v);break;case 18:Ae&&ir!==null&&(In?aC(ir,v.stateNode):oC(ir,v.stateNode));break;case 4:Ae?(x=ir,S=In,ir=v.stateNode.containerInfo,In=!0,Rn(l,c,v),ir=x,In=S):(He&&(x=v.stateNode.containerInfo,S=Zv(x),cf(x,S)),Rn(l,c,v));break;case 0:case 11:case 14:case 15:if(!Kt&&(x=v.updateQueue)!==null&&(x=x.lastEffect)!==null){S=x=x.next;do{var C=S,D=C.destroy;C=C.tag,D!==void 0&&(2&C||4&C)&&f1(v,c,D),S=S.next}while(S!==x)}Rn(l,c,v);break;case 1:if(!Kt&&(Ao(v,c),typeof(x=v.stateNode).componentWillUnmount=="function"))try{x.props=v.memoizedProps,x.state=v.memoizedState,x.componentWillUnmount()}catch(L){Je(v,c,L)}Rn(l,c,v);break;case 21:Rn(l,c,v);break;case 22:1&v.mode?(Kt=(x=Kt)||v.memoizedState!==null,Rn(l,c,v),Kt=x):Rn(l,c,v);break;default:Rn(l,c,v)}}function y1(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var v=l.stateNode;v===null&&(v=l.stateNode=new kC),c.forEach(function(x){var S=UC.bind(null,l,x);v.has(x)||(v.add(x),x.then(S,S))})}}function rn(l,c){var v=c.deletions;if(v!==null)for(var x=0;x<v.length;x++){var S=v[x];try{var C=l,D=c;if(Ae){var L=D;e:for(;L!==null;){switch(L.tag){case 5:ir=L.stateNode,In=!1;break e;case 3:case 4:ir=L.stateNode.containerInfo,In=!0;break e}L=L.return}if(ir===null)throw Error(i(160));op(C,D,S),ir=null,In=!1}else op(C,D,S);var $=S.alternate;$!==null&&($.return=null),S.return=null}catch(Y){Je(S,c,Y)}}if(12854&c.subtreeFlags)for(c=c.child;c!==null;)x1(c,l),c=c.sibling}function x1(l,c){var v=l.alternate,x=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(rn(c,l),Mn(l),4&x){try{qa(3,l,l.return),rc(3,l)}catch(K){Je(l,l.return,K)}try{qa(5,l,l.return)}catch(K){Je(l,l.return,K)}}break;case 1:rn(c,l),Mn(l),512&x&&v!==null&&Ao(v,v.return);break;case 5:if(rn(c,l),Mn(l),512&x&&v!==null&&Ao(v,v.return),Ae){if(32&l.flags){var S=l.stateNode;try{Kv(S)}catch(K){Je(l,l.return,K)}}if(4&x&&(S=l.stateNode)!=null){var C=l.memoizedProps;if(v=v!==null?v.memoizedProps:C,x=l.type,c=l.updateQueue,l.updateQueue=null,c!==null)try{FA(S,c,x,v,C,l)}catch(K){Je(l,l.return,K)}}}break;case 6:if(rn(c,l),Mn(l),4&x&&Ae){if(l.stateNode===null)throw Error(i(162));S=l.stateNode,C=l.memoizedProps,v=v!==null?v.memoizedProps:C;try{kA(S,v,C)}catch(K){Je(l,l.return,K)}}break;case 3:if(rn(c,l),Mn(l),4&x){if(Ae&&De&&v!==null&&v.memoizedState.isDehydrated)try{iC(c.containerInfo)}catch(K){Je(l,l.return,K)}if(He){S=c.containerInfo,C=c.pendingChildren;try{cf(S,C)}catch(K){Je(l,l.return,K)}}}break;case 4:if(rn(c,l),Mn(l),4&x&&He){S=(C=l.stateNode).containerInfo,C=C.pendingChildren;try{cf(S,C)}catch(K){Je(l,l.return,K)}}break;case 13:rn(c,l),Mn(l),8192&(S=l.child).flags&&(C=S.memoizedState!==null,S.stateNode.isHidden=C,!C||S.alternate!==null&&S.alternate.memoizedState!==null||(fp=Ct())),4&x&&y1(l);break;case 22:var D=v!==null&&v.memoizedState!==null;if(1&l.mode?(Kt=(v=Kt)||D,rn(c,l),Kt=v):rn(c,l),Mn(l),8192&x){if(v=l.memoizedState!==null,(l.stateNode.isHidden=v)&&!D&&(1&l.mode)!=0)for(ce=l,x=l.child;x!==null;){for(c=ce=x;ce!==null;){var L=(D=ce).child;switch(D.tag){case 0:case 11:case 14:case 15:qa(4,D,D.return);break;case 1:Ao(D,D.return);var $=D.stateNode;if(typeof $.componentWillUnmount=="function"){var Y=D,q=D.return;try{var ie=Y;$.props=ie.memoizedProps,$.state=ie.memoizedState,$.componentWillUnmount()}catch(K){Je(Y,q,K)}}break;case 5:Ao(D,D.return);break;case 22:if(D.memoizedState!==null){S1(c);continue}}L!==null?(L.return=D,ce=L):S1(c)}x=x.sibling}if(Ae){e:if(x=null,Ae)for(c=l;;){if(c.tag===5){if(x===null){x=c;try{S=c.stateNode,v?UA(S):zA(c.stateNode,c.memoizedProps)}catch(K){Je(l,l.return,K)}}}else if(c.tag===6){if(x===null)try{C=c.stateNode,v?GA(C):HA(C,c.memoizedProps)}catch(K){Je(l,l.return,K)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;x===c&&(x=null),c=c.return}x===c&&(x=null),c.sibling.return=c.return,c=c.sibling}}}break;case 19:rn(c,l),Mn(l),4&x&&y1(l);break;case 21:break;default:rn(c,l),Mn(l)}}function Mn(l){var c=l.flags;if(2&c){try{if(Ae){e:{for(var v=l.return;v!==null;){if(g1(v)){var x=v;break e}v=v.return}throw Error(i(160))}switch(x.tag){case 5:var S=x.stateNode;32&x.flags&&(Kv(S),x.flags&=-33),sp(l,v1(l),S);break;case 3:case 4:var C=x.stateNode.containerInfo;ip(l,v1(l),C);break;default:throw Error(i(161))}}}catch(D){Je(l,l.return,D)}l.flags&=-3}4096&c&&(l.flags&=-4097)}function DC(l,c,v){ce=l,_1(l)}function _1(l,c,v){for(var x=(1&l.mode)!=0;ce!==null;){var S=ce,C=S.child;if(S.tag===22&&x){var D=S.memoizedState!==null||tc;if(!D){var L=S.alternate,$=L!==null&&L.memoizedState!==null||Kt;L=tc;var Y=Kt;if(tc=D,(Kt=$)&&!Y)for(ce=S;ce!==null;)$=(D=ce).child,D.tag===22&&D.memoizedState!==null?E1(S):$!==null?($.return=D,ce=$):E1(S);for(;C!==null;)ce=C,_1(C),C=C.sibling;ce=S,tc=L,Kt=Y}w1(l)}else 8772&S.subtreeFlags&&C!==null?(C.return=S,ce=C):w1(l)}}function w1(l){for(;ce!==null;){var c=ce;if(8772&c.flags){var v=c.alternate;try{if(8772&c.flags)switch(c.tag){case 0:case 11:case 15:Kt||rc(5,c);break;case 1:var x=c.stateNode;if(4&c.flags&&!Kt)if(v===null)x.componentDidMount();else{var S=c.elementType===c.type?v.memoizedProps:tn(c.type,v.memoizedProps);x.componentDidUpdate(S,v.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var C=c.updateQueue;C!==null&&xy(c,C,x);break;case 3:var D=c.updateQueue;if(D!==null){if(v=null,c.child!==null)switch(c.child.tag){case 5:v=Q(c.child.stateNode);break;case 1:v=c.child.stateNode}xy(c,D,v)}break;case 5:var L=c.stateNode;v===null&&4&c.flags&&DA(L,c.type,c.memoizedProps,c);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(De&&c.memoizedState===null){var $=c.alternate;if($!==null){var Y=$.memoizedState;if(Y!==null){var q=Y.dehydrated;q!==null&&sC(q)}}}break;default:throw Error(i(163))}Kt||512&c.flags&&np(c)}catch(ie){Je(c,c.return,ie)}}if(c===l){ce=null;break}if((v=c.sibling)!==null){v.return=c.return,ce=v;break}ce=c.return}}function S1(l){for(;ce!==null;){var c=ce;if(c===l){ce=null;break}var v=c.sibling;if(v!==null){v.return=c.return,ce=v;break}ce=c.return}}function E1(l){for(;ce!==null;){var c=ce;try{switch(c.tag){case 0:case 11:case 15:var v=c.return;try{rc(4,c)}catch($){Je(c,v,$)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var S=c.return;try{x.componentDidMount()}catch($){Je(c,S,$)}}var C=c.return;try{np(c)}catch($){Je(c,C,$)}break;case 5:var D=c.return;try{np(c)}catch($){Je(c,D,$)}}}catch($){Je(c,c.return,$)}if(c===l){ce=null;break}var L=c.sibling;if(L!==null){L.return=c.return,ce=L;break}ce=c.return}}var nc=0,ic=1,sc=2,oc=3,ac=4;if(typeof Symbol=="function"&&Symbol.for){var Ja=Symbol.for;nc=Ja("selector.component"),ic=Ja("selector.has_pseudo_class"),sc=Ja("selector.role"),oc=Ja("selector.test_id"),ac=Ja("selector.text")}function ap(l){var c=Xt(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(i(364));return c}if((l=Iu(l))===null)throw Error(i(362));return l.stateNode.current}function lp(l,c){switch(c.$$typeof){case nc:if(l.type===c.value)return!0;break;case ic:e:{c=c.value,l=[l,0];for(var v=0;v<l.length;){var x=l[v++],S=l[v++],C=c[S];if(x.tag!==5||!ws(x)){for(;C!=null&&lp(x,C);)C=c[++S];if(S===c.length){c=!0;break e}for(x=x.child;x!==null;)l.push(x,S),x=x.sibling}}c=!1}return c;case sc:if(l.tag===5&&fo(l.stateNode,c.value))return!0;break;case ac:if((l.tag===5||l.tag===6)&&(l=uf(l))!==null&&0<=l.indexOf(c.value))return!0;break;case oc:if(l.tag===5&&typeof(l=l.memoizedProps["data-testname"])=="string"&&l.toLowerCase()===c.value.toLowerCase())return!0;break;default:throw Error(i(365))}return!1}function up(l){switch(l.$$typeof){case nc:return"<"+(I(l.value)||"Unknown")+">";case ic:return":has("+(up(l)||"")+")";case sc:return'[role="'+l.value+'"]';case ac:return'"'+l.value+'"';case oc:return'[data-testname="'+l.value+'"]';default:throw Error(i(365))}}function T1(l,c){var v=[];l=[l,0];for(var x=0;x<l.length;){var S=l[x++],C=l[x++],D=c[C];if(S.tag!==5||!ws(S)){for(;D!=null&&lp(S,D);)D=c[++C];if(C===c.length)v.push(S);else for(S=S.child;S!==null;)l.push(S,C),S=S.sibling}}return v}function cp(l,c){if(!Ci)throw Error(i(363));l=T1(l=ap(l),c),c=[],l=Array.from(l);for(var v=0;v<l.length;){var x=l[v++];if(x.tag===5)ws(x)||c.push(x.stateNode);else for(x=x.child;x!==null;)l.push(x),x=x.sibling}return c}var FC=Math.ceil,lc=o.ReactCurrentDispatcher,hp=o.ReactCurrentOwner,ft=o.ReactCurrentBatchConfig,Fe=0,Rt=null,yt=null,Lt=0,Er=0,Co=Pi(0),St=0,el=null,Cs=0,uc=0,dp=0,tl=null,Tr=null,fp=0,pp=1/0,ki=null;function Po(){pp=Ct()+500}var b1,cc=!1,mp=null,Di=null,hc=!1,Fi=null,dc=0,rl=0,gp=null,fc=-1,pc=0;function Zt(){return 6&Fe?Ct():fc!==-1?fc:fc=Ct()}function Ni(l){return 1&l.mode?2&Fe&&Lt!==0?Lt&-Lt:xC.transition!==null?(pc===0&&(pc=sy()),pc):(l=Be)!==0?l:wn():1}function Gr(l,c,v,x){if(50<rl)throw rl=0,gp=null,Error(i(185));Ga(l,v,x),2&Fe&&l===Rt||(l===Rt&&(!(2&Fe)&&(uc|=v),St===4&&Bi(l,Lt)),fr(l,x),v===1&&Fe===0&&!(1&c.mode)&&(Po(),Fu&&En()))}function fr(l,c){var v=l.callbackNode;(function(S,C){for(var D=S.suspendedLanes,L=S.pingedLanes,$=S.expirationTimes,Y=S.pendingLanes;0<Y;){var q=31-qr(Y),ie=1<<q,K=$[q];K===-1?ie&D&&!(ie&L)||($[q]=pC(ie,C)):K<=C&&(S.expiredLanes|=ie),Y&=~ie}})(l,c);var x=ku(l,l===Rt?Lt:0);if(x===0)v!==null&&ay(v),l.callbackNode=null,l.callbackPriority=0;else if(c=x&-x,l.callbackPriority!==c){if(v!=null&&ay(v),c===1)l.tag===0?function(S){Fu=!0,uy(S)}(C1.bind(null,l)):uy(C1.bind(null,l)),ti?Pu(function(){!(6&Fe)&&En()}):wf(Sf,En),v=null;else{switch(oy(x)){case 1:v=Sf;break;case 4:v=vC;break;case 16:default:v=ly;break;case 536870912:v=yC}v=N1(v,A1.bind(null,l))}l.callbackPriority=c,l.callbackNode=v}}function A1(l,c){if(fc=-1,pc=0,(6&Fe)!=0)throw Error(i(327));var v=l.callbackNode;if(Is()&&l.callbackNode!==v)return null;var x=ku(l,l===Rt?Lt:0);if(x===0)return null;if(30&x||x&l.expiredLanes||c)c=mc(l,x);else{c=x;var S=Fe;Fe|=2;var C=R1();for(Rt===l&&Lt===c||(ki=null,Po(),Ps(l,c));;)try{BC();break}catch(L){I1(l,L)}Rf(),lc.current=C,Fe=S,yt!==null?c=0:(Rt=null,Lt=0,c=St)}if(c!==0){if(c===2&&(S=yf(l))!==0&&(x=S,c=vp(l,S)),c===1)throw v=el,Ps(l,0),Bi(l,x),fr(l,Ct()),v;if(c===6)Bi(l,x);else{if(S=l.current.alternate,(30&x)==0&&!function(L){for(var $=L;;){if(16384&$.flags){var Y=$.updateQueue;if(Y!==null&&(Y=Y.stores)!==null)for(var q=0;q<Y.length;q++){var ie=Y[q],K=ie.getSnapshot;ie=ie.value;try{if(!Jr(K(),ie))return!1}catch{return!1}}}if(Y=$.child,16384&$.subtreeFlags&&Y!==null)Y.return=$,$=Y;else{if($===L)break;for(;$.sibling===null;){if($.return===null||$.return===L)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}(S)&&((c=mc(l,x))===2&&(C=yf(l))!==0&&(x=C,c=vp(l,C)),c===1))throw v=el,Ps(l,0),Bi(l,x),fr(l,Ct()),v;switch(l.finishedWork=S,l.finishedLanes=x,c){case 0:case 1:throw Error(i(345));case 2:case 5:Io(l,Tr,ki);break;case 3:if(Bi(l,x),(130023424&x)===x&&10<(c=fp+500-Ct())){if(ku(l,0)!==0)break;if(((S=l.suspendedLanes)&x)!==x){Zt(),l.pingedLanes|=l.suspendedLanes&S;break}l.timeoutHandle=be(Io.bind(null,l,Tr,ki),c);break}Io(l,Tr,ki);break;case 4:if(Bi(l,x),(4194240&x)===x)break;for(c=l.eventTimes,S=-1;0<x;){var D=31-qr(x);C=1<<D,(D=c[D])>S&&(S=D),x&=~C}if(x=S,10<(x=(120>(x=Ct()-x)?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*FC(x/1960))-x)){l.timeoutHandle=be(Io.bind(null,l,Tr,ki),x);break}Io(l,Tr,ki);break;default:throw Error(i(329))}}}return fr(l,Ct()),l.callbackNode===v?A1.bind(null,l):null}function vp(l,c){var v=tl;return l.current.memoizedState.isDehydrated&&(Ps(l,c).flags|=256),(l=mc(l,c))!==2&&(c=Tr,Tr=v,c!==null&&yp(c)),l}function yp(l){Tr===null?Tr=l:Tr.push.apply(Tr,l)}function Bi(l,c){for(c&=~dp,c&=~uc,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var v=31-qr(c),x=1<<v;l[v]=-1,c&=~x}}function C1(l){if(6&Fe)throw Error(i(327));Is();var c=ku(l,0);if(!(1&c))return fr(l,Ct()),null;var v=mc(l,c);if(l.tag!==0&&v===2){var x=yf(l);x!==0&&(c=x,v=vp(l,x))}if(v===1)throw v=el,Ps(l,0),Bi(l,c),fr(l,Ct()),v;if(v===6)throw Error(i(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Io(l,Tr,ki),fr(l,Ct()),null}function P1(l){Fi!==null&&Fi.tag===0&&!(6&Fe)&&Is();var c=Fe;Fe|=1;var v=ft.transition,x=Be;try{if(ft.transition=null,Be=1,l)return l()}finally{Be=x,ft.transition=v,!(6&(Fe=c))&&En()}}function xp(){Er=Co.current,Ze(Co)}function Ps(l,c){l.finishedWork=null,l.finishedLanes=0;var v=l.timeoutHandle;if(v!==wt&&(l.timeoutHandle=wt,Le(v)),yt!==null)for(v=yt.return;v!==null;){var x=v;switch(bf(x),x.tag){case 1:(x=x.type.childContextTypes)!=null&&mf();break;case 3:To(),Ze(cr),Ze(Yt),Gf();break;case 5:Lf(x);break;case 4:To();break;case 13:case 19:Ze(ct);break;case 10:Mf(x.type._context);break;case 22:case 23:xp()}v=v.return}if(Rt=l,yt=l=Oi(l.current,null),Lt=Er=c,St=0,el=null,dp=uc=Cs=0,Tr=tl=null,bs!==null){for(c=0;c<bs.length;c++)if((x=(v=bs[c]).interleaved)!==null){v.interleaved=null;var S=x.next,C=v.pending;if(C!==null){var D=C.next;C.next=S,x.next=D}v.pending=x}bs=null}return l}function I1(l,c){for(;;){var v=yt;try{if(Rf(),Wu.current=Ku,Xu){for(var x=rt.memoizedState;x!==null;){var S=x.queue;S!==null&&(S.pending=null),x=x.next}Xu=!1}if(As=0,It=Pt=rt=null,ja=!1,Wa=0,hp.current=null,v===null||v.return===null){St=1,el=c,yt=null;break}e:{var C=l,D=v.return,L=v,$=c;if(c=Lt,L.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var Y=$,q=L,ie=q.tag;if(!(1&q.mode)&&(ie===0||ie===11||ie===15)){var K=q.alternate;K?(q.updateQueue=K.updateQueue,q.memoizedState=K.memoizedState,q.lanes=K.lanes):(q.updateQueue=null,q.memoizedState=null)}var re=qy(D);if(re!==null){re.flags&=-257,Jy(re,D,L,0,c),1&re.mode&&Zy(C,Y,c),$=Y;var de=(c=re).updateQueue;if(de===null){var Ce=new Set;Ce.add($),c.updateQueue=Ce}else de.add($);break e}if(!(1&c)){Zy(C,Y,c),_p();break e}$=Error(i(426))}else if(qe&&1&L.mode){var J=qy(D);if(J!==null){!(65536&J.flags)&&(J.flags|=256),Jy(J,D,L,0,c),Pf(bo($,L));break e}}C=$=bo($,L),St!==4&&(St=2),tl===null?tl=[C]:tl.push(C),C=D;do{switch(C.tag){case 3:C.flags|=65536,c&=-c,C.lanes|=c,yy(C,Qy(0,$,c));break e;case 1:L=$;var z=C.type,X=C.stateNode;if(!(128&C.flags)&&(typeof z.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Di===null||!Di.has(X)))){C.flags|=65536,c&=-c,C.lanes|=c,yy(C,Ky(C,L,c));break e}}C=C.return}while(C!==null)}k1(v)}catch(ee){c=ee,yt===v&&v!==null&&(yt=v=v.return);continue}break}}function R1(){var l=lc.current;return lc.current=Ku,l===null?Ku:l}function _p(){St!==0&&St!==3&&St!==2||(St=4),Rt===null||!(268435455&Cs)&&!(268435455&uc)||Bi(Rt,Lt)}function mc(l,c){var v=Fe;Fe|=2;var x=R1();for(Rt===l&&Lt===c||(ki=null,Ps(l,c));;)try{NC();break}catch(S){I1(l,S)}if(Rf(),Fe=v,lc.current=x,yt!==null)throw Error(i(261));return Rt=null,Lt=0,St}function NC(){for(;yt!==null;)M1(yt)}function BC(){for(;yt!==null&&!mC();)M1(yt)}function M1(l){var c=b1(l.alternate,l,Er);l.memoizedProps=l.pendingProps,c===null?k1(l):yt=c,hp.current=null}function k1(l){var c=l;do{var v=c.alternate;if(l=c.return,(32768&c.flags)==0){if((v=RC(v,c,Er))!==null)return void(yt=v)}else{if((v=MC(v,c))!==null)return v.flags&=32767,void(yt=v);if(l===null)return St=6,void(yt=null);l.flags|=32768,l.subtreeFlags=0,l.deletions=null}if((c=c.sibling)!==null)return void(yt=c);yt=c=l}while(c!==null);St===0&&(St=5)}function Io(l,c,v){var x=Be,S=ft.transition;try{ft.transition=null,Be=1,function(C,D,L,$){do Is();while(Fi!==null);if(6&Fe)throw Error(i(327));L=C.finishedWork;var Y=C.finishedLanes;if(L===null)return null;if(C.finishedWork=null,C.finishedLanes=0,L===C.current)throw Error(i(177));C.callbackNode=null,C.callbackPriority=0;var q=L.lanes|L.childLanes;if(function(re,de){var Ce=re.pendingLanes&~de;re.pendingLanes=de,re.suspendedLanes=0,re.pingedLanes=0,re.expiredLanes&=de,re.mutableReadLanes&=de,re.entangledLanes&=de,de=re.entanglements;var J=re.eventTimes;for(re=re.expirationTimes;0<Ce;){var z=31-qr(Ce),X=1<<z;de[z]=0,J[z]=-1,re[z]=-1,Ce&=~X}}(C,q),C===Rt&&(yt=Rt=null,Lt=0),!(2064&L.subtreeFlags)&&!(2064&L.flags)||hc||(hc=!0,N1(ly,function(){return Is(),null})),q=(15990&L.flags)!=0,(15990&L.subtreeFlags)!=0||q){q=ft.transition,ft.transition=null;var ie=Be;Be=1;var K=Fe;Fe|=4,hp.current=null,function(re,de){for(V(re.containerInfo),ce=de;ce!==null;)if(de=(re=ce).child,(1028&re.subtreeFlags)!=0&&de!==null)de.return=re,ce=de;else for(;ce!==null;){re=ce;try{var Ce=re.alternate;if(1024&re.flags)switch(re.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Ce!==null){var J=Ce.memoizedProps,z=Ce.memoizedState,X=re.stateNode,ee=X.getSnapshotBeforeUpdate(re.elementType===re.type?J:tn(re.type,J),z);X.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:Ae&&$A(re.stateNode.containerInfo);break;default:throw Error(i(163))}}catch(_e){Je(re,re.return,_e)}if((de=re.sibling)!==null){de.return=re.return,ce=de;break}ce=re.return}Ce=p1,p1=!1}(C,L),x1(L,C),G(C.containerInfo),C.current=L,DC(L),gC(),Fe=K,Be=ie,ft.transition=q}else C.current=L;if(hc&&(hc=!1,Fi=C,dc=Y),q=C.pendingLanes,q===0&&(Di=null),function(re){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(Du,re,void 0,(128&re.current.flags)==128)}catch{}}(L.stateNode),fr(C,Ct()),D!==null)for($=C.onRecoverableError,L=0;L<D.length;L++)Y=D[L],$(Y.value,{componentStack:Y.stack,digest:Y.digest});if(cc)throw cc=!1,C=mp,mp=null,C;1&dc&&C.tag!==0&&Is(),q=C.pendingLanes,1&q?C===gp?rl++:(rl=0,gp=C):rl=0,En()}(l,c,v,x)}finally{ft.transition=S,Be=x}return null}function Is(){if(Fi!==null){var l=oy(dc),c=ft.transition,v=Be;try{if(ft.transition=null,Be=16>l?16:l,Fi===null)var x=!1;else{if(l=Fi,Fi=null,dc=0,(6&Fe)!=0)throw Error(i(331));var S=Fe;for(Fe|=4,ce=l.current;ce!==null;){var C=ce,D=C.child;if(16&ce.flags){var L=C.deletions;if(L!==null){for(var $=0;$<L.length;$++){var Y=L[$];for(ce=Y;ce!==null;){var q=ce;switch(q.tag){case 0:case 11:case 15:qa(8,q,C)}var ie=q.child;if(ie!==null)ie.return=q,ce=ie;else for(;ce!==null;){var K=(q=ce).sibling,re=q.return;if(m1(q),q===Y){ce=null;break}if(K!==null){K.return=re,ce=K;break}ce=re}}}var de=C.alternate;if(de!==null){var Ce=de.child;if(Ce!==null){de.child=null;do{var J=Ce.sibling;Ce.sibling=null,Ce=J}while(Ce!==null)}}ce=C}}if(2064&C.subtreeFlags&&D!==null)D.return=C,ce=D;else e:for(;ce!==null;){if(2048&(C=ce).flags)switch(C.tag){case 0:case 11:case 15:qa(9,C,C.return)}var z=C.sibling;if(z!==null){z.return=C.return,ce=z;break e}ce=C.return}}var X=l.current;for(ce=X;ce!==null;){var ee=(D=ce).child;if(2064&D.subtreeFlags&&ee!==null)ee.return=D,ce=ee;else e:for(D=X;ce!==null;){if(2048&(L=ce).flags)try{switch(L.tag){case 0:case 11:case 15:rc(9,L)}}catch(Ue){Je(L,L.return,Ue)}if(L===D){ce=null;break e}var _e=L.sibling;if(_e!==null){_e.return=L.return,ce=_e;break e}ce=L.return}}if(Fe=S,En(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(Du,l)}catch{}x=!0}return x}finally{Be=v,ft.transition=c}}return!1}function D1(l,c,v){l=Mi(l,c=Qy(0,c=bo(v,c),1),1),c=Zt(),l!==null&&(Ga(l,1,c),fr(l,c))}function Je(l,c,v){if(l.tag===3)D1(l,l,v);else for(;c!==null;){if(c.tag===3){D1(c,l,v);break}if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Di===null||!Di.has(x))){c=Mi(c,l=Ky(c,l=bo(v,l),1),1),l=Zt(),c!==null&&(Ga(c,1,l),fr(c,l));break}}c=c.return}}function OC(l,c,v){var x=l.pingCache;x!==null&&x.delete(c),c=Zt(),l.pingedLanes|=l.suspendedLanes&v,Rt===l&&(Lt&v)===v&&(St===4||St===3&&(130023424&Lt)===Lt&&500>Ct()-fp?Ps(l,0):dp|=v),fr(l,c)}function F1(l,c){c===0&&(1&l.mode?(c=vf,!(130023424&(vf<<=1))&&(vf=4194304)):c=1);var v=Zt();(l=bn(l,c))!==null&&(Ga(l,c,v),fr(l,v))}function LC(l){var c=l.memoizedState,v=0;c!==null&&(v=c.retryLane),F1(l,v)}function UC(l,c){var v=0;switch(l.tag){case 13:var x=l.stateNode,S=l.memoizedState;S!==null&&(v=S.retryLane);break;case 19:x=l.stateNode;break;default:throw Error(i(314))}x!==null&&x.delete(c),F1(l,v)}function N1(l,c){return wf(l,c)}function GC(l,c,v,x){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(l,c,v,x){return new GC(l,c,v,x)}function wp(l){return!(!(l=l.prototype)||!l.isReactComponent)}function Oi(l,c){var v=l.alternate;return v===null?((v=zr(l.tag,c,l.key,l.mode)).elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=c,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=14680064&l.flags,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,c=l.dependencies,v.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v}function gc(l,c,v,x,S,C){var D=2;if(x=l,typeof l=="function")wp(l)&&(D=1);else if(typeof l=="string")D=5;else e:switch(l){case h:return Rs(v.children,S,C,c);case f:D=8,S|=8;break;case m:return(l=zr(12,v,c,2|S)).elementType=m,l.lanes=C,l;case y:return(l=zr(13,v,c,S)).elementType=y,l.lanes=C,l;case _:return(l=zr(19,v,c,S)).elementType=_,l.lanes=C,l;case E:return vc(v,S,C,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case p:D=10;break e;case d:D=9;break e;case g:D=11;break e;case w:D=14;break e;case T:D=16,x=null;break e}throw Error(i(130,l==null?l:typeof l,""))}return(c=zr(D,v,c,S)).elementType=l,c.type=x,c.lanes=C,c}function Rs(l,c,v,x){return(l=zr(7,l,x,c)).lanes=v,l}function vc(l,c,v,x){return(l=zr(22,l,x,c)).elementType=E,l.lanes=v,l.stateNode={isHidden:!1},l}function Sp(l,c,v){return(l=zr(6,l,null,c)).lanes=v,l}function Ep(l,c,v){return(c=zr(4,l.children!==null?l.children:[],l.key,c)).lanes=v,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function zC(l,c,v,x,S){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=wt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xf(0),this.expirationTimes=xf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xf(0),this.identifierPrefix=x,this.onRecoverableError=S,De&&(this.mutableSourceEagerHydrationData=null)}function B1(l,c,v,x,S,C,D,L,$){return l=new zC(l,c,v,L,$),c===1?(c=1,C===!0&&(c|=8)):c=0,C=zr(3,null,null,c),l.current=C,C.stateNode=l,C.memoizedState={element:x,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ff(C),l}function O1(l){if(!l)return Ii;e:{if(P(l=l._reactInternals)!==l||l.tag!==1)throw Error(i(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(wr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(i(171))}if(l.tag===1){var v=l.type;if(wr(v))return ny(l,v,c)}return c}function L1(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return(l=B(c))===null?null:l.stateNode}function U1(l,c){if((l=l.memoizedState)!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<c?v:c}}function yc(l,c){U1(l,c),(l=l.alternate)&&U1(l,c)}function HC(l){return(l=B(l))===null?null:l.stateNode}function $C(){return null}return b1=function(l,c,v){if(l!==null)if(l.memoizedProps!==c.pendingProps||cr.current)hr=!0;else{if(!(l.lanes&v)&&!(128&c.flags))return hr=!1,function(ie,K,re){switch(K.tag){case 3:o1(K),xo();break;case 5:Cy(K);break;case 1:wr(K.type)&&Mu(K);break;case 4:Of(K,K.stateNode.containerInfo);break;case 10:my(0,K.type._context,K.memoizedProps.value);break;case 13:var de=K.memoizedState;if(de!==null)return de.dehydrated!==null?(Ve(ct,1&ct.current),K.flags|=128,null):re&K.child.childLanes?l1(ie,K,re):(Ve(ct,1&ct.current),(ie=si(ie,K,re))!==null?ie.sibling:null);Ve(ct,1&ct.current);break;case 19:if(de=(re&K.childLanes)!=0,(128&ie.flags)!=0){if(de)return c1(ie,K,re);K.flags|=128}var Ce=K.memoizedState;if(Ce!==null&&(Ce.rendering=null,Ce.tail=null,Ce.lastEffect=null),Ve(ct,ct.current),de)break;return null;case 22:case 23:return K.lanes=0,n1(ie,K,re)}return si(ie,K,re)}(l,c,v);hr=(131072&l.flags)!=0}else hr=!1,qe&&1048576&c.flags&&cy(c,Bu,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;ec(l,c),l=c.pendingProps;var S=go(c,Yt.current);wo(c,v),S=$f(null,c,x,l,S,v);var C=Vf();return c.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,wr(x)?(C=!0,Mu(c)):C=!1,c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,Ff(c),S.updater=$u,c.stateNode=S,S._reactInternals=c,Bf(c,x,l,v),c=qf(null,c,x,!0,C,v)):(c.tag=0,qe&&C&&Tf(c),dr(null,c,S,v),c=c.child),c;case 16:x=c.elementType;e:{switch(ec(l,c),l=c.pendingProps,x=(S=x._init)(x._payload),c.type=x,S=c.tag=function(ie){if(typeof ie=="function")return wp(ie)?1:0;if(ie!=null){if((ie=ie.$$typeof)===g)return 11;if(ie===w)return 14}return 2}(x),l=tn(x,l),S){case 0:c=Zf(null,c,x,l,v);break e;case 1:c=s1(null,c,x,l,v);break e;case 11:c=e1(null,c,x,l,v);break e;case 14:c=t1(null,c,x,tn(x.type,l),v);break e}throw Error(i(306,x,""))}return c;case 0:return x=c.type,S=c.pendingProps,Zf(l,c,x,S=c.elementType===x?S:tn(x,S),v);case 1:return x=c.type,S=c.pendingProps,s1(l,c,x,S=c.elementType===x?S:tn(x,S),v);case 3:e:{if(o1(c),l===null)throw Error(i(387));x=c.pendingProps,S=(C=c.memoizedState).element,vy(l,c),Hu(c,x,null,v);var D=c.memoizedState;if(x=D.element,De&&C.isDehydrated){if(C={element:x,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},c.updateQueue.baseState=C,c.memoizedState=C,256&c.flags){c=a1(l,c,x,v,S=bo(Error(i(423)),c));break e}if(x!==S){c=a1(l,c,x,v,S=bo(Error(i(424)),c));break e}for(De&&(Br=qA(c.stateNode.containerInfo),Sr=c,qe=!0,en=null,za=!1),v=Ay(c,null,x,v),c.child=v;v;)v.flags=-3&v.flags|4096,v=v.sibling}else{if(xo(),x===S){c=si(l,c,v);break e}dr(l,c,x,v)}c=c.child}return c;case 5:return Cy(c),l===null&&Cf(c),x=c.type,S=c.pendingProps,C=l!==null?l.memoizedProps:null,D=S.children,Te(x,S)?D=null:C!==null&&Te(x,C)&&(c.flags|=32),i1(l,c),dr(l,c,D,v),c.child;case 6:return l===null&&Cf(c),null;case 13:return l1(l,c,v);case 4:return Of(c,c.stateNode.containerInfo),x=c.pendingProps,l===null?c.child=So(c,null,x,v):dr(l,c,x,v),c.child;case 11:return x=c.type,S=c.pendingProps,e1(l,c,x,S=c.elementType===x?S:tn(x,S),v);case 7:return dr(l,c,c.pendingProps,v),c.child;case 8:case 12:return dr(l,c,c.pendingProps.children,v),c.child;case 10:e:{if(x=c.type._context,S=c.pendingProps,C=c.memoizedProps,my(0,x,D=S.value),C!==null)if(Jr(C.value,D)){if(C.children===S.children&&!cr.current){c=si(l,c,v);break e}}else for((C=c.child)!==null&&(C.return=c);C!==null;){var L=C.dependencies;if(L!==null){D=C.child;for(var $=L.firstContext;$!==null;){if($.context===x){if(C.tag===1){($=ii(-1,v&-v)).tag=2;var Y=C.updateQueue;if(Y!==null){var q=(Y=Y.shared).pending;q===null?$.next=$:($.next=q.next,q.next=$),Y.pending=$}}C.lanes|=v,($=C.alternate)!==null&&($.lanes|=v),kf(C.return,v,c),L.lanes|=v;break}$=$.next}}else if(C.tag===10)D=C.type===c.type?null:C.child;else if(C.tag===18){if((D=C.return)===null)throw Error(i(341));D.lanes|=v,(L=D.alternate)!==null&&(L.lanes|=v),kf(D,v,c),D=C.sibling}else D=C.child;if(D!==null)D.return=C;else for(D=C;D!==null;){if(D===c){D=null;break}if((C=D.sibling)!==null){C.return=D.return,D=C;break}D=D.return}C=D}dr(l,c,S.children,v),c=c.child}return c;case 9:return S=c.type,x=c.pendingProps.children,wo(c,v),x=x(S=Or(S)),c.flags|=1,dr(l,c,x,v),c.child;case 14:return S=tn(x=c.type,c.pendingProps),t1(l,c,x,S=tn(x.type,S),v);case 15:return r1(l,c,c.type,c.pendingProps,v);case 17:return x=c.type,S=c.pendingProps,S=c.elementType===x?S:tn(x,S),ec(l,c),c.tag=1,wr(x)?(l=!0,Mu(c)):l=!1,wo(c,v),Sy(c,x,S),Bf(c,x,S,v),qf(null,c,x,!0,l,v);case 19:return c1(l,c,v);case 22:return n1(l,c,v)}throw Error(i(156,c.tag))},e.attemptContinuousHydration=function(l){if(l.tag===13){var c=bn(l,134217728);c!==null&&Gr(c,l,134217728,Zt()),yc(l,134217728)}},e.attemptDiscreteHydration=function(l){if(l.tag===13){var c=bn(l,1);c!==null&&Gr(c,l,1,Zt()),yc(l,1)}},e.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=Ni(l),v=bn(l,c);v!==null&&Gr(v,l,c,Zt()),yc(l,c)}},e.attemptSynchronousHydration=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var v=Ua(c.pendingLanes);v!==0&&(_f(c,1|v),fr(c,Ct()),!(6&Fe)&&(Po(),En()))}break;case 13:P1(function(){var x=bn(l,1);if(x!==null){var S=Zt();Gr(x,l,1,S)}}),yc(l,1)}},e.batchedUpdates=function(l,c){var v=Fe;Fe|=1;try{return l(c)}finally{(Fe=v)===0&&(Po(),Fu&&En())}},e.createComponentSelector=function(l){return{$$typeof:nc,value:l}},e.createContainer=function(l,c,v,x,S,C,D){return B1(l,c,!1,null,0,x,0,C,D)},e.createHasPseudoClassSelector=function(l){return{$$typeof:ic,value:l}},e.createHydrationContainer=function(l,c,v,x,S,C,D,L,$){return(l=B1(v,x,!0,l,0,C,0,L,$)).context=O1(null),v=l.current,(C=ii(x=Zt(),S=Ni(v))).callback=c??null,Mi(v,C,S),l.current.lanes=S,Ga(l,S,x),fr(l,x),l},e.createPortal=function(l,c,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:x==null?null:""+x,children:l,containerInfo:c,implementation:v}},e.createRoleSelector=function(l){return{$$typeof:sc,value:l}},e.createTestNameSelector=function(l){return{$$typeof:oc,value:l}},e.createTextSelector=function(l){return{$$typeof:ac,value:l}},e.deferredUpdates=function(l){var c=Be,v=ft.transition;try{return ft.transition=null,Be=16,l()}finally{Be=c,ft.transition=v}},e.discreteUpdates=function(l,c,v,x,S){var C=Be,D=ft.transition;try{return ft.transition=null,Be=1,l(c,v,x,S)}finally{Be=C,ft.transition=D,Fe===0&&Po()}},e.findAllNodes=cp,e.findBoundingRects=function(l,c){if(!Ci)throw Error(i(363));c=cp(l,c),l=[];for(var v=0;v<c.length;v++)l.push(ho(c[v]));for(c=l.length-1;0<c;c--)for(var x=(v=l[c]).x,S=x+v.width,C=v.y,D=C+v.height,L=c-1;0<=L;L--)if(c!==L){var $=l[L],Y=$.x,q=Y+$.width,ie=$.y,K=ie+$.height;if(x>=Y&&C>=ie&&S<=q&&D<=K){l.splice(c,1);break}if(!(x!==Y||v.width!==$.width||K<C||ie>D)){ie>C&&($.height+=ie-C,$.y=C),K<D&&($.height=D-ie),l.splice(c,1);break}if(!(C!==ie||v.height!==$.height||q<x||Y>S)){Y>x&&($.width+=Y-x,$.x=x),q<S&&($.width=S-Y),l.splice(c,1);break}}return l},e.findHostInstance=L1,e.findHostInstanceWithNoPortals=function(l){return(l=(l=M(l))!==null?N(l):null)===null?null:l.stateNode},e.findHostInstanceWithWarning=function(l){return L1(l)},e.flushControlled=function(l){var c=Fe;Fe|=1;var v=ft.transition,x=Be;try{ft.transition=null,Be=1,l()}finally{Be=x,ft.transition=v,(Fe=c)===0&&(Po(),En())}},e.flushPassiveEffects=Is,e.flushSync=P1,e.focusWithin=function(l,c){if(!Ci)throw Error(i(363));for(c=T1(l=ap(l),c),c=Array.from(c),l=0;l<c.length;){var v=c[l++];if(!ws(v)){if(v.tag===5&&po(v.stateNode))return!0;for(v=v.child;v!==null;)c.push(v),v=v.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Be},e.getFindAllNodesFailureDescription=function(l,c){if(!Ci)throw Error(i(363));var v=0,x=[];l=[ap(l),0];for(var S=0;S<l.length;){var C=l[S++],D=l[S++],L=c[D];if((C.tag!==5||!ws(C))&&(lp(C,L)&&(x.push(up(L)),++D>v&&(v=D)),D<c.length))for(C=C.child;C!==null;)l.push(C,D),C=C.sibling}if(v<c.length){for(l=[];v<c.length;v++)l.push(up(c[v]));return`findAllNodes was able to match part of the selector:
  `+x.join(" > ")+`

No matching component was found for:
  `+l.join(" > ")}return null},e.getPublicRootInstance=function(l){return(l=l.current).child?l.child.tag===5?Q(l.child.stateNode):l.child.stateNode:null},e.injectIntoDevTools=function(l){if(l={bundleType:l.bundleType,version:l.version,rendererPackageName:l.rendererPackageName,rendererConfig:l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:HC,findFiberByHostInstance:l.findFiberByHostInstance||$C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{Du=c.inject(l),Sn=c}catch{}l=!!c.checkDCE}}return l},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(l,c,v,x){if(!Ci)throw Error(i(363));l=cp(l,c);var S=IA(l,v,x).disconnect;return{disconnect:function(){S()}}},e.registerMutableSourceForHydration=function(l,c){var v=c._getVersion;v=v(c._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[c,v]:l.mutableSourceEagerHydrationData.push(c,v)},e.runWithPriority=function(l,c){var v=Be;try{return Be=l,c()}finally{Be=v}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(l,c,v,x){var S=c.current,C=Zt(),D=Ni(S);return v=O1(v),c.context===null?c.context=v:c.pendingContext=v,(c=ii(C,D)).payload={element:l},(x=x===void 0?null:x)!==null&&(c.callback=x),(l=Mi(S,c,D))!==null&&(Gr(l,S,D,C),zu(l,S,D)),D},e}),Cw}({get exports(){return T0},set exports(t){T0=t}}).exports=nN();var iN=RF(T0),tA={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},A0={},nh={get exports(){return A0},set exports(t){A0=t}};(function(){var t,e,r,n,s,i;typeof performance<"u"&&performance!==null&&performance.now?nh.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(nh.exports=function(){return(t()-s)/1e6},e=process.hrtime,n=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),i=1e9*process.uptime(),s=n-i):Date.now?(nh.exports=function(){return Date.now()-r},r=Date.now()):(nh.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(IF);var Rw,ia={},Ds={};({get exports(){return ia},set exports(t){ia=t}}).exports=(Rw||(Rw=1,Ds.ConcurrentRoot=1,Ds.ContinuousEventPriority=4,Ds.DefaultEventPriority=16,Ds.DiscreteEventPriority=1,Ds.IdleEventPriority=536870912,Ds.LegacyRoot=0),Ds);var sN={};function Bm(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function rA(t,e){var r,n,s;(r=t.willUnmount)===null||r===void 0||r.call(t,t,e),((n=t.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(s=t.children)!==null&&s!==void 0&&s.length&&bi(t.children).forEach(function(i){rA(i,t)})}function Mw(t,e){var r;rA(e,t),t.removeChild(e);var n=(r=e.config)!==null&&r!==void 0?r:{},s=n.destroy,i=s===void 0||s,o=n.destroyChildren,a=o===void 0||o,u=n.destroyTexture,h=u!==void 0&&u,f=n.destroyBaseTexture,m=f!==void 0&&f;i&&e.destroy({children:a,texture:h,baseTexture:m})}function kw(t,e,r){var n,s;dt(e!==r,"Cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var i=t.getChildIndex(r);t.addChildAt(e,i),(n=t.__reactpixi)===null||n===void 0||(s=n.root)===null||s===void 0||s.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var Dw=null,pn=iN({getRootHostContext:function(){return sN},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return ia.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ia.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ia.ContinuousEventPriority;default:return ia.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=JF[t];if(typeof i=="function"&&(e=i(s,n)),!e){var o=eA[t];o&&((e=o.create(n,{root:s})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:s},(typeof((r=e)===null||r===void 0?void 0:r.applyProps)=="function"?e.applyProps:qn)(e,{},n)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var r=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=r},finalizeInitialChildren:function(t,e,r){return!1},prepareUpdate:function(t,e,r,n,s,i){return Dw=function(o,a,u,h){var f=null;for(var m in u)!h.hasOwnProperty(m)&&u.hasOwnProperty(m)&&u[m]!==null&&(m===S0||(f||(f=[]),f.push(m,null)));for(var p in h){var d=h[p],g=u!==null?u[p]:void 0;!h.hasOwnProperty(p)||d===g||d===null&&g===null||p===S0||(f||(f=[]),f.push(p,d))}return f}(0,0,r,n)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var r=e.alpha===void 0||e.alpha>0,n=e.renderable===void 0||e.renderable===!0,s=e.visible===void 0||e.visible===!0;return!(r&&n&&s)},createTextInstance:function(t,e,r){dt(!1,'Error trying to add text node "'.concat(t,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:A0,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=Bm.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),i},appendChild:function(){for(var t,e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=Bm.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),i},appendChildToContainer:function(){for(var t,e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=Bm.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),i},removeChild:function(){for(var t,e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=Mw.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),i},removeChildFromContainer:function(){for(var t,e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=Mw.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),i},insertBefore:kw,insertInContainerBefore:function(){for(var t,e,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=kw.apply(null,n);return(t=n[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),i},commitUpdate:function(t,e,r,n,s){var i,o,a=t&&t.applyProps;typeof a!="function"&&(a=qn),(a(t,n,s)||Dw)&&((i=t.__reactpixi)===null||i===void 0||(o=i.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,r,n,s){},commitTextUpdate:function(t,e,r){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),oN=tA.dependencies["react-dom"].replace(/[^0-9.]/g,""),aN=tA.name;pn.injectIntoDevTools({bundleType:0,version:oN,rendererPackageName:aN,findHostInstanceByFiber:pn.findHostInstance});var us=new Map;function nA(t){if(dt(ar.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `Container`."),us.has(t)){var e=us.get(t).pixiFiberContainer;pn.updateContainer(null,e,void 0,function(){us.delete(t)})}}function iA(t){dt(ar.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `Container`.");var e=us.get(t);if(dt(!e,"createRoot should only be called once"),!e){var r=pn.createContainer(t);e={pixiFiberContainer:r,reactRoot:{render:function(n){return pn.updateContainer(n,r,void 0),pn.getPublicRootInstance(r)},unmount:function(){nA(t),us.delete(t)}}},us.set(t,e)}return e.reactRoot}function lN(t,e,r){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),r!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),us.has(e)?n=us.get(e).reactRoot:n=iA(e),n.render(t)}function uN(t){nA(t)}function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pu.apply(this,arguments)}function cN(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Zb(n.key),n)}}function li(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ad(t,e){return Ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ad(t,e)}function dN(t,e){if(e&&(Ir(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return li(t)}function Cd(t){return Cd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cd(t)}var af=jn.createContext(null),sA=af.Provider,oA=af.Consumer,fN=function(t){var e=jn.forwardRef(function(r,n){return jn.createElement(oA,null,function(s){return jn.createElement(t,pu({},r,{ref:n,app:s}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function pN(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=Cd(t);if(e){var s=Cd(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return dN(this,r)}}function Fw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function ih(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fw(Object(r),!0).forEach(function(n){mt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Nw=function(){},aA={width:Xe.number,height:Xe.number,onMount:Xe.func,onUnmount:Xe.func,raf:Xe.bool,renderOnComponentChange:Xe.bool,children:Xe.node,options:Xe.shape({autoStart:Xe.bool,width:Xe.number,height:Xe.number,useContextAlpha:Xe.bool,backgroundAlpha:Xe.number,autoDensity:Xe.bool,antialias:Xe.bool,preserveDrawingBuffer:Xe.bool,resolution:Xe.number,forceCanvas:Xe.bool,backgroundColor:Xe.number,clearBeforeRender:Xe.bool,powerPreference:Xe.string,sharedTicker:Xe.bool,sharedLoader:Xe.bool,resizeTo:function(t,e){var r=t[e];r&&dt(r===window||r instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ir(r),", expect `window` or an `HTMLElement`."))},view:function(t,e,r){var n=t[e];n&&dt(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ir(n),", supplied to ").concat(r,", expected `<canvas> Element`"))}})},mN={width:800,height:600,onMount:Nw,onUnmount:Nw,raf:!0,renderOnComponentChange:!0},C0=function(t){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&Ad(i,o)})(s,jn.Component);var e,r,n=pN(s);function s(){var i;cN(this,s);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return mt(li(i=n.call.apply(n,[this].concat(a))),"_canvas",null),mt(li(i),"_mediaQuery",null),mt(li(i),"_ticker",null),mt(li(i),"_needsUpdate",!0),mt(li(i),"app",null),mt(li(i),"updateSize",function(){var h=i.props,f=h.width,m=h.height,p=h.options;p!=null&&p.resolution||(i.app.renderer.resolution=window.devicePixelRatio,i.resetInteractionManager()),i.app.renderer.resize(f,m)}),mt(li(i),"needsRenderUpdate",function(){i._needsUpdate=!0}),mt(li(i),"renderStage",function(){var h=i.props,f=h.renderOnComponentChange;!h.raf&&f&&i._needsUpdate&&(i._needsUpdate=!1,i.app.renderer.render(i.app.stage))}),i}return e=s,(r=[{key:"componentDidMount",value:function(){var i=this.props,o=i.onMount,a=i.width,u=i.height,h=i.options,f=i.raf,m=i.renderOnComponentChange;this.app=new of(ih(ih({width:a,height:u,view:this._canvas},h),{},{autoDensity:(h==null?void 0:h.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[f?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=pn.createContainer(this.app.stage),pn.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),h!=null&&h.autoDensity&&window.matchMedia&&(h==null?void 0:h.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),m&&!f&&(this._ticker=new Nt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(i,o,a){var u,h=this.props,f=h.width,m=h.height,p=h.raf,d=h.renderOnComponentChange,g=h.options;(g==null?void 0:g.resolution)!==void 0&&(i==null?void 0:i.options.resolution)!==(g==null?void 0:g.resolution)&&(this.app.renderer.resolution=g.resolution,this.resetInteractionManager()),i.height===m&&i.width===f&&((u=i.options)===null||u===void 0?void 0:u.resolution)===(g==null?void 0:g.resolution)||this.updateSize(),i.raf!==p&&this.app.ticker[p?"start":"stop"](),pn.updateContainer(this.getChildren(),this.mountNode,this),i.width===f&&i.height===m&&i.raf===p&&i.renderOnComponentChange===d&&i.options===g||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var i=this.app.renderer.plugins.interaction;i!=null&&i.resolution&&(i.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var i=this.props.children;return jn.createElement(sA,{value:this.app},i)}},{key:"componentDidCatch",value:function(i,o){console.error("Error occurred in `Stage`."),console.error(i),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),pn.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var i,o,a=this,u=this.props.options;return u&&u.view?(dt(u.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):jn.createElement("canvas",pu({},(i=this.props,o=[].concat(bi(Object.keys(aA)),bi(Object.keys(E0))),Object.keys(i).filter(function(h){return!o.includes(h)}).reduce(function(h,f){return ih(ih({},h),{},mt({},f,i[f]))},{})),{ref:function(h){return a._canvas=h}}))}}])&&hN(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),s}();C0.propTypes=aA,C0.defaultProps=mN;var gN=C0;function lA(){var t=xe.useContext(af);return dt(t instanceof of,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),t}function vN(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=lA();dt(typeof t=="function","`useTick` needs a callback function."),dt(r instanceof of,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var n=xe.useRef(null);xe.useEffect(function(){n.current=t},[t]),xe.useEffect(function(){if(e){var s=function(i){return n.current.apply(r.ticker,[i,r.ticker])};return r.ticker.add(s),function(){r.ticker&&r.ticker.remove(s)}}},[e])}function yN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P0(t,e,r){return P0=yN()?Reflect.construct.bind():function(n,s,i){var o=[null];o.push.apply(o,s);var a=new(Function.bind.apply(n,o));return i&&Ad(a,i.prototype),a},P0.apply(null,arguments)}var xN=["children","apply"];function Bw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function sh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bw(Object(r),!0).forEach(function(n){mt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bw(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var _N=function(t,e){dt(Ir(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var r=Object.keys(e),n=function(s){var i=s.children,o=s.apply,a=xs(s,xN),u=xe.useRef(xe.useMemo(function(){return r.map(function(m){var p,d=(a==null||(p=a[m])===null||p===void 0?void 0:p.construct)||[];return P0(e[m],bi(d))})},[r])),h=xe.useMemo(function(){return r.reduce(function(m,p,d){return sh(sh({},m),{},mt({},p,u.current[d]))},{})},[r]),f=xe.useMemo(function(){return Object.keys(a).filter(Jb(qb(r))).reduce(function(m,p){return sh(sh({},m),{},mt({},p,a[p]))},{})},[a,r]);return r.forEach(function(m,p){return Object.assign(u.current[p],a[m])}),o&&function(){for(var m=arguments.length,p=new Array(m),d=0;d<m;d++)p[d]=arguments[d];return p.every(function(g){return typeof g=="function"})}(o)&&o.call(t,h),jn.createElement(t,pu({},f,{filters:u.current}),i)};return n.displayName="FilterWrapper",n.propTypes={children:Xe.node,apply:Xe.func},n},wN=_r.BitmapText,SN=_r.Container,EN=_r.Graphics,TN=_r.NineSlicePlane,bN=_r.ParticleContainer,AN=_r.Sprite,CN=_r.AnimatedSprite,PN=_r.Text,IN=_r.TilingSprite,RN=_r.SimpleMesh,MN=_r.SimpleRope;const kN=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:CN,AppConsumer:oA,AppContext:af,AppProvider:sA,BitmapText:wN,Container:SN,Graphics:EN,NineSlicePlane:TN,ParticleContainer:bN,PixiComponent:eN,PixiFiber:pn,SimpleMesh:RN,SimpleRope:MN,Sprite:AN,Stage:gN,TYPES:_r,Text:PN,TilingSprite:IN,applyDefaultProps:qn,createRoot:iA,eventHandlers:bd,render:lN,unmountComponentAtNode:uN,useApp:lA,useTick:vN,withFilters:_N,withPixiApp:fN},Symbol.toStringTag,{value:"Module"})),DN=eS(kN);Wd.exports=DN;var ot=Wd.exports,uA={exports:{}};/*!
 * matter-js 0.19.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(t,e){(function(n,s){t.exports=s()})(Xs,function(){return function(r){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=n,s.d=function(i,o,a){s.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:a})},s.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},s.t=function(i,o){if(o&1&&(i=s(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var u in i)s.d(a,u,(function(h){return i[h]}).bind(null,u));return a},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=20)}([function(r,n){var s={};r.exports=s,function(){s._baseDelta=1e3/60,s._nextId=0,s._seed=0,s._nowStartTime=+new Date,s._warnedOnce={},s._decomp=null,s.extend=function(o,a){var u,h;typeof a=="boolean"?(u=2,h=a):(u=1,h=!0);for(var f=u;f<arguments.length;f++){var m=arguments[f];if(m)for(var p in m)h&&m[p]&&m[p].constructor===Object&&(!o[p]||o[p].constructor===Object)?(o[p]=o[p]||{},s.extend(o[p],h,m[p])):o[p]=m[p]}return o},s.clone=function(o,a){return s.extend({},a,o)},s.keys=function(o){if(Object.keys)return Object.keys(o);var a=[];for(var u in o)a.push(u);return a},s.values=function(o){var a=[];if(Object.keys){for(var u=Object.keys(o),h=0;h<u.length;h++)a.push(o[u[h]]);return a}for(var f in o)a.push(o[f]);return a},s.get=function(o,a,u,h){a=a.split(".").slice(u,h);for(var f=0;f<a.length;f+=1)o=o[a[f]];return o},s.set=function(o,a,u,h,f){var m=a.split(".").slice(h,f);return s.get(o,a,0,-1)[m[m.length-1]]=u,u},s.shuffle=function(o){for(var a=o.length-1;a>0;a--){var u=Math.floor(s.random()*(a+1)),h=o[a];o[a]=o[u],o[u]=h}return o},s.choose=function(o){return o[Math.floor(s.random()*o.length)]},s.isElement=function(o){return typeof HTMLElement<"u"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},s.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},s.isFunction=function(o){return typeof o=="function"},s.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},s.isString=function(o){return toString.call(o)==="[object String]"},s.clamp=function(o,a,u){return o<a?a:o>u?u:o},s.sign=function(o){return o<0?-1:1},s.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-s._nowStartTime},s.random=function(o,a){return o=typeof o<"u"?o:0,a=typeof a<"u"?a:1,o+i()*(a-o)};var i=function(){return s._seed=(s._seed*9301+49297)%233280,s._seed/233280};s.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},s.logLevel=1,s.log=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.info=function(){console&&s.logLevel>0&&s.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warn=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");s._warnedOnce[o]||(s.warn(o),s._warnedOnce[o]=!0)},s.deprecated=function(o,a,u){o[a]=s.chain(function(){s.warnOnce(" deprecated ",u)},o[a])},s.nextId=function(){return s._nextId++},s.indexOf=function(o,a){if(o.indexOf)return o.indexOf(a);for(var u=0;u<o.length;u++)if(o[u]===a)return u;return-1},s.map=function(o,a){if(o.map)return o.map(a);for(var u=[],h=0;h<o.length;h+=1)u.push(a(o[h]));return u},s.topologicalSort=function(o){var a=[],u=[],h=[];for(var f in o)!u[f]&&!h[f]&&s._topologicalSort(f,u,h,o,a);return a},s._topologicalSort=function(o,a,u,h,f){var m=h[o]||[];u[o]=!0;for(var p=0;p<m.length;p+=1){var d=m[p];u[d]||a[d]||s._topologicalSort(d,a,u,h,f)}u[o]=!1,a[o]=!0,f.push(o)},s.chain=function(){for(var o=[],a=0;a<arguments.length;a+=1){var u=arguments[a];u._chained?o.push.apply(o,u._chained):o.push(u)}var h=function(){for(var f,m=new Array(arguments.length),p=0,d=arguments.length;p<d;p++)m[p]=arguments[p];for(p=0;p<o.length;p+=1){var g=o[p].apply(f,m);typeof g<"u"&&(f=g)}return f};return h._chained=o,h},s.chainPathBefore=function(o,a,u){return s.set(o,a,s.chain(u,s.get(o,a)))},s.chainPathAfter=function(o,a,u){return s.set(o,a,s.chain(s.get(o,a),u))},s.setDecomp=function(o){s._decomp=o},s.getDecomp=function(){var o=s._decomp;try{!o&&typeof window<"u"&&(o=window.decomp),!o&&typeof Xs<"u"&&(o=Xs.decomp)}catch{o=null}return o}}()},function(r,n){var s={};r.exports=s,function(){s.create=function(i){var o={min:{x:0,y:0},max:{x:0,y:0}};return i&&s.update(o,i),o},s.update=function(i,o,a){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var u=0;u<o.length;u++){var h=o[u];h.x>i.max.x&&(i.max.x=h.x),h.x<i.min.x&&(i.min.x=h.x),h.y>i.max.y&&(i.max.y=h.y),h.y<i.min.y&&(i.min.y=h.y)}a&&(a.x>0?i.max.x+=a.x:i.min.x+=a.x,a.y>0?i.max.y+=a.y:i.min.y+=a.y)},s.contains=function(i,o){return o.x>=i.min.x&&o.x<=i.max.x&&o.y>=i.min.y&&o.y<=i.max.y},s.overlaps=function(i,o){return i.min.x<=o.max.x&&i.max.x>=o.min.x&&i.max.y>=o.min.y&&i.min.y<=o.max.y},s.translate=function(i,o){i.min.x+=o.x,i.max.x+=o.x,i.min.y+=o.y,i.max.y+=o.y},s.shift=function(i,o){var a=i.max.x-i.min.x,u=i.max.y-i.min.y;i.min.x=o.x,i.max.x=o.x+a,i.min.y=o.y,i.max.y=o.y+u}}()},function(r,n){var s={};r.exports=s,function(){s.create=function(i,o){return{x:i||0,y:o||0}},s.clone=function(i){return{x:i.x,y:i.y}},s.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},s.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},s.rotate=function(i,o,a){var u=Math.cos(o),h=Math.sin(o);a||(a={});var f=i.x*u-i.y*h;return a.y=i.x*h+i.y*u,a.x=f,a},s.rotateAbout=function(i,o,a,u){var h=Math.cos(o),f=Math.sin(o);u||(u={});var m=a.x+((i.x-a.x)*h-(i.y-a.y)*f);return u.y=a.y+((i.x-a.x)*f+(i.y-a.y)*h),u.x=m,u},s.normalise=function(i){var o=s.magnitude(i);return o===0?{x:0,y:0}:{x:i.x/o,y:i.y/o}},s.dot=function(i,o){return i.x*o.x+i.y*o.y},s.cross=function(i,o){return i.x*o.y-i.y*o.x},s.cross3=function(i,o,a){return(o.x-i.x)*(a.y-i.y)-(o.y-i.y)*(a.x-i.x)},s.add=function(i,o,a){return a||(a={}),a.x=i.x+o.x,a.y=i.y+o.y,a},s.sub=function(i,o,a){return a||(a={}),a.x=i.x-o.x,a.y=i.y-o.y,a},s.mult=function(i,o){return{x:i.x*o,y:i.y*o}},s.div=function(i,o){return{x:i.x/o,y:i.y/o}},s.perp=function(i,o){return o=o===!0?-1:1,{x:o*-i.y,y:o*i.x}},s.neg=function(i){return{x:-i.x,y:-i.y}},s.angle=function(i,o){return Math.atan2(o.y-i.y,o.x-i.x)},s._temp=[s.create(),s.create(),s.create(),s.create(),s.create(),s.create()]}()},function(r,n,s){var i={};r.exports=i;var o=s(2),a=s(0);(function(){i.create=function(u,h){for(var f=[],m=0;m<u.length;m++){var p=u[m],d={x:p.x,y:p.y,index:m,body:h,isInternal:!1};f.push(d)}return f},i.fromPath=function(u,h){var f=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,m=[];return u.replace(f,function(p,d,g){m.push({x:parseFloat(d),y:parseFloat(g)})}),i.create(m,h)},i.centre=function(u){for(var h=i.area(u,!0),f={x:0,y:0},m,p,d,g=0;g<u.length;g++)d=(g+1)%u.length,m=o.cross(u[g],u[d]),p=o.mult(o.add(u[g],u[d]),m),f=o.add(f,p);return o.div(f,6*h)},i.mean=function(u){for(var h={x:0,y:0},f=0;f<u.length;f++)h.x+=u[f].x,h.y+=u[f].y;return o.div(h,u.length)},i.area=function(u,h){for(var f=0,m=u.length-1,p=0;p<u.length;p++)f+=(u[m].x-u[p].x)*(u[m].y+u[p].y),m=p;return h?f/2:Math.abs(f)/2},i.inertia=function(u,h){for(var f=0,m=0,p=u,d,g,y=0;y<p.length;y++)g=(y+1)%p.length,d=Math.abs(o.cross(p[g],p[y])),f+=d*(o.dot(p[g],p[g])+o.dot(p[g],p[y])+o.dot(p[y],p[y])),m+=d;return h/6*(f/m)},i.translate=function(u,h,f){f=typeof f<"u"?f:1;var m=u.length,p=h.x*f,d=h.y*f,g;for(g=0;g<m;g++)u[g].x+=p,u[g].y+=d;return u},i.rotate=function(u,h,f){if(h!==0){var m=Math.cos(h),p=Math.sin(h),d=f.x,g=f.y,y=u.length,_,w,T,E;for(E=0;E<y;E++)_=u[E],w=_.x-d,T=_.y-g,_.x=d+(w*m-T*p),_.y=g+(w*p+T*m);return u}},i.contains=function(u,h){for(var f=h.x,m=h.y,p=u.length,d=u[p-1],g,y=0;y<p;y++){if(g=u[y],(f-d.x)*(g.y-d.y)+(m-d.y)*(d.x-g.x)>0)return!1;d=g}return!0},i.scale=function(u,h,f,m){if(h===1&&f===1)return u;m=m||i.centre(u);for(var p,d,g=0;g<u.length;g++)p=u[g],d=o.sub(p,m),u[g].x=m.x+d.x*h,u[g].y=m.y+d.y*f;return u},i.chamfer=function(u,h,f,m,p){typeof h=="number"?h=[h]:h=h||[8],f=typeof f<"u"?f:-1,m=m||2,p=p||14;for(var d=[],g=0;g<u.length;g++){var y=u[g-1>=0?g-1:u.length-1],_=u[g],w=u[(g+1)%u.length],T=h[g<h.length?g:h.length-1];if(T===0){d.push(_);continue}var E=o.normalise({x:_.y-y.y,y:y.x-_.x}),A=o.normalise({x:w.y-_.y,y:_.x-w.x}),b=Math.sqrt(2*Math.pow(T,2)),I=o.mult(a.clone(E),T),R=o.normalise(o.mult(o.add(E,A),.5)),P=o.sub(_,o.mult(R,b)),k=f;f===-1&&(k=Math.pow(T,.32)*1.75),k=a.clamp(k,m,p),k%2===1&&(k+=1);for(var M=Math.acos(o.dot(E,A)),B=M/k,F=0;F<k;F++)d.push(o.add(o.rotate(I,B*F),P))}return d},i.clockwiseSort=function(u){var h=i.mean(u);return u.sort(function(f,m){return o.angle(h,f)-o.angle(h,m)}),u},i.isConvex=function(u){var h=0,f=u.length,m,p,d,g;if(f<3)return null;for(m=0;m<f;m++)if(p=(m+1)%f,d=(m+2)%f,g=(u[p].x-u[m].x)*(u[d].y-u[p].y),g-=(u[p].y-u[m].y)*(u[d].x-u[p].x),g<0?h|=1:g>0&&(h|=2),h===3)return!1;return h!==0?!0:null},i.hull=function(u){var h=[],f=[],m,p;for(u=u.slice(0),u.sort(function(d,g){var y=d.x-g.x;return y!==0?y:d.y-g.y}),p=0;p<u.length;p+=1){for(m=u[p];f.length>=2&&o.cross3(f[f.length-2],f[f.length-1],m)<=0;)f.pop();f.push(m)}for(p=u.length-1;p>=0;p-=1){for(m=u[p];h.length>=2&&o.cross3(h[h.length-2],h[h.length-1],m)<=0;)h.pop();h.push(m)}return h.pop(),f.pop(),h.concat(f)}})()},function(r,n,s){var i={};r.exports=i;var o=s(3),a=s(2),u=s(7),h=s(0),f=s(1),m=s(11);(function(){i._timeCorrection=!0,i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i._baseDelta=1e3/60,i.create=function(d){var g={id:h.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},y=h.extend(g,d);return p(y,d),y},i.nextGroup=function(d){return d?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var p=function(d,g){g=g||{},i.set(d,{bounds:d.bounds||f.create(d.vertices),positionPrev:d.positionPrev||a.clone(d.position),anglePrev:d.anglePrev||d.angle,vertices:d.vertices,parts:d.parts||[d],isStatic:d.isStatic,isSleeping:d.isSleeping,parent:d.parent||d}),o.rotate(d.vertices,d.angle,d.position),m.rotate(d.axes,d.angle),f.update(d.bounds,d.vertices,d.velocity),i.set(d,{axes:g.axes||d.axes,area:g.area||d.area,mass:g.mass||d.mass,inertia:g.inertia||d.inertia});var y=d.isStatic?"#14151f":h.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),_=d.isStatic?"#555":"#ccc",w=d.isStatic&&d.render.fillStyle===null?1:0;d.render.fillStyle=d.render.fillStyle||y,d.render.strokeStyle=d.render.strokeStyle||_,d.render.lineWidth=d.render.lineWidth||w,d.render.sprite.xOffset+=-(d.bounds.min.x-d.position.x)/(d.bounds.max.x-d.bounds.min.x),d.render.sprite.yOffset+=-(d.bounds.min.y-d.position.y)/(d.bounds.max.y-d.bounds.min.y)};i.set=function(d,g,y){var _;typeof g=="string"&&(_=g,g={},g[_]=y);for(_ in g)if(Object.prototype.hasOwnProperty.call(g,_))switch(y=g[_],_){case"isStatic":i.setStatic(d,y);break;case"isSleeping":u.set(d,y);break;case"mass":i.setMass(d,y);break;case"density":i.setDensity(d,y);break;case"inertia":i.setInertia(d,y);break;case"vertices":i.setVertices(d,y);break;case"position":i.setPosition(d,y);break;case"angle":i.setAngle(d,y);break;case"velocity":i.setVelocity(d,y);break;case"angularVelocity":i.setAngularVelocity(d,y);break;case"speed":i.setSpeed(d,y);break;case"angularSpeed":i.setAngularSpeed(d,y);break;case"parts":i.setParts(d,y);break;case"centre":i.setCentre(d,y);break;default:d[_]=y}},i.setStatic=function(d,g){for(var y=0;y<d.parts.length;y++){var _=d.parts[y];_.isStatic=g,g?(_._original={restitution:_.restitution,friction:_.friction,mass:_.mass,inertia:_.inertia,density:_.density,inverseMass:_.inverseMass,inverseInertia:_.inverseInertia},_.restitution=0,_.friction=1,_.mass=_.inertia=_.density=1/0,_.inverseMass=_.inverseInertia=0,_.positionPrev.x=_.position.x,_.positionPrev.y=_.position.y,_.anglePrev=_.angle,_.angularVelocity=0,_.speed=0,_.angularSpeed=0,_.motion=0):_._original&&(_.restitution=_._original.restitution,_.friction=_._original.friction,_.mass=_._original.mass,_.inertia=_._original.inertia,_.density=_._original.density,_.inverseMass=_._original.inverseMass,_.inverseInertia=_._original.inverseInertia,_._original=null)}},i.setMass=function(d,g){var y=d.inertia/(d.mass/6);d.inertia=y*(g/6),d.inverseInertia=1/d.inertia,d.mass=g,d.inverseMass=1/d.mass,d.density=d.mass/d.area},i.setDensity=function(d,g){i.setMass(d,g*d.area),d.density=g},i.setInertia=function(d,g){d.inertia=g,d.inverseInertia=1/d.inertia},i.setVertices=function(d,g){g[0].body===d?d.vertices=g:d.vertices=o.create(g,d),d.axes=m.fromVertices(d.vertices),d.area=o.area(d.vertices),i.setMass(d,d.density*d.area);var y=o.centre(d.vertices);o.translate(d.vertices,y,-1),i.setInertia(d,i._inertiaScale*o.inertia(d.vertices,d.mass)),o.translate(d.vertices,d.position),f.update(d.bounds,d.vertices,d.velocity)},i.setParts=function(d,g,y){var _;for(g=g.slice(0),d.parts.length=0,d.parts.push(d),d.parent=d,_=0;_<g.length;_++){var w=g[_];w!==d&&(w.parent=d,d.parts.push(w))}if(d.parts.length!==1){if(y=typeof y<"u"?y:!0,y){var T=[];for(_=0;_<g.length;_++)T=T.concat(g[_].vertices);o.clockwiseSort(T);var E=o.hull(T),A=o.centre(E);i.setVertices(d,E),o.translate(d.vertices,A)}var b=i._totalProperties(d);d.area=b.area,d.parent=d,d.position.x=b.centre.x,d.position.y=b.centre.y,d.positionPrev.x=b.centre.x,d.positionPrev.y=b.centre.y,i.setMass(d,b.mass),i.setInertia(d,b.inertia),i.setPosition(d,b.centre)}},i.setCentre=function(d,g,y){y?(d.positionPrev.x+=g.x,d.positionPrev.y+=g.y,d.position.x+=g.x,d.position.y+=g.y):(d.positionPrev.x=g.x-(d.position.x-d.positionPrev.x),d.positionPrev.y=g.y-(d.position.y-d.positionPrev.y),d.position.x=g.x,d.position.y=g.y)},i.setPosition=function(d,g,y){var _=a.sub(g,d.position);y?(d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.velocity.x=_.x,d.velocity.y=_.y,d.speed=a.magnitude(_)):(d.positionPrev.x+=_.x,d.positionPrev.y+=_.y);for(var w=0;w<d.parts.length;w++){var T=d.parts[w];T.position.x+=_.x,T.position.y+=_.y,o.translate(T.vertices,_),f.update(T.bounds,T.vertices,d.velocity)}},i.setAngle=function(d,g,y){var _=g-d.angle;y?(d.anglePrev=d.angle,d.angularVelocity=_,d.angularSpeed=Math.abs(_)):d.anglePrev+=_;for(var w=0;w<d.parts.length;w++){var T=d.parts[w];T.angle+=_,o.rotate(T.vertices,_,d.position),m.rotate(T.axes,_),f.update(T.bounds,T.vertices,d.velocity),w>0&&a.rotateAbout(T.position,_,d.position,T.position)}},i.setVelocity=function(d,g){var y=d.deltaTime/i._baseDelta;d.positionPrev.x=d.position.x-g.x*y,d.positionPrev.y=d.position.y-g.y*y,d.velocity.x=(d.position.x-d.positionPrev.x)/y,d.velocity.y=(d.position.y-d.positionPrev.y)/y,d.speed=a.magnitude(d.velocity)},i.getVelocity=function(d){var g=i._baseDelta/d.deltaTime;return{x:(d.position.x-d.positionPrev.x)*g,y:(d.position.y-d.positionPrev.y)*g}},i.getSpeed=function(d){return a.magnitude(i.getVelocity(d))},i.setSpeed=function(d,g){i.setVelocity(d,a.mult(a.normalise(i.getVelocity(d)),g))},i.setAngularVelocity=function(d,g){var y=d.deltaTime/i._baseDelta;d.anglePrev=d.angle-g*y,d.angularVelocity=(d.angle-d.anglePrev)/y,d.angularSpeed=Math.abs(d.angularVelocity)},i.getAngularVelocity=function(d){return(d.angle-d.anglePrev)*i._baseDelta/d.deltaTime},i.getAngularSpeed=function(d){return Math.abs(i.getAngularVelocity(d))},i.setAngularSpeed=function(d,g){i.setAngularVelocity(d,h.sign(i.getAngularVelocity(d))*g)},i.translate=function(d,g,y){i.setPosition(d,a.add(d.position,g),y)},i.rotate=function(d,g,y,_){if(!y)i.setAngle(d,d.angle+g,_);else{var w=Math.cos(g),T=Math.sin(g),E=d.position.x-y.x,A=d.position.y-y.y;i.setPosition(d,{x:y.x+(E*w-A*T),y:y.y+(E*T+A*w)},_),i.setAngle(d,d.angle+g,_)}},i.scale=function(d,g,y,_){var w=0,T=0;_=_||d.position;for(var E=0;E<d.parts.length;E++){var A=d.parts[E];o.scale(A.vertices,g,y,_),A.axes=m.fromVertices(A.vertices),A.area=o.area(A.vertices),i.setMass(A,d.density*A.area),o.translate(A.vertices,{x:-A.position.x,y:-A.position.y}),i.setInertia(A,i._inertiaScale*o.inertia(A.vertices,A.mass)),o.translate(A.vertices,{x:A.position.x,y:A.position.y}),E>0&&(w+=A.area,T+=A.inertia),A.position.x=_.x+(A.position.x-_.x)*g,A.position.y=_.y+(A.position.y-_.y)*y,f.update(A.bounds,A.vertices,d.velocity)}d.parts.length>1&&(d.area=w,d.isStatic||(i.setMass(d,d.density*w),i.setInertia(d,T))),d.circleRadius&&(g===y?d.circleRadius*=g:d.circleRadius=null)},i.update=function(d,g){g=(typeof g<"u"?g:1e3/60)*d.timeScale;var y=g*g,_=i._timeCorrection?g/(d.deltaTime||g):1,w=1-d.frictionAir*(g/h._baseDelta),T=(d.position.x-d.positionPrev.x)*_,E=(d.position.y-d.positionPrev.y)*_;d.velocity.x=T*w+d.force.x/d.mass*y,d.velocity.y=E*w+d.force.y/d.mass*y,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.position.x+=d.velocity.x,d.position.y+=d.velocity.y,d.deltaTime=g,d.angularVelocity=(d.angle-d.anglePrev)*w*_+d.torque/d.inertia*y,d.anglePrev=d.angle,d.angle+=d.angularVelocity;for(var A=0;A<d.parts.length;A++){var b=d.parts[A];o.translate(b.vertices,d.velocity),A>0&&(b.position.x+=d.velocity.x,b.position.y+=d.velocity.y),d.angularVelocity!==0&&(o.rotate(b.vertices,d.angularVelocity,d.position),m.rotate(b.axes,d.angularVelocity),A>0&&a.rotateAbout(b.position,d.angularVelocity,d.position,b.position)),f.update(b.bounds,b.vertices,d.velocity)}},i.updateVelocities=function(d){var g=i._baseDelta/d.deltaTime,y=d.velocity;y.x=(d.position.x-d.positionPrev.x)*g,y.y=(d.position.y-d.positionPrev.y)*g,d.speed=Math.sqrt(y.x*y.x+y.y*y.y),d.angularVelocity=(d.angle-d.anglePrev)*g,d.angularSpeed=Math.abs(d.angularVelocity)},i.applyForce=function(d,g,y){var _={x:g.x-d.position.x,y:g.y-d.position.y};d.force.x+=y.x,d.force.y+=y.y,d.torque+=_.x*y.y-_.y*y.x},i._totalProperties=function(d){for(var g={mass:0,area:0,inertia:0,centre:{x:0,y:0}},y=d.parts.length===1?0:1;y<d.parts.length;y++){var _=d.parts[y],w=_.mass!==1/0?_.mass:1;g.mass+=w,g.area+=_.area,g.inertia+=_.inertia,g.centre=a.add(g.centre,a.mult(_.position,w))}return g.centre=a.div(g.centre,g.mass),g}})()},function(r,n,s){var i={};r.exports=i;var o=s(0);(function(){i.on=function(a,u,h){for(var f=u.split(" "),m,p=0;p<f.length;p++)m=f[p],a.events=a.events||{},a.events[m]=a.events[m]||[],a.events[m].push(h);return h},i.off=function(a,u,h){if(!u){a.events={};return}typeof u=="function"&&(h=u,u=o.keys(a.events).join(" "));for(var f=u.split(" "),m=0;m<f.length;m++){var p=a.events[f[m]],d=[];if(h&&p)for(var g=0;g<p.length;g++)p[g]!==h&&d.push(p[g]);a.events[f[m]]=d}},i.trigger=function(a,u,h){var f,m,p,d,g=a.events;if(g&&o.keys(g).length>0){h||(h={}),f=u.split(" ");for(var y=0;y<f.length;y++)if(m=f[y],p=g[m],p){d=o.clone(h,!1),d.name=m,d.source=a;for(var _=0;_<p.length;_++)p[_].apply(a,[d])}}}})()},function(r,n,s){var i={};r.exports=i;var o=s(5),a=s(0),u=s(1),h=s(4);(function(){i.create=function(f){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},f)},i.setModified=function(f,m,p,d){if(f.isModified=m,m&&f.cache&&(f.cache.allBodies=null,f.cache.allConstraints=null,f.cache.allComposites=null),p&&f.parent&&i.setModified(f.parent,m,p,d),d)for(var g=0;g<f.composites.length;g++){var y=f.composites[g];i.setModified(y,m,p,d)}},i.add=function(f,m){var p=[].concat(m);o.trigger(f,"beforeAdd",{object:m});for(var d=0;d<p.length;d++){var g=p[d];switch(g.type){case"body":if(g.parent!==g){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(f,g);break;case"constraint":i.addConstraint(f,g);break;case"composite":i.addComposite(f,g);break;case"mouseConstraint":i.addConstraint(f,g.constraint);break}}return o.trigger(f,"afterAdd",{object:m}),f},i.remove=function(f,m,p){var d=[].concat(m);o.trigger(f,"beforeRemove",{object:m});for(var g=0;g<d.length;g++){var y=d[g];switch(y.type){case"body":i.removeBody(f,y,p);break;case"constraint":i.removeConstraint(f,y,p);break;case"composite":i.removeComposite(f,y,p);break;case"mouseConstraint":i.removeConstraint(f,y.constraint);break}}return o.trigger(f,"afterRemove",{object:m}),f},i.addComposite=function(f,m){return f.composites.push(m),m.parent=f,i.setModified(f,!0,!0,!1),f},i.removeComposite=function(f,m,p){var d=a.indexOf(f.composites,m);if(d!==-1&&i.removeCompositeAt(f,d),p)for(var g=0;g<f.composites.length;g++)i.removeComposite(f.composites[g],m,!0);return f},i.removeCompositeAt=function(f,m){return f.composites.splice(m,1),i.setModified(f,!0,!0,!1),f},i.addBody=function(f,m){return f.bodies.push(m),i.setModified(f,!0,!0,!1),f},i.removeBody=function(f,m,p){var d=a.indexOf(f.bodies,m);if(d!==-1&&i.removeBodyAt(f,d),p)for(var g=0;g<f.composites.length;g++)i.removeBody(f.composites[g],m,!0);return f},i.removeBodyAt=function(f,m){return f.bodies.splice(m,1),i.setModified(f,!0,!0,!1),f},i.addConstraint=function(f,m){return f.constraints.push(m),i.setModified(f,!0,!0,!1),f},i.removeConstraint=function(f,m,p){var d=a.indexOf(f.constraints,m);if(d!==-1&&i.removeConstraintAt(f,d),p)for(var g=0;g<f.composites.length;g++)i.removeConstraint(f.composites[g],m,!0);return f},i.removeConstraintAt=function(f,m){return f.constraints.splice(m,1),i.setModified(f,!0,!0,!1),f},i.clear=function(f,m,p){if(p)for(var d=0;d<f.composites.length;d++)i.clear(f.composites[d],m,!0);return m?f.bodies=f.bodies.filter(function(g){return g.isStatic}):f.bodies.length=0,f.constraints.length=0,f.composites.length=0,i.setModified(f,!0,!0,!1),f},i.allBodies=function(f){if(f.cache&&f.cache.allBodies)return f.cache.allBodies;for(var m=[].concat(f.bodies),p=0;p<f.composites.length;p++)m=m.concat(i.allBodies(f.composites[p]));return f.cache&&(f.cache.allBodies=m),m},i.allConstraints=function(f){if(f.cache&&f.cache.allConstraints)return f.cache.allConstraints;for(var m=[].concat(f.constraints),p=0;p<f.composites.length;p++)m=m.concat(i.allConstraints(f.composites[p]));return f.cache&&(f.cache.allConstraints=m),m},i.allComposites=function(f){if(f.cache&&f.cache.allComposites)return f.cache.allComposites;for(var m=[].concat(f.composites),p=0;p<f.composites.length;p++)m=m.concat(i.allComposites(f.composites[p]));return f.cache&&(f.cache.allComposites=m),m},i.get=function(f,m,p){var d,g;switch(p){case"body":d=i.allBodies(f);break;case"constraint":d=i.allConstraints(f);break;case"composite":d=i.allComposites(f).concat(f);break}return d?(g=d.filter(function(y){return y.id.toString()===m.toString()}),g.length===0?null:g[0]):null},i.move=function(f,m,p){return i.remove(f,m),i.add(p,m),f},i.rebase=function(f){for(var m=i.allBodies(f).concat(i.allConstraints(f)).concat(i.allComposites(f)),p=0;p<m.length;p++)m[p].id=a.nextId();return f},i.translate=function(f,m,p){for(var d=p?i.allBodies(f):f.bodies,g=0;g<d.length;g++)h.translate(d[g],m);return f},i.rotate=function(f,m,p,d){for(var g=Math.cos(m),y=Math.sin(m),_=d?i.allBodies(f):f.bodies,w=0;w<_.length;w++){var T=_[w],E=T.position.x-p.x,A=T.position.y-p.y;h.setPosition(T,{x:p.x+(E*g-A*y),y:p.y+(E*y+A*g)}),h.rotate(T,m)}return f},i.scale=function(f,m,p,d,g){for(var y=g?i.allBodies(f):f.bodies,_=0;_<y.length;_++){var w=y[_],T=w.position.x-d.x,E=w.position.y-d.y;h.setPosition(w,{x:d.x+T*m,y:d.y+E*p}),h.scale(w,m,p)}return f},i.bounds=function(f){for(var m=i.allBodies(f),p=[],d=0;d<m.length;d+=1){var g=m[d];p.push(g.bounds.min,g.bounds.max)}return u.create(p)}})()},function(r,n,s){var i={};r.exports=i;var o=s(4),a=s(5),u=s(0);(function(){i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(h,f){for(var m=f/u._baseDelta,p=i._motionSleepThreshold,d=0;d<h.length;d++){var g=h[d],y=o.getSpeed(g),_=o.getAngularSpeed(g),w=y*y+_*_;if(g.force.x!==0||g.force.y!==0){i.set(g,!1);continue}var T=Math.min(g.motion,w),E=Math.max(g.motion,w);g.motion=i._minBias*T+(1-i._minBias)*E,g.sleepThreshold>0&&g.motion<p?(g.sleepCounter+=1,g.sleepCounter>=g.sleepThreshold/m&&i.set(g,!0)):g.sleepCounter>0&&(g.sleepCounter-=1)}},i.afterCollisions=function(h){for(var f=i._motionSleepThreshold,m=0;m<h.length;m++){var p=h[m];if(p.isActive){var d=p.collision,g=d.bodyA.parent,y=d.bodyB.parent;if(!(g.isSleeping&&y.isSleeping||g.isStatic||y.isStatic)&&(g.isSleeping||y.isSleeping)){var _=g.isSleeping&&!g.isStatic?g:y,w=_===g?y:g;!_.isStatic&&w.motion>f&&i.set(_,!1)}}}},i.set=function(h,f){var m=h.isSleeping;f?(h.isSleeping=!0,h.sleepCounter=h.sleepThreshold,h.positionImpulse.x=0,h.positionImpulse.y=0,h.positionPrev.x=h.position.x,h.positionPrev.y=h.position.y,h.anglePrev=h.angle,h.speed=0,h.angularSpeed=0,h.motion=0,m||a.trigger(h,"sleepStart")):(h.isSleeping=!1,h.sleepCounter=0,m&&a.trigger(h,"sleepEnd"))}})()},function(r,n,s){var i={};r.exports=i;var o=s(3),a=s(9);(function(){var u=[],h={overlap:0,axis:null},f={overlap:0,axis:null};i.create=function(m,p){return{pair:null,collided:!1,bodyA:m,bodyB:p,parentA:m.parent,parentB:p.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},i.collides=function(m,p,d){if(i._overlapAxes(h,m.vertices,p.vertices,m.axes),h.overlap<=0||(i._overlapAxes(f,p.vertices,m.vertices,p.axes),f.overlap<=0))return null;var g=d&&d.table[a.id(m,p)],y;g?y=g.collision:(y=i.create(m,p),y.collided=!0,y.bodyA=m.id<p.id?m:p,y.bodyB=m.id<p.id?p:m,y.parentA=y.bodyA.parent,y.parentB=y.bodyB.parent),m=y.bodyA,p=y.bodyB;var _;h.overlap<f.overlap?_=h:_=f;var w=y.normal,T=y.supports,E=_.axis,A=E.x,b=E.y;A*(p.position.x-m.position.x)+b*(p.position.y-m.position.y)<0?(w.x=A,w.y=b):(w.x=-A,w.y=-b),y.tangent.x=-w.y,y.tangent.y=w.x,y.depth=_.overlap,y.penetration.x=w.x*y.depth,y.penetration.y=w.y*y.depth;var I=i._findSupports(m,p,w,1),R=0;if(o.contains(m.vertices,I[0])&&(T[R++]=I[0]),o.contains(m.vertices,I[1])&&(T[R++]=I[1]),R<2){var P=i._findSupports(p,m,w,-1);o.contains(p.vertices,P[0])&&(T[R++]=P[0]),R<2&&o.contains(p.vertices,P[1])&&(T[R++]=P[1])}return R===0&&(T[R++]=I[0]),T.length=R,y},i._overlapAxes=function(m,p,d,g){var y=p.length,_=d.length,w=p[0].x,T=p[0].y,E=d[0].x,A=d[0].y,b=g.length,I=Number.MAX_VALUE,R=0,P,k,M,B,F,N;for(F=0;F<b;F++){var U=g[F],H=U.x,Q=U.y,W=w*H+T*Q,O=E*H+A*Q,V=W,G=O;for(N=1;N<y;N+=1)B=p[N].x*H+p[N].y*Q,B>V?V=B:B<W&&(W=B);for(N=1;N<_;N+=1)B=d[N].x*H+d[N].y*Q,B>G?G=B:B<O&&(O=B);if(k=V-O,M=G-W,P=k<M?k:M,P<I&&(I=P,R=F,P<=0))break}m.axis=g[R],m.overlap=I},i._projectToAxis=function(m,p,d){for(var g=p[0].x*d.x+p[0].y*d.y,y=g,_=1;_<p.length;_+=1){var w=p[_].x*d.x+p[_].y*d.y;w>y?y=w:w<g&&(g=w)}m.min=g,m.max=y},i._findSupports=function(m,p,d,g){var y=p.vertices,_=y.length,w=m.position.x,T=m.position.y,E=d.x*g,A=d.y*g,b=Number.MAX_VALUE,I,R,P,k,M;for(M=0;M<_;M+=1)R=y[M],k=E*(w-R.x)+A*(T-R.y),k<b&&(b=k,I=R);return P=y[(_+I.index-1)%_],b=E*(w-P.x)+A*(T-P.y),R=y[(I.index+1)%_],E*(w-R.x)+A*(T-R.y)<b?(u[0]=I,u[1]=R,u):(u[0]=I,u[1]=P,u)}})()},function(r,n,s){var i={};r.exports=i;var o=s(16);(function(){i.create=function(a,u){var h=a.bodyA,f=a.bodyB,m={id:i.id(h,f),bodyA:h,bodyB:f,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:h.isSensor||f.isSensor,timeCreated:u,timeUpdated:u,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(m,a,u),m},i.update=function(a,u,h){var f=a.contacts,m=u.supports,p=a.activeContacts,d=u.parentA,g=u.parentB,y=d.vertices.length;a.isActive=!0,a.timeUpdated=h,a.collision=u,a.separation=u.depth,a.inverseMass=d.inverseMass+g.inverseMass,a.friction=d.friction<g.friction?d.friction:g.friction,a.frictionStatic=d.frictionStatic>g.frictionStatic?d.frictionStatic:g.frictionStatic,a.restitution=d.restitution>g.restitution?d.restitution:g.restitution,a.slop=d.slop>g.slop?d.slop:g.slop,u.pair=a,p.length=0;for(var _=0;_<m.length;_++){var w=m[_],T=w.body===d?w.index:y+w.index,E=f[T];E?p.push(E):p.push(f[T]=o.create(w))}},i.setActive=function(a,u,h){u?(a.isActive=!0,a.timeUpdated=h):(a.isActive=!1,a.activeContacts.length=0)},i.id=function(a,u){return a.id<u.id?"A"+a.id+"B"+u.id:"A"+u.id+"B"+a.id}})()},function(r,n,s){var i={};r.exports=i;var o=s(3),a=s(2),u=s(7),h=s(1),f=s(11),m=s(0);(function(){i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(p){var d=p;d.bodyA&&!d.pointA&&(d.pointA={x:0,y:0}),d.bodyB&&!d.pointB&&(d.pointB={x:0,y:0});var g=d.bodyA?a.add(d.bodyA.position,d.pointA):d.pointA,y=d.bodyB?a.add(d.bodyB.position,d.pointB):d.pointB,_=a.magnitude(a.sub(g,y));d.length=typeof d.length<"u"?d.length:_,d.id=d.id||m.nextId(),d.label=d.label||"Constraint",d.type="constraint",d.stiffness=d.stiffness||(d.length>0?1:.7),d.damping=d.damping||0,d.angularStiffness=d.angularStiffness||0,d.angleA=d.bodyA?d.bodyA.angle:d.angleA,d.angleB=d.bodyB?d.bodyB.angle:d.angleB,d.plugin={};var w={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return d.length===0&&d.stiffness>.1?(w.type="pin",w.anchors=!1):d.stiffness<.9&&(w.type="spring"),d.render=m.extend(w,d.render),d},i.preSolveAll=function(p){for(var d=0;d<p.length;d+=1){var g=p[d],y=g.constraintImpulse;g.isStatic||y.x===0&&y.y===0&&y.angle===0||(g.position.x+=y.x,g.position.y+=y.y,g.angle+=y.angle)}},i.solveAll=function(p,d){for(var g=m.clamp(d/m._baseDelta,0,1),y=0;y<p.length;y+=1){var _=p[y],w=!_.bodyA||_.bodyA&&_.bodyA.isStatic,T=!_.bodyB||_.bodyB&&_.bodyB.isStatic;(w||T)&&i.solve(p[y],g)}for(y=0;y<p.length;y+=1)_=p[y],w=!_.bodyA||_.bodyA&&_.bodyA.isStatic,T=!_.bodyB||_.bodyB&&_.bodyB.isStatic,!w&&!T&&i.solve(p[y],g)},i.solve=function(p,d){var g=p.bodyA,y=p.bodyB,_=p.pointA,w=p.pointB;if(!(!g&&!y)){g&&!g.isStatic&&(a.rotate(_,g.angle-p.angleA,_),p.angleA=g.angle),y&&!y.isStatic&&(a.rotate(w,y.angle-p.angleB,w),p.angleB=y.angle);var T=_,E=w;if(g&&(T=a.add(g.position,_)),y&&(E=a.add(y.position,w)),!(!T||!E)){var A=a.sub(T,E),b=a.magnitude(A);b<i._minLength&&(b=i._minLength);var I=(b-p.length)/b,R=p.stiffness>=1||p.length===0,P=R?p.stiffness*d:p.stiffness*d*d,k=p.damping*d,M=a.mult(A,I*P),B=(g?g.inverseMass:0)+(y?y.inverseMass:0),F=(g?g.inverseInertia:0)+(y?y.inverseInertia:0),N=B+F,U,H,Q,W,O;if(k>0){var V=a.create();Q=a.div(A,b),O=a.sub(y&&a.sub(y.position,y.positionPrev)||V,g&&a.sub(g.position,g.positionPrev)||V),W=a.dot(Q,O)}g&&!g.isStatic&&(H=g.inverseMass/B,g.constraintImpulse.x-=M.x*H,g.constraintImpulse.y-=M.y*H,g.position.x-=M.x*H,g.position.y-=M.y*H,k>0&&(g.positionPrev.x-=k*Q.x*W*H,g.positionPrev.y-=k*Q.y*W*H),U=a.cross(_,M)/N*i._torqueDampen*g.inverseInertia*(1-p.angularStiffness),g.constraintImpulse.angle-=U,g.angle-=U),y&&!y.isStatic&&(H=y.inverseMass/B,y.constraintImpulse.x+=M.x*H,y.constraintImpulse.y+=M.y*H,y.position.x+=M.x*H,y.position.y+=M.y*H,k>0&&(y.positionPrev.x+=k*Q.x*W*H,y.positionPrev.y+=k*Q.y*W*H),U=a.cross(w,M)/N*i._torqueDampen*y.inverseInertia*(1-p.angularStiffness),y.constraintImpulse.angle+=U,y.angle+=U)}}},i.postSolveAll=function(p){for(var d=0;d<p.length;d++){var g=p[d],y=g.constraintImpulse;if(!(g.isStatic||y.x===0&&y.y===0&&y.angle===0)){u.set(g,!1);for(var _=0;_<g.parts.length;_++){var w=g.parts[_];o.translate(w.vertices,y),_>0&&(w.position.x+=y.x,w.position.y+=y.y),y.angle!==0&&(o.rotate(w.vertices,y.angle,g.position),f.rotate(w.axes,y.angle),_>0&&a.rotateAbout(w.position,y.angle,g.position,w.position)),h.update(w.bounds,w.vertices,g.velocity)}y.angle*=i._warming,y.x*=i._warming,y.y*=i._warming}}},i.pointAWorld=function(p){return{x:(p.bodyA?p.bodyA.position.x:0)+(p.pointA?p.pointA.x:0),y:(p.bodyA?p.bodyA.position.y:0)+(p.pointA?p.pointA.y:0)}},i.pointBWorld=function(p){return{x:(p.bodyB?p.bodyB.position.x:0)+(p.pointB?p.pointB.x:0),y:(p.bodyB?p.bodyB.position.y:0)+(p.pointB?p.pointB.y:0)}}})()},function(r,n,s){var i={};r.exports=i;var o=s(2),a=s(0);(function(){i.fromVertices=function(u){for(var h={},f=0;f<u.length;f++){var m=(f+1)%u.length,p=o.normalise({x:u[m].y-u[f].y,y:u[f].x-u[m].x}),d=p.y===0?1/0:p.x/p.y;d=d.toFixed(3).toString(),h[d]=p}return a.values(h)},i.rotate=function(u,h){if(h!==0)for(var f=Math.cos(h),m=Math.sin(h),p=0;p<u.length;p++){var d=u[p],g;g=d.x*f-d.y*m,d.y=d.x*m+d.y*f,d.x=g}}})()},function(r,n,s){var i={};r.exports=i;var o=s(3),a=s(0),u=s(4),h=s(1),f=s(2);(function(){i.rectangle=function(m,p,d,g,y){y=y||{};var _={label:"Rectangle Body",position:{x:m,y:p},vertices:o.fromPath("L 0 0 L "+d+" 0 L "+d+" "+g+" L 0 "+g)};if(y.chamfer){var w=y.chamfer;_.vertices=o.chamfer(_.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete y.chamfer}return u.create(a.extend({},_,y))},i.trapezoid=function(m,p,d,g,y,_){_=_||{},y*=.5;var w=(1-y*2)*d,T=d*y,E=T+w,A=E+T,b;y<.5?b="L 0 0 L "+T+" "+-g+" L "+E+" "+-g+" L "+A+" 0":b="L 0 0 L "+E+" "+-g+" L "+A+" 0";var I={label:"Trapezoid Body",position:{x:m,y:p},vertices:o.fromPath(b)};if(_.chamfer){var R=_.chamfer;I.vertices=o.chamfer(I.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete _.chamfer}return u.create(a.extend({},I,_))},i.circle=function(m,p,d,g,y){g=g||{};var _={label:"Circle Body",circleRadius:d};y=y||25;var w=Math.ceil(Math.max(10,Math.min(y,d)));return w%2===1&&(w+=1),i.polygon(m,p,w,d,a.extend({},_,g))},i.polygon=function(m,p,d,g,y){if(y=y||{},d<3)return i.circle(m,p,g,y);for(var _=2*Math.PI/d,w="",T=_*.5,E=0;E<d;E+=1){var A=T+E*_,b=Math.cos(A)*g,I=Math.sin(A)*g;w+="L "+b.toFixed(3)+" "+I.toFixed(3)+" "}var R={label:"Polygon Body",position:{x:m,y:p},vertices:o.fromPath(w)};if(y.chamfer){var P=y.chamfer;R.vertices=o.chamfer(R.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete y.chamfer}return u.create(a.extend({},R,y))},i.fromVertices=function(m,p,d,g,y,_,w,T){var E=a.getDecomp(),A,b,I,R,P,k,M,B,F,N,U;for(A=!!(E&&E.quickDecomp),g=g||{},I=[],y=typeof y<"u"?y:!1,_=typeof _<"u"?_:.01,w=typeof w<"u"?w:10,T=typeof T<"u"?T:.01,a.isArray(d[0])||(d=[d]),N=0;N<d.length;N+=1)if(k=d[N],R=o.isConvex(k),P=!R,P&&!A&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),R||!A)R?k=o.clockwiseSort(k):k=o.hull(k),I.push({position:{x:m,y:p},vertices:k});else{var H=k.map(function(ve){return[ve.x,ve.y]});E.makeCCW(H),_!==!1&&E.removeCollinearPoints(H,_),T!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(H,T);var Q=E.quickDecomp(H);for(M=0;M<Q.length;M++){var W=Q[M],O=W.map(function(ve){return{x:ve[0],y:ve[1]}});w>0&&o.area(O)<w||I.push({position:o.centre(O),vertices:O})}}for(M=0;M<I.length;M++)I[M]=u.create(a.extend(I[M],g));if(y){var V=5;for(M=0;M<I.length;M++){var G=I[M];for(B=M+1;B<I.length;B++){var j=I[B];if(h.overlaps(G.bounds,j.bounds)){var Z=G.vertices,pe=j.vertices;for(F=0;F<G.vertices.length;F++)for(U=0;U<j.vertices.length;U++){var ue=f.magnitudeSquared(f.sub(Z[(F+1)%Z.length],pe[U])),Te=f.magnitudeSquared(f.sub(Z[F],pe[(U+1)%pe.length]));ue<V&&Te<V&&(Z[F].isInternal=!0,pe[U].isInternal=!0)}}}}}return I.length>1?(b=u.create(a.extend({parts:I.slice(0)},g)),u.setPosition(b,{x:m,y:p}),b):I[0]}})()},function(r,n,s){var i={};r.exports=i;var o=s(0),a=s(8);(function(){i.create=function(u){var h={bodies:[],pairs:null};return o.extend(h,u)},i.setBodies=function(u,h){u.bodies=h.slice(0)},i.clear=function(u){u.bodies=[]},i.collisions=function(u){var h=[],f=u.pairs,m=u.bodies,p=m.length,d=i.canCollide,g=a.collides,y,_;for(m.sort(i._compareBoundsX),y=0;y<p;y++){var w=m[y],T=w.bounds,E=w.bounds.max.x,A=w.bounds.max.y,b=w.bounds.min.y,I=w.isStatic||w.isSleeping,R=w.parts.length,P=R===1;for(_=y+1;_<p;_++){var k=m[_],M=k.bounds;if(M.min.x>E)break;if(!(A<M.min.y||b>M.max.y)&&!(I&&(k.isStatic||k.isSleeping))&&d(w.collisionFilter,k.collisionFilter)){var B=k.parts.length;if(P&&B===1){var F=g(w,k,f);F&&h.push(F)}else for(var N=R>1?1:0,U=B>1?1:0,H=N;H<R;H++)for(var Q=w.parts[H],T=Q.bounds,W=U;W<B;W++){var O=k.parts[W],M=O.bounds;if(!(T.min.x>M.max.x||T.max.x<M.min.x||T.max.y<M.min.y||T.min.y>M.max.y)){var F=g(Q,O,f);F&&h.push(F)}}}}}return h},i.canCollide=function(u,h){return u.group===h.group&&u.group!==0?u.group>0:(u.mask&h.category)!==0&&(h.mask&u.category)!==0},i._compareBoundsX=function(u,h){return u.bounds.min.x-h.bounds.min.x}})()},function(r,n,s){var i={};r.exports=i;var o=s(0);(function(){i.create=function(a){var u={};return a||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),u.element=a||document.body,u.absolute={x:0,y:0},u.position={x:0,y:0},u.mousedownPosition={x:0,y:0},u.mouseupPosition={x:0,y:0},u.offset={x:0,y:0},u.scale={x:1,y:1},u.wheelDelta=0,u.button=-1,u.pixelRatio=parseInt(u.element.getAttribute("data-pixel-ratio"),10)||1,u.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},u.mousemove=function(h){var f=i._getRelativeMousePosition(h,u.element,u.pixelRatio),m=h.changedTouches;m&&(u.button=0,h.preventDefault()),u.absolute.x=f.x,u.absolute.y=f.y,u.position.x=u.absolute.x*u.scale.x+u.offset.x,u.position.y=u.absolute.y*u.scale.y+u.offset.y,u.sourceEvents.mousemove=h},u.mousedown=function(h){var f=i._getRelativeMousePosition(h,u.element,u.pixelRatio),m=h.changedTouches;m?(u.button=0,h.preventDefault()):u.button=h.button,u.absolute.x=f.x,u.absolute.y=f.y,u.position.x=u.absolute.x*u.scale.x+u.offset.x,u.position.y=u.absolute.y*u.scale.y+u.offset.y,u.mousedownPosition.x=u.position.x,u.mousedownPosition.y=u.position.y,u.sourceEvents.mousedown=h},u.mouseup=function(h){var f=i._getRelativeMousePosition(h,u.element,u.pixelRatio),m=h.changedTouches;m&&h.preventDefault(),u.button=-1,u.absolute.x=f.x,u.absolute.y=f.y,u.position.x=u.absolute.x*u.scale.x+u.offset.x,u.position.y=u.absolute.y*u.scale.y+u.offset.y,u.mouseupPosition.x=u.position.x,u.mouseupPosition.y=u.position.y,u.sourceEvents.mouseup=h},u.mousewheel=function(h){u.wheelDelta=Math.max(-1,Math.min(1,h.wheelDelta||-h.detail)),h.preventDefault()},i.setElement(u,u.element),u},i.setElement=function(a,u){a.element=u,u.addEventListener("mousemove",a.mousemove),u.addEventListener("mousedown",a.mousedown),u.addEventListener("mouseup",a.mouseup),u.addEventListener("mousewheel",a.mousewheel),u.addEventListener("DOMMouseScroll",a.mousewheel),u.addEventListener("touchmove",a.mousemove),u.addEventListener("touchstart",a.mousedown),u.addEventListener("touchend",a.mouseup)},i.clearSourceEvents=function(a){a.sourceEvents.mousemove=null,a.sourceEvents.mousedown=null,a.sourceEvents.mouseup=null,a.sourceEvents.mousewheel=null,a.wheelDelta=0},i.setOffset=function(a,u){a.offset.x=u.x,a.offset.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},i.setScale=function(a,u){a.scale.x=u.x,a.scale.y=u.y,a.position.x=a.absolute.x*a.scale.x+a.offset.x,a.position.y=a.absolute.y*a.scale.y+a.offset.y},i._getRelativeMousePosition=function(a,u,h){var f=u.getBoundingClientRect(),m=document.documentElement||document.body.parentNode||document.body,p=window.pageXOffset!==void 0?window.pageXOffset:m.scrollLeft,d=window.pageYOffset!==void 0?window.pageYOffset:m.scrollTop,g=a.changedTouches,y,_;return g?(y=g[0].pageX-f.left-p,_=g[0].pageY-f.top-d):(y=a.pageX-f.left-p,_=a.pageY-f.top-d),{x:y/(u.clientWidth/(u.width||u.clientWidth)*h),y:_/(u.clientHeight/(u.height||u.clientHeight)*h)}}})()},function(r,n,s){var i={};r.exports=i;var o=s(0);(function(){i._registry={},i.register=function(a){if(i.isPlugin(a)||o.warn("Plugin.register:",i.toString(a),"does not implement all required fields."),a.name in i._registry){var u=i._registry[a.name],h=i.versionParse(a.version).number,f=i.versionParse(u.version).number;h>f?(o.warn("Plugin.register:",i.toString(u),"was upgraded to",i.toString(a)),i._registry[a.name]=a):h<f?o.warn("Plugin.register:",i.toString(u),"can not be downgraded to",i.toString(a)):a!==u&&o.warn("Plugin.register:",i.toString(a),"is already registered to different plugin object")}else i._registry[a.name]=a;return a},i.resolve=function(a){return i._registry[i.dependencyParse(a).name]},i.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},i.isPlugin=function(a){return a&&a.name&&a.version&&a.install},i.isUsed=function(a,u){return a.used.indexOf(u)>-1},i.isFor=function(a,u){var h=a.for&&i.dependencyParse(a.for);return!a.for||u.name===h.name&&i.versionSatisfies(u.version,h.range)},i.use=function(a,u){if(a.uses=(a.uses||[]).concat(u||[]),a.uses.length===0){o.warn("Plugin.use:",i.toString(a),"does not specify any dependencies to install.");return}for(var h=i.dependencies(a),f=o.topologicalSort(h),m=[],p=0;p<f.length;p+=1)if(f[p]!==a.name){var d=i.resolve(f[p]);if(!d){m.push(" "+f[p]);continue}i.isUsed(a,d.name)||(i.isFor(d,a)||(o.warn("Plugin.use:",i.toString(d),"is for",d.for,"but installed on",i.toString(a)+"."),d._warned=!0),d.install?d.install(a):(o.warn("Plugin.use:",i.toString(d),"does not specify an install function."),d._warned=!0),d._warned?(m.push(" "+i.toString(d)),delete d._warned):m.push(" "+i.toString(d)),a.used.push(d.name))}m.length>0&&o.info(m.join("  "))},i.dependencies=function(a,u){var h=i.dependencyParse(a),f=h.name;if(u=u||{},!(f in u)){a=i.resolve(a)||a,u[f]=o.map(a.uses||[],function(p){i.isPlugin(p)&&i.register(p);var d=i.dependencyParse(p),g=i.resolve(p);return g&&!i.versionSatisfies(g.version,d.range)?(o.warn("Plugin.dependencies:",i.toString(g),"does not satisfy",i.toString(d),"used by",i.toString(h)+"."),g._warned=!0,a._warned=!0):g||(o.warn("Plugin.dependencies:",i.toString(p),"used by",i.toString(h),"could not be resolved."),a._warned=!0),d.name});for(var m=0;m<u[f].length;m+=1)i.dependencies(u[f][m],u);return u}},i.dependencyParse=function(a){if(o.isString(a)){var u=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return u.test(a)||o.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},i.versionParse=function(a){var u=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;u.test(a)||o.warn("Plugin.versionParse:",a,"is not a valid version or range.");var h=u.exec(a),f=Number(h[4]),m=Number(h[5]),p=Number(h[6]);return{isRange:!!(h[1]||h[2]),version:h[3],range:a,operator:h[1]||h[2]||"",major:f,minor:m,patch:p,parts:[f,m,p],prerelease:h[7],number:f*1e8+m*1e4+p}},i.versionSatisfies=function(a,u){u=u||"*";var h=i.versionParse(u),f=i.versionParse(a);if(h.isRange){if(h.operator==="*"||a==="*")return!0;if(h.operator===">")return f.number>h.number;if(h.operator===">=")return f.number>=h.number;if(h.operator==="~")return f.major===h.major&&f.minor===h.minor&&f.patch>=h.patch;if(h.operator==="^")return h.major>0?f.major===h.major&&f.number>=h.number:h.minor>0?f.minor===h.minor&&f.patch>=h.patch:f.patch===h.patch}return a===u||a==="*"}})()},function(r,n){var s={};r.exports=s,function(){s.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}}()},function(r,n,s){var i={};r.exports=i;var o=s(7),a=s(18),u=s(13),h=s(19),f=s(5),m=s(6),p=s(10),d=s(0),g=s(4);(function(){i.create=function(y){y=y||{};var _={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},w=d.extend(_,y);return w.world=y.world||m.create({label:"World"}),w.pairs=y.pairs||h.create(),w.detector=y.detector||u.create(),w.grid={buckets:[]},w.world.gravity=w.gravity,w.broadphase=w.grid,w.metrics={},w},i.update=function(y,_){var w=d.now(),T=y.world,E=y.detector,A=y.pairs,b=y.timing,I=b.timestamp,R;_=typeof _<"u"?_:d._baseDelta,_*=b.timeScale,b.timestamp+=_,b.lastDelta=_;var P={timestamp:b.timestamp,delta:_};f.trigger(y,"beforeUpdate",P);var k=m.allBodies(T),M=m.allConstraints(T);for(T.isModified&&(u.setBodies(E,k),m.setModified(T,!1,!1,!0)),y.enableSleeping&&o.update(k,_),i._bodiesApplyGravity(k,y.gravity),_>0&&i._bodiesUpdate(k,_),p.preSolveAll(k),R=0;R<y.constraintIterations;R++)p.solveAll(M,_);p.postSolveAll(k),E.pairs=y.pairs;var B=u.collisions(E);h.update(A,B,I),y.enableSleeping&&o.afterCollisions(A.list),A.collisionStart.length>0&&f.trigger(y,"collisionStart",{pairs:A.collisionStart});var F=d.clamp(20/y.positionIterations,0,1);for(a.preSolvePosition(A.list),R=0;R<y.positionIterations;R++)a.solvePosition(A.list,_,F);for(a.postSolvePosition(k),p.preSolveAll(k),R=0;R<y.constraintIterations;R++)p.solveAll(M,_);for(p.postSolveAll(k),a.preSolveVelocity(A.list),R=0;R<y.velocityIterations;R++)a.solveVelocity(A.list,_);return i._bodiesUpdateVelocities(k),A.collisionActive.length>0&&f.trigger(y,"collisionActive",{pairs:A.collisionActive}),A.collisionEnd.length>0&&f.trigger(y,"collisionEnd",{pairs:A.collisionEnd}),i._bodiesClearForces(k),f.trigger(y,"afterUpdate",P),y.timing.lastElapsed=d.now()-w,y},i.merge=function(y,_){if(d.extend(y,_),_.world){y.world=_.world,i.clear(y);for(var w=m.allBodies(y.world),T=0;T<w.length;T++){var E=w[T];o.set(E,!1),E.id=d.nextId()}}},i.clear=function(y){h.clear(y.pairs),u.clear(y.detector)},i._bodiesClearForces=function(y){for(var _=y.length,w=0;w<_;w++){var T=y[w];T.force.x=0,T.force.y=0,T.torque=0}},i._bodiesApplyGravity=function(y,_){var w=typeof _.scale<"u"?_.scale:.001,T=y.length;if(!(_.x===0&&_.y===0||w===0))for(var E=0;E<T;E++){var A=y[E];A.isStatic||A.isSleeping||(A.force.y+=A.mass*_.y*w,A.force.x+=A.mass*_.x*w)}},i._bodiesUpdate=function(y,_){for(var w=y.length,T=0;T<w;T++){var E=y[T];E.isStatic||E.isSleeping||g.update(E,_)}},i._bodiesUpdateVelocities=function(y){for(var _=y.length,w=0;w<_;w++)g.updateVelocities(y[w])}})()},function(r,n,s){var i={};r.exports=i;var o=s(3),a=s(0),u=s(1);(function(){i._restingThresh=2,i._restingThreshTangent=Math.sqrt(6),i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i._frictionMaxStatic=Number.MAX_VALUE,i.preSolvePosition=function(h){var f,m,p,d=h.length;for(f=0;f<d;f++)m=h[f],m.isActive&&(p=m.activeContacts.length,m.collision.parentA.totalContacts+=p,m.collision.parentB.totalContacts+=p)},i.solvePosition=function(h,f,m){var p,d,g,y,_,w,T,E,A=i._positionDampen*(m||1),b=a.clamp(f/a._baseDelta,0,1),I=h.length;for(p=0;p<I;p++)d=h[p],!(!d.isActive||d.isSensor)&&(g=d.collision,y=g.parentA,_=g.parentB,w=g.normal,d.separation=w.x*(_.positionImpulse.x+g.penetration.x-y.positionImpulse.x)+w.y*(_.positionImpulse.y+g.penetration.y-y.positionImpulse.y));for(p=0;p<I;p++)d=h[p],!(!d.isActive||d.isSensor)&&(g=d.collision,y=g.parentA,_=g.parentB,w=g.normal,E=d.separation-d.slop*b,(y.isStatic||_.isStatic)&&(E*=2),y.isStatic||y.isSleeping||(T=A/y.totalContacts,y.positionImpulse.x+=w.x*E*T,y.positionImpulse.y+=w.y*E*T),_.isStatic||_.isSleeping||(T=A/_.totalContacts,_.positionImpulse.x-=w.x*E*T,_.positionImpulse.y-=w.y*E*T))},i.postSolvePosition=function(h){for(var f=i._positionWarming,m=h.length,p=o.translate,d=u.update,g=0;g<m;g++){var y=h[g],_=y.positionImpulse,w=_.x,T=_.y,E=y.velocity;if(y.totalContacts=0,w!==0||T!==0){for(var A=0;A<y.parts.length;A++){var b=y.parts[A];p(b.vertices,_),d(b.bounds,b.vertices,E),b.position.x+=w,b.position.y+=T}y.positionPrev.x+=w,y.positionPrev.y+=T,w*E.x+T*E.y<0?(_.x=0,_.y=0):(_.x*=f,_.y*=f)}}},i.preSolveVelocity=function(h){var f=h.length,m,p;for(m=0;m<f;m++){var d=h[m];if(!(!d.isActive||d.isSensor)){var g=d.activeContacts,y=g.length,_=d.collision,w=_.parentA,T=_.parentB,E=_.normal,A=_.tangent;for(p=0;p<y;p++){var b=g[p],I=b.vertex,R=b.normalImpulse,P=b.tangentImpulse;if(R!==0||P!==0){var k=E.x*R+A.x*P,M=E.y*R+A.y*P;w.isStatic||w.isSleeping||(w.positionPrev.x+=k*w.inverseMass,w.positionPrev.y+=M*w.inverseMass,w.anglePrev+=w.inverseInertia*((I.x-w.position.x)*M-(I.y-w.position.y)*k)),T.isStatic||T.isSleeping||(T.positionPrev.x-=k*T.inverseMass,T.positionPrev.y-=M*T.inverseMass,T.anglePrev-=T.inverseInertia*((I.x-T.position.x)*M-(I.y-T.position.y)*k))}}}}},i.solveVelocity=function(h,f){var m=f/a._baseDelta,p=m*m,d=p*m,g=-i._restingThresh*m,y=i._restingThreshTangent,_=i._frictionNormalMultiplier*m,w=i._frictionMaxStatic,T=h.length,E,A,b,I;for(b=0;b<T;b++){var R=h[b];if(!(!R.isActive||R.isSensor)){var P=R.collision,k=P.parentA,M=P.parentB,B=k.velocity,F=M.velocity,N=P.normal.x,U=P.normal.y,H=P.tangent.x,Q=P.tangent.y,W=R.activeContacts,O=W.length,V=1/O,G=k.inverseMass+M.inverseMass,j=R.friction*R.frictionStatic*_;for(B.x=k.position.x-k.positionPrev.x,B.y=k.position.y-k.positionPrev.y,F.x=M.position.x-M.positionPrev.x,F.y=M.position.y-M.positionPrev.y,k.angularVelocity=k.angle-k.anglePrev,M.angularVelocity=M.angle-M.anglePrev,I=0;I<O;I++){var Z=W[I],pe=Z.vertex,ue=pe.x-k.position.x,Te=pe.y-k.position.y,ve=pe.x-M.position.x,be=pe.y-M.position.y,Le=B.x-Te*k.angularVelocity,wt=B.y+ue*k.angularVelocity,Ke=F.x-be*M.angularVelocity,Ae=F.y+ve*M.angularVelocity,He=Le-Ke,De=wt-Ae,Xt=N*He+U*De,ut=H*He+Q*De,wn=R.separation+Xt,_s=Math.min(wn,1);_s=wn<0?0:_s;var ti=_s*j;ut<-ti||ut>ti?(A=ut>0?ut:-ut,E=R.friction*(ut>0?1:-1)*d,E<-A?E=-A:E>A&&(E=A)):(E=ut,A=w);var Pu=ue*U-Te*N,Ci=ve*U-be*N,Iu=V/(G+k.inverseInertia*Pu*Pu+M.inverseInertia*Ci*Ci),ho=(1+R.restitution)*Xt*Iu;if(E*=Iu,Xt<g)Z.normalImpulse=0;else{var uf=Z.normalImpulse;Z.normalImpulse+=ho,Z.normalImpulse>0&&(Z.normalImpulse=0),ho=Z.normalImpulse-uf}if(ut<-y||ut>y)Z.tangentImpulse=0;else{var ws=Z.tangentImpulse;Z.tangentImpulse+=E,Z.tangentImpulse<-A&&(Z.tangentImpulse=-A),Z.tangentImpulse>A&&(Z.tangentImpulse=A),E=Z.tangentImpulse-ws}var fo=N*ho+H*E,po=U*ho+Q*E;k.isStatic||k.isSleeping||(k.positionPrev.x+=fo*k.inverseMass,k.positionPrev.y+=po*k.inverseMass,k.anglePrev+=(ue*po-Te*fo)*k.inverseInertia),M.isStatic||M.isSleeping||(M.positionPrev.x-=fo*M.inverseMass,M.positionPrev.y-=po*M.inverseMass,M.anglePrev-=(ve*po-be*fo)*M.inverseInertia)}}}}})()},function(r,n,s){var i={};r.exports=i;var o=s(9),a=s(0);(function(){i.create=function(u){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},u)},i.update=function(u,h,f){var m=u.list,p=m.length,d=u.table,g=h.length,y=u.collisionStart,_=u.collisionEnd,w=u.collisionActive,T,E,A,b;for(y.length=0,_.length=0,w.length=0,b=0;b<p;b++)m[b].confirmedActive=!1;for(b=0;b<g;b++)T=h[b],A=T.pair,A?(A.isActive?w.push(A):y.push(A),o.update(A,T,f),A.confirmedActive=!0):(A=o.create(T,f),d[A.id]=A,y.push(A),m.push(A));var I=[];for(p=m.length,b=0;b<p;b++)A=m[b],A.confirmedActive||(o.setActive(A,!1,f),_.push(A),!A.collision.bodyA.isSleeping&&!A.collision.bodyB.isSleeping&&I.push(b));for(b=0;b<I.length;b++)E=I[b]-b,A=m[E],m.splice(E,1),delete d[A.id]},i.clear=function(u){return u.table={},u.list.length=0,u.collisionStart.length=0,u.collisionActive.length=0,u.collisionEnd.length=0,u}})()},function(r,n,s){var i=r.exports=s(21);i.Axes=s(11),i.Bodies=s(12),i.Body=s(4),i.Bounds=s(1),i.Collision=s(8),i.Common=s(0),i.Composite=s(6),i.Composites=s(22),i.Constraint=s(10),i.Contact=s(16),i.Detector=s(13),i.Engine=s(17),i.Events=s(5),i.Grid=s(23),i.Mouse=s(14),i.MouseConstraint=s(24),i.Pair=s(9),i.Pairs=s(19),i.Plugin=s(15),i.Query=s(25),i.Render=s(26),i.Resolver=s(18),i.Runner=s(27),i.SAT=s(28),i.Sleeping=s(7),i.Svg=s(29),i.Vector=s(2),i.Vertices=s(3),i.World=s(30),i.Engine.run=i.Runner.run,i.Common.deprecated(i.Engine,"run","Engine.run  use Matter.Runner.run(engine) instead")},function(r,n,s){var i={};r.exports=i;var o=s(15),a=s(0);(function(){i.name="matter-js",i.version="0.19.0",i.uses=[],i.used=[],i.use=function(){o.use(i,Array.prototype.slice.call(arguments))},i.before=function(u,h){return u=u.replace(/^Matter./,""),a.chainPathBefore(i,u,h)},i.after=function(u,h){return u=u.replace(/^Matter./,""),a.chainPathAfter(i,u,h)}})()},function(r,n,s){var i={};r.exports=i;var o=s(6),a=s(10),u=s(0),h=s(4),f=s(12),m=u.deprecated;(function(){i.stack=function(p,d,g,y,_,w,T){for(var E=o.create({label:"Stack"}),A=p,b=d,I,R=0,P=0;P<y;P++){for(var k=0,M=0;M<g;M++){var B=T(A,b,M,P,I,R);if(B){var F=B.bounds.max.y-B.bounds.min.y,N=B.bounds.max.x-B.bounds.min.x;F>k&&(k=F),h.translate(B,{x:N*.5,y:F*.5}),A=B.bounds.max.x+_,o.addBody(E,B),I=B,R+=1}else A+=_}b+=k+w,A=p}return E},i.chain=function(p,d,g,y,_,w){for(var T=p.bodies,E=1;E<T.length;E++){var A=T[E-1],b=T[E],I=A.bounds.max.y-A.bounds.min.y,R=A.bounds.max.x-A.bounds.min.x,P=b.bounds.max.y-b.bounds.min.y,k=b.bounds.max.x-b.bounds.min.x,M={bodyA:A,pointA:{x:R*d,y:I*g},bodyB:b,pointB:{x:k*y,y:P*_}},B=u.extend(M,w);o.addConstraint(p,a.create(B))}return p.label+=" Chain",p},i.mesh=function(p,d,g,y,_){var w=p.bodies,T,E,A,b,I;for(T=0;T<g;T++){for(E=1;E<d;E++)A=w[E-1+T*d],b=w[E+T*d],o.addConstraint(p,a.create(u.extend({bodyA:A,bodyB:b},_)));if(T>0)for(E=0;E<d;E++)A=w[E+(T-1)*d],b=w[E+T*d],o.addConstraint(p,a.create(u.extend({bodyA:A,bodyB:b},_))),y&&E>0&&(I=w[E-1+(T-1)*d],o.addConstraint(p,a.create(u.extend({bodyA:I,bodyB:b},_)))),y&&E<d-1&&(I=w[E+1+(T-1)*d],o.addConstraint(p,a.create(u.extend({bodyA:I,bodyB:b},_))))}return p.label+=" Mesh",p},i.pyramid=function(p,d,g,y,_,w,T){return i.stack(p,d,g,y,_,w,function(E,A,b,I,R,P){var k=Math.min(y,Math.ceil(g/2)),M=R?R.bounds.max.x-R.bounds.min.x:0;if(!(I>k)){I=k-I;var B=I,F=g-1-I;if(!(b<B||b>F)){P===1&&h.translate(R,{x:(b+(g%2===1?1:-1))*M,y:0});var N=R?b*M:0;return T(p+N+b*_,A,b,I,R,P)}}})},i.newtonsCradle=function(p,d,g,y,_){for(var w=o.create({label:"Newtons Cradle"}),T=0;T<g;T++){var E=1.9,A=f.circle(p+T*(y*E),d+_,y,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),b=a.create({pointA:{x:p+T*(y*E),y:d},bodyB:A});o.addBody(w,A),o.addConstraint(w,b)}return w},m(i,"newtonsCradle","Composites.newtonsCradle  moved to newtonsCradle example"),i.car=function(p,d,g,y,_){var w=h.nextGroup(!0),T=20,E=-g*.5+T,A=g*.5-T,b=0,I=o.create({label:"Car"}),R=f.rectangle(p,d,g,y,{collisionFilter:{group:w},chamfer:{radius:y*.5},density:2e-4}),P=f.circle(p+E,d+b,_,{collisionFilter:{group:w},friction:.8}),k=f.circle(p+A,d+b,_,{collisionFilter:{group:w},friction:.8}),M=a.create({bodyB:R,pointB:{x:E,y:b},bodyA:P,stiffness:1,length:0}),B=a.create({bodyB:R,pointB:{x:A,y:b},bodyA:k,stiffness:1,length:0});return o.addBody(I,R),o.addBody(I,P),o.addBody(I,k),o.addConstraint(I,M),o.addConstraint(I,B),I},m(i,"car","Composites.car  moved to car example"),i.softBody=function(p,d,g,y,_,w,T,E,A,b){A=u.extend({inertia:1/0},A),b=u.extend({stiffness:.2,render:{type:"line",anchors:!1}},b);var I=i.stack(p,d,g,y,_,w,function(R,P){return f.circle(R,P,E,A)});return i.mesh(I,g,y,T,b),I.label="Soft Body",I},m(i,"softBody","Composites.softBody  moved to softBody and cloth examples")})()},function(r,n,s){var i={};r.exports=i;var o=s(9),a=s(0),u=a.deprecated;(function(){i.create=function(h){var f={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return a.extend(f,h)},i.update=function(h,f,m,p){var d,g,y,_=m.world,w=h.buckets,T,E,A=!1;for(d=0;d<f.length;d++){var b=f[d];if(!(b.isSleeping&&!p)&&!(_.bounds&&(b.bounds.max.x<_.bounds.min.x||b.bounds.min.x>_.bounds.max.x||b.bounds.max.y<_.bounds.min.y||b.bounds.min.y>_.bounds.max.y))){var I=i._getRegion(h,b);if(!b.region||I.id!==b.region.id||p){(!b.region||p)&&(b.region=I);var R=i._regionUnion(I,b.region);for(g=R.startCol;g<=R.endCol;g++)for(y=R.startRow;y<=R.endRow;y++){E=i._getBucketId(g,y),T=w[E];var P=g>=I.startCol&&g<=I.endCol&&y>=I.startRow&&y<=I.endRow,k=g>=b.region.startCol&&g<=b.region.endCol&&y>=b.region.startRow&&y<=b.region.endRow;!P&&k&&k&&T&&i._bucketRemoveBody(h,T,b),(b.region===I||P&&!k||p)&&(T||(T=i._createBucket(w,E)),i._bucketAddBody(h,T,b))}b.region=I,A=!0}}}A&&(h.pairsList=i._createActivePairsList(h))},u(i,"update","Grid.update  replaced by Matter.Detector"),i.clear=function(h){h.buckets={},h.pairs={},h.pairsList=[]},u(i,"clear","Grid.clear  replaced by Matter.Detector"),i._regionUnion=function(h,f){var m=Math.min(h.startCol,f.startCol),p=Math.max(h.endCol,f.endCol),d=Math.min(h.startRow,f.startRow),g=Math.max(h.endRow,f.endRow);return i._createRegion(m,p,d,g)},i._getRegion=function(h,f){var m=f.bounds,p=Math.floor(m.min.x/h.bucketWidth),d=Math.floor(m.max.x/h.bucketWidth),g=Math.floor(m.min.y/h.bucketHeight),y=Math.floor(m.max.y/h.bucketHeight);return i._createRegion(p,d,g,y)},i._createRegion=function(h,f,m,p){return{id:h+","+f+","+m+","+p,startCol:h,endCol:f,startRow:m,endRow:p}},i._getBucketId=function(h,f){return"C"+h+"R"+f},i._createBucket=function(h,f){var m=h[f]=[];return m},i._bucketAddBody=function(h,f,m){var p=h.pairs,d=o.id,g=f.length,y;for(y=0;y<g;y++){var _=f[y];if(!(m.id===_.id||m.isStatic&&_.isStatic)){var w=d(m,_),T=p[w];T?T[2]+=1:p[w]=[m,_,1]}}f.push(m)},i._bucketRemoveBody=function(h,f,m){var p=h.pairs,d=o.id,g;f.splice(a.indexOf(f,m),1);var y=f.length;for(g=0;g<y;g++){var _=p[d(m,f[g])];_&&(_[2]-=1)}},i._createActivePairsList=function(h){var f,m=h.pairs,p=a.keys(m),d=p.length,g=[],y;for(y=0;y<d;y++)f=m[p[y]],f[2]>0?g.push(f):delete m[p[y]];return g}})()},function(r,n,s){var i={};r.exports=i;var o=s(3),a=s(7),u=s(14),h=s(5),f=s(13),m=s(10),p=s(6),d=s(0),g=s(1);(function(){i.create=function(y,_){var w=(y?y.mouse:null)||(_?_.mouse:null);w||(y&&y.render&&y.render.canvas?w=u.create(y.render.canvas):_&&_.element?w=u.create(_.element):(w=u.create(),d.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var T=m.create({label:"Mouse Constraint",pointA:w.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),E={type:"mouseConstraint",mouse:w,element:null,body:null,constraint:T,collisionFilter:{category:1,mask:4294967295,group:0}},A=d.extend(E,_);return h.on(y,"beforeUpdate",function(){var b=p.allBodies(y.world);i.update(A,b),i._triggerEvents(A)}),A},i.update=function(y,_){var w=y.mouse,T=y.constraint,E=y.body;if(w.button===0){if(T.bodyB)a.set(T.bodyB,!1),T.pointA=w.position;else for(var A=0;A<_.length;A++)if(E=_[A],g.contains(E.bounds,w.position)&&f.canCollide(E.collisionFilter,y.collisionFilter))for(var b=E.parts.length>1?1:0;b<E.parts.length;b++){var I=E.parts[b];if(o.contains(I.vertices,w.position)){T.pointA=w.position,T.bodyB=y.body=E,T.pointB={x:w.position.x-E.position.x,y:w.position.y-E.position.y},T.angleB=E.angle,a.set(E,!1),h.trigger(y,"startdrag",{mouse:w,body:E});break}}}else T.bodyB=y.body=null,T.pointB=null,E&&h.trigger(y,"enddrag",{mouse:w,body:E})},i._triggerEvents=function(y){var _=y.mouse,w=_.sourceEvents;w.mousemove&&h.trigger(y,"mousemove",{mouse:_}),w.mousedown&&h.trigger(y,"mousedown",{mouse:_}),w.mouseup&&h.trigger(y,"mouseup",{mouse:_}),u.clearSourceEvents(_)}})()},function(r,n,s){var i={};r.exports=i;var o=s(2),a=s(8),u=s(1),h=s(12),f=s(3);(function(){i.collides=function(m,p){for(var d=[],g=p.length,y=m.bounds,_=a.collides,w=u.overlaps,T=0;T<g;T++){var E=p[T],A=E.parts.length,b=A===1?0:1;if(w(E.bounds,y))for(var I=b;I<A;I++){var R=E.parts[I];if(w(R.bounds,y)){var P=_(R,m);if(P){d.push(P);break}}}}return d},i.ray=function(m,p,d,g){g=g||1e-100;for(var y=o.angle(p,d),_=o.magnitude(o.sub(p,d)),w=(d.x+p.x)*.5,T=(d.y+p.y)*.5,E=h.rectangle(w,T,_,g,{angle:y}),A=i.collides(E,m),b=0;b<A.length;b+=1){var I=A[b];I.body=I.bodyB=I.bodyA}return A},i.region=function(m,p,d){for(var g=[],y=0;y<m.length;y++){var _=m[y],w=u.overlaps(_.bounds,p);(w&&!d||!w&&d)&&g.push(_)}return g},i.point=function(m,p){for(var d=[],g=0;g<m.length;g++){var y=m[g];if(u.contains(y.bounds,p))for(var _=y.parts.length===1?0:1;_<y.parts.length;_++){var w=y.parts[_];if(u.contains(w.bounds,p)&&f.contains(w.vertices,p)){d.push(y);break}}}return d}})()},function(r,n,s){var i={};r.exports=i;var o=s(4),a=s(0),u=s(6),h=s(1),f=s(5),m=s(2),p=s(14);(function(){var d,g;typeof window<"u"&&(d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(function(){b(a.now())},1e3/60)},g=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i._goodFps=30,i._goodDelta=1e3/60,i.create=function(b){var I={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!b.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},R=a.extend(I,b);return R.canvas&&(R.canvas.width=R.options.width||R.canvas.width,R.canvas.height=R.options.height||R.canvas.height),R.mouse=b.mouse,R.engine=b.engine,R.canvas=R.canvas||w(R.options.width,R.options.height),R.context=R.canvas.getContext("2d"),R.textures={},R.bounds=R.bounds||{min:{x:0,y:0},max:{x:R.canvas.width,y:R.canvas.height}},R.controller=i,R.options.showBroadphase=!1,R.options.pixelRatio!==1&&i.setPixelRatio(R,R.options.pixelRatio),a.isElement(R.element)&&R.element.appendChild(R.canvas),R},i.run=function(b){(function I(R){b.frameRequestId=d(I),y(b,R),i.world(b,R),(b.options.showStats||b.options.showDebug)&&i.stats(b,b.context,R),(b.options.showPerformance||b.options.showDebug)&&i.performance(b,b.context,R)})()},i.stop=function(b){g(b.frameRequestId)},i.setPixelRatio=function(b,I){var R=b.options,P=b.canvas;I==="auto"&&(I=T(P)),R.pixelRatio=I,P.setAttribute("data-pixel-ratio",I),P.width=R.width*I,P.height=R.height*I,P.style.width=R.width+"px",P.style.height=R.height+"px"},i.lookAt=function(b,I,R,P){P=typeof P<"u"?P:!0,I=a.isArray(I)?I:[I],R=R||{x:0,y:0};for(var k={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},M=0;M<I.length;M+=1){var B=I[M],F=B.bounds?B.bounds.min:B.min||B.position||B,N=B.bounds?B.bounds.max:B.max||B.position||B;F&&N&&(F.x<k.min.x&&(k.min.x=F.x),N.x>k.max.x&&(k.max.x=N.x),F.y<k.min.y&&(k.min.y=F.y),N.y>k.max.y&&(k.max.y=N.y))}var U=k.max.x-k.min.x+2*R.x,H=k.max.y-k.min.y+2*R.y,Q=b.canvas.height,W=b.canvas.width,O=W/Q,V=U/H,G=1,j=1;V>O?j=V/O:G=O/V,b.options.hasBounds=!0,b.bounds.min.x=k.min.x,b.bounds.max.x=k.min.x+U*G,b.bounds.min.y=k.min.y,b.bounds.max.y=k.min.y+H*j,P&&(b.bounds.min.x+=U*.5-U*G*.5,b.bounds.max.x+=U*.5-U*G*.5,b.bounds.min.y+=H*.5-H*j*.5,b.bounds.max.y+=H*.5-H*j*.5),b.bounds.min.x-=R.x,b.bounds.max.x-=R.x,b.bounds.min.y-=R.y,b.bounds.max.y-=R.y,b.mouse&&(p.setScale(b.mouse,{x:(b.bounds.max.x-b.bounds.min.x)/b.canvas.width,y:(b.bounds.max.y-b.bounds.min.y)/b.canvas.height}),p.setOffset(b.mouse,b.bounds.min))},i.startViewTransform=function(b){var I=b.bounds.max.x-b.bounds.min.x,R=b.bounds.max.y-b.bounds.min.y,P=I/b.options.width,k=R/b.options.height;b.context.setTransform(b.options.pixelRatio/P,0,0,b.options.pixelRatio/k,0,0),b.context.translate(-b.bounds.min.x,-b.bounds.min.y)},i.endViewTransform=function(b){b.context.setTransform(b.options.pixelRatio,0,0,b.options.pixelRatio,0,0)},i.world=function(b,I){var R=a.now(),P=b.engine,k=P.world,M=b.canvas,B=b.context,F=b.options,N=b.timing,U=u.allBodies(k),H=u.allConstraints(k),Q=F.wireframes?F.wireframeBackground:F.background,W=[],O=[],V,G={timestamp:P.timing.timestamp};if(f.trigger(b,"beforeRender",G),b.currentBackground!==Q&&A(b,Q),B.globalCompositeOperation="source-in",B.fillStyle="transparent",B.fillRect(0,0,M.width,M.height),B.globalCompositeOperation="source-over",F.hasBounds){for(V=0;V<U.length;V++){var j=U[V];h.overlaps(j.bounds,b.bounds)&&W.push(j)}for(V=0;V<H.length;V++){var Z=H[V],pe=Z.bodyA,ue=Z.bodyB,Te=Z.pointA,ve=Z.pointB;pe&&(Te=m.add(pe.position,Z.pointA)),ue&&(ve=m.add(ue.position,Z.pointB)),!(!Te||!ve)&&(h.contains(b.bounds,Te)||h.contains(b.bounds,ve))&&O.push(Z)}i.startViewTransform(b),b.mouse&&(p.setScale(b.mouse,{x:(b.bounds.max.x-b.bounds.min.x)/b.options.width,y:(b.bounds.max.y-b.bounds.min.y)/b.options.height}),p.setOffset(b.mouse,b.bounds.min))}else O=H,W=U,b.options.pixelRatio!==1&&b.context.setTransform(b.options.pixelRatio,0,0,b.options.pixelRatio,0,0);!F.wireframes||P.enableSleeping&&F.showSleeping?i.bodies(b,W,B):(F.showConvexHulls&&i.bodyConvexHulls(b,W,B),i.bodyWireframes(b,W,B)),F.showBounds&&i.bodyBounds(b,W,B),(F.showAxes||F.showAngleIndicator)&&i.bodyAxes(b,W,B),F.showPositions&&i.bodyPositions(b,W,B),F.showVelocity&&i.bodyVelocity(b,W,B),F.showIds&&i.bodyIds(b,W,B),F.showSeparations&&i.separations(b,P.pairs.list,B),F.showCollisions&&i.collisions(b,P.pairs.list,B),F.showVertexNumbers&&i.vertexNumbers(b,W,B),F.showMousePosition&&i.mousePosition(b,b.mouse,B),i.constraints(O,B),F.hasBounds&&i.endViewTransform(b),f.trigger(b,"afterRender",G),N.lastElapsed=a.now()-R},i.stats=function(b,I,R){for(var P=b.engine,k=P.world,M=u.allBodies(k),B=0,F=55,N=44,U=0,H=0,Q=0;Q<M.length;Q+=1)B+=M[Q].parts.length;var W={Part:B,Body:M.length,Cons:u.allConstraints(k).length,Comp:u.allComposites(k).length,Pair:P.pairs.list.length};I.fillStyle="#0e0f19",I.fillRect(U,H,F*5.5,N),I.font="12px Arial",I.textBaseline="top",I.textAlign="right";for(var O in W){var V=W[O];I.fillStyle="#aaa",I.fillText(O,U+F,H+8),I.fillStyle="#eee",I.fillText(V,U+F,H+26),U+=F}},i.performance=function(b,I){var R=b.engine,P=b.timing,k=P.deltaHistory,M=P.elapsedHistory,B=P.timestampElapsedHistory,F=P.engineDeltaHistory,N=P.engineElapsedHistory,U=R.timing.lastDelta,H=_(k),Q=_(M),W=_(F),O=_(N),V=_(B),G=V/H||0,j=1e3/H||0,Z=4,pe=12,ue=60,Te=34,ve=10,be=69;I.fillStyle="#0e0f19",I.fillRect(0,50,pe*4+ue*5+22,Te),i.status(I,ve,be,ue,Z,k.length,Math.round(j)+" fps",j/i._goodFps,function(Le){return k[Le]/H-1}),i.status(I,ve+pe+ue,be,ue,Z,F.length,U.toFixed(2)+" dt",i._goodDelta/U,function(Le){return F[Le]/W-1}),i.status(I,ve+(pe+ue)*2,be,ue,Z,N.length,O.toFixed(2)+" ut",1-O/i._goodFps,function(Le){return N[Le]/O-1}),i.status(I,ve+(pe+ue)*3,be,ue,Z,M.length,Q.toFixed(2)+" rt",1-Q/i._goodFps,function(Le){return M[Le]/Q-1}),i.status(I,ve+(pe+ue)*4,be,ue,Z,B.length,G.toFixed(2)+" x",G*G*G,function(Le){return(B[Le]/k[Le]/G||0)-1})},i.status=function(b,I,R,P,k,M,B,F,N){b.strokeStyle="#888",b.fillStyle="#444",b.lineWidth=1,b.fillRect(I,R+7,P,1),b.beginPath(),b.moveTo(I,R+7-k*a.clamp(.4*N(0),-2,2));for(var U=0;U<P;U+=1)b.lineTo(I+U,R+7-(U<M?k*a.clamp(.4*N(U),-2,2):0));b.stroke(),b.fillStyle="hsl("+a.clamp(25+95*F,0,120)+",100%,60%)",b.fillRect(I,R-7,4,4),b.font="12px Arial",b.textBaseline="middle",b.textAlign="right",b.fillStyle="#eee",b.fillText(B,I+P,R-5)},i.constraints=function(b,I){for(var R=I,P=0;P<b.length;P++){var k=b[P];if(!(!k.render.visible||!k.pointA||!k.pointB)){var M=k.bodyA,B=k.bodyB,F,N;if(M?F=m.add(M.position,k.pointA):F=k.pointA,k.render.type==="pin")R.beginPath(),R.arc(F.x,F.y,3,0,2*Math.PI),R.closePath();else{if(B?N=m.add(B.position,k.pointB):N=k.pointB,R.beginPath(),R.moveTo(F.x,F.y),k.render.type==="spring")for(var U=m.sub(N,F),H=m.perp(m.normalise(U)),Q=Math.ceil(a.clamp(k.length/5,12,20)),W,O=1;O<Q;O+=1)W=O%2===0?1:-1,R.lineTo(F.x+U.x*(O/Q)+H.x*W*4,F.y+U.y*(O/Q)+H.y*W*4);R.lineTo(N.x,N.y)}k.render.lineWidth&&(R.lineWidth=k.render.lineWidth,R.strokeStyle=k.render.strokeStyle,R.stroke()),k.render.anchors&&(R.fillStyle=k.render.strokeStyle,R.beginPath(),R.arc(F.x,F.y,3,0,2*Math.PI),R.arc(N.x,N.y,3,0,2*Math.PI),R.closePath(),R.fill())}}},i.bodies=function(b,I,R){var P=R;b.engine;var k=b.options,M=k.showInternalEdges||!k.wireframes,B,F,N,U;for(N=0;N<I.length;N++)if(B=I[N],!!B.render.visible){for(U=B.parts.length>1?1:0;U<B.parts.length;U++)if(F=B.parts[U],!!F.render.visible){if(k.showSleeping&&B.isSleeping?P.globalAlpha=.5*F.render.opacity:F.render.opacity!==1&&(P.globalAlpha=F.render.opacity),F.render.sprite&&F.render.sprite.texture&&!k.wireframes){var H=F.render.sprite,Q=E(b,H.texture);P.translate(F.position.x,F.position.y),P.rotate(F.angle),P.drawImage(Q,Q.width*-H.xOffset*H.xScale,Q.height*-H.yOffset*H.yScale,Q.width*H.xScale,Q.height*H.yScale),P.rotate(-F.angle),P.translate(-F.position.x,-F.position.y)}else{if(F.circleRadius)P.beginPath(),P.arc(F.position.x,F.position.y,F.circleRadius,0,2*Math.PI);else{P.beginPath(),P.moveTo(F.vertices[0].x,F.vertices[0].y);for(var W=1;W<F.vertices.length;W++)!F.vertices[W-1].isInternal||M?P.lineTo(F.vertices[W].x,F.vertices[W].y):P.moveTo(F.vertices[W].x,F.vertices[W].y),F.vertices[W].isInternal&&!M&&P.moveTo(F.vertices[(W+1)%F.vertices.length].x,F.vertices[(W+1)%F.vertices.length].y);P.lineTo(F.vertices[0].x,F.vertices[0].y),P.closePath()}k.wireframes?(P.lineWidth=1,P.strokeStyle="#bbb",P.stroke()):(P.fillStyle=F.render.fillStyle,F.render.lineWidth&&(P.lineWidth=F.render.lineWidth,P.strokeStyle=F.render.strokeStyle,P.stroke()),P.fill())}P.globalAlpha=1}}},i.bodyWireframes=function(b,I,R){var P=R,k=b.options.showInternalEdges,M,B,F,N,U;for(P.beginPath(),F=0;F<I.length;F++)if(M=I[F],!!M.render.visible)for(U=M.parts.length>1?1:0;U<M.parts.length;U++){for(B=M.parts[U],P.moveTo(B.vertices[0].x,B.vertices[0].y),N=1;N<B.vertices.length;N++)!B.vertices[N-1].isInternal||k?P.lineTo(B.vertices[N].x,B.vertices[N].y):P.moveTo(B.vertices[N].x,B.vertices[N].y),B.vertices[N].isInternal&&!k&&P.moveTo(B.vertices[(N+1)%B.vertices.length].x,B.vertices[(N+1)%B.vertices.length].y);P.lineTo(B.vertices[0].x,B.vertices[0].y)}P.lineWidth=1,P.strokeStyle="#bbb",P.stroke()},i.bodyConvexHulls=function(b,I,R){var P=R,k,M,B;for(P.beginPath(),M=0;M<I.length;M++)if(k=I[M],!(!k.render.visible||k.parts.length===1)){for(P.moveTo(k.vertices[0].x,k.vertices[0].y),B=1;B<k.vertices.length;B++)P.lineTo(k.vertices[B].x,k.vertices[B].y);P.lineTo(k.vertices[0].x,k.vertices[0].y)}P.lineWidth=1,P.strokeStyle="rgba(255,255,255,0.2)",P.stroke()},i.vertexNumbers=function(b,I,R){var P=R,k,M,B;for(k=0;k<I.length;k++){var F=I[k].parts;for(B=F.length>1?1:0;B<F.length;B++){var N=F[B];for(M=0;M<N.vertices.length;M++)P.fillStyle="rgba(255,255,255,0.2)",P.fillText(k+"_"+M,N.position.x+(N.vertices[M].x-N.position.x)*.8,N.position.y+(N.vertices[M].y-N.position.y)*.8)}}},i.mousePosition=function(b,I,R){var P=R;P.fillStyle="rgba(255,255,255,0.8)",P.fillText(I.position.x+"  "+I.position.y,I.position.x+5,I.position.y-5)},i.bodyBounds=function(b,I,R){var P=R;b.engine;var k=b.options;P.beginPath();for(var M=0;M<I.length;M++){var B=I[M];if(B.render.visible)for(var F=I[M].parts,N=F.length>1?1:0;N<F.length;N++){var U=F[N];P.rect(U.bounds.min.x,U.bounds.min.y,U.bounds.max.x-U.bounds.min.x,U.bounds.max.y-U.bounds.min.y)}}k.wireframes?P.strokeStyle="rgba(255,255,255,0.08)":P.strokeStyle="rgba(0,0,0,0.1)",P.lineWidth=1,P.stroke()},i.bodyAxes=function(b,I,R){var P=R;b.engine;var k=b.options,M,B,F,N;for(P.beginPath(),B=0;B<I.length;B++){var U=I[B],H=U.parts;if(U.render.visible)if(k.showAxes)for(F=H.length>1?1:0;F<H.length;F++)for(M=H[F],N=0;N<M.axes.length;N++){var Q=M.axes[N];P.moveTo(M.position.x,M.position.y),P.lineTo(M.position.x+Q.x*20,M.position.y+Q.y*20)}else for(F=H.length>1?1:0;F<H.length;F++)for(M=H[F],N=0;N<M.axes.length;N++)P.moveTo(M.position.x,M.position.y),P.lineTo((M.vertices[0].x+M.vertices[M.vertices.length-1].x)/2,(M.vertices[0].y+M.vertices[M.vertices.length-1].y)/2)}k.wireframes?(P.strokeStyle="indianred",P.lineWidth=1):(P.strokeStyle="rgba(255, 255, 255, 0.4)",P.globalCompositeOperation="overlay",P.lineWidth=2),P.stroke(),P.globalCompositeOperation="source-over"},i.bodyPositions=function(b,I,R){var P=R;b.engine;var k=b.options,M,B,F,N;for(P.beginPath(),F=0;F<I.length;F++)if(M=I[F],!!M.render.visible)for(N=0;N<M.parts.length;N++)B=M.parts[N],P.arc(B.position.x,B.position.y,3,0,2*Math.PI,!1),P.closePath();for(k.wireframes?P.fillStyle="indianred":P.fillStyle="rgba(0,0,0,0.5)",P.fill(),P.beginPath(),F=0;F<I.length;F++)M=I[F],M.render.visible&&(P.arc(M.positionPrev.x,M.positionPrev.y,2,0,2*Math.PI,!1),P.closePath());P.fillStyle="rgba(255,165,0,0.8)",P.fill()},i.bodyVelocity=function(b,I,R){var P=R;P.beginPath();for(var k=0;k<I.length;k++){var M=I[k];if(M.render.visible){var B=o.getVelocity(M);P.moveTo(M.position.x,M.position.y),P.lineTo(M.position.x+B.x,M.position.y+B.y)}}P.lineWidth=3,P.strokeStyle="cornflowerblue",P.stroke()},i.bodyIds=function(b,I,R){var P=R,k,M;for(k=0;k<I.length;k++)if(I[k].render.visible){var B=I[k].parts;for(M=B.length>1?1:0;M<B.length;M++){var F=B[M];P.font="12px Arial",P.fillStyle="rgba(255,255,255,0.5)",P.fillText(F.id,F.position.x+10,F.position.y-10)}}},i.collisions=function(b,I,R){var P=R,k=b.options,M,B,F,N;for(P.beginPath(),F=0;F<I.length;F++)if(M=I[F],!!M.isActive)for(B=M.collision,N=0;N<M.activeContacts.length;N++){var U=M.activeContacts[N],H=U.vertex;P.rect(H.x-1.5,H.y-1.5,3.5,3.5)}for(k.wireframes?P.fillStyle="rgba(255,255,255,0.7)":P.fillStyle="orange",P.fill(),P.beginPath(),F=0;F<I.length;F++)if(M=I[F],!!M.isActive&&(B=M.collision,M.activeContacts.length>0)){var Q=M.activeContacts[0].vertex.x,W=M.activeContacts[0].vertex.y;M.activeContacts.length===2&&(Q=(M.activeContacts[0].vertex.x+M.activeContacts[1].vertex.x)/2,W=(M.activeContacts[0].vertex.y+M.activeContacts[1].vertex.y)/2),B.bodyB===B.supports[0].body||B.bodyA.isStatic===!0?P.moveTo(Q-B.normal.x*8,W-B.normal.y*8):P.moveTo(Q+B.normal.x*8,W+B.normal.y*8),P.lineTo(Q,W)}k.wireframes?P.strokeStyle="rgba(255,165,0,0.7)":P.strokeStyle="orange",P.lineWidth=1,P.stroke()},i.separations=function(b,I,R){var P=R,k=b.options,M,B,F,N,U;for(P.beginPath(),U=0;U<I.length;U++)if(M=I[U],!!M.isActive){B=M.collision,F=B.bodyA,N=B.bodyB;var H=1;!N.isStatic&&!F.isStatic&&(H=.5),N.isStatic&&(H=0),P.moveTo(N.position.x,N.position.y),P.lineTo(N.position.x-B.penetration.x*H,N.position.y-B.penetration.y*H),H=1,!N.isStatic&&!F.isStatic&&(H=.5),F.isStatic&&(H=0),P.moveTo(F.position.x,F.position.y),P.lineTo(F.position.x+B.penetration.x*H,F.position.y+B.penetration.y*H)}k.wireframes?P.strokeStyle="rgba(255,165,0,0.5)":P.strokeStyle="orange",P.stroke()},i.inspector=function(b,I){b.engine;var R=b.selected,P=b.render,k=P.options,M;if(k.hasBounds){var B=P.bounds.max.x-P.bounds.min.x,F=P.bounds.max.y-P.bounds.min.y,N=B/P.options.width,U=F/P.options.height;I.scale(1/N,1/U),I.translate(-P.bounds.min.x,-P.bounds.min.y)}for(var H=0;H<R.length;H++){var Q=R[H].data;switch(I.translate(.5,.5),I.lineWidth=1,I.strokeStyle="rgba(255,165,0,0.9)",I.setLineDash([1,2]),Q.type){case"body":M=Q.bounds,I.beginPath(),I.rect(Math.floor(M.min.x-3),Math.floor(M.min.y-3),Math.floor(M.max.x-M.min.x+6),Math.floor(M.max.y-M.min.y+6)),I.closePath(),I.stroke();break;case"constraint":var W=Q.pointA;Q.bodyA&&(W=Q.pointB),I.beginPath(),I.arc(W.x,W.y,10,0,2*Math.PI),I.closePath(),I.stroke();break}I.setLineDash([]),I.translate(-.5,-.5)}b.selectStart!==null&&(I.translate(.5,.5),I.lineWidth=1,I.strokeStyle="rgba(255,165,0,0.6)",I.fillStyle="rgba(255,165,0,0.1)",M=b.selectBounds,I.beginPath(),I.rect(Math.floor(M.min.x),Math.floor(M.min.y),Math.floor(M.max.x-M.min.x),Math.floor(M.max.y-M.min.y)),I.closePath(),I.stroke(),I.fill(),I.translate(-.5,-.5)),k.hasBounds&&I.setTransform(1,0,0,1,0,0)};var y=function(b,I){var R=b.engine,P=b.timing,k=P.historySize,M=R.timing.timestamp;P.delta=I-P.lastTime||i._goodDelta,P.lastTime=I,P.timestampElapsed=M-P.lastTimestamp||0,P.lastTimestamp=M,P.deltaHistory.unshift(P.delta),P.deltaHistory.length=Math.min(P.deltaHistory.length,k),P.engineDeltaHistory.unshift(R.timing.lastDelta),P.engineDeltaHistory.length=Math.min(P.engineDeltaHistory.length,k),P.timestampElapsedHistory.unshift(P.timestampElapsed),P.timestampElapsedHistory.length=Math.min(P.timestampElapsedHistory.length,k),P.engineElapsedHistory.unshift(R.timing.lastElapsed),P.engineElapsedHistory.length=Math.min(P.engineElapsedHistory.length,k),P.elapsedHistory.unshift(P.lastElapsed),P.elapsedHistory.length=Math.min(P.elapsedHistory.length,k)},_=function(b){for(var I=0,R=0;R<b.length;R+=1)I+=b[R];return I/b.length||0},w=function(b,I){var R=document.createElement("canvas");return R.width=b,R.height=I,R.oncontextmenu=function(){return!1},R.onselectstart=function(){return!1},R},T=function(b){var I=b.getContext("2d"),R=window.devicePixelRatio||1,P=I.webkitBackingStorePixelRatio||I.mozBackingStorePixelRatio||I.msBackingStorePixelRatio||I.oBackingStorePixelRatio||I.backingStorePixelRatio||1;return R/P},E=function(b,I){var R=b.textures[I];return R||(R=b.textures[I]=new Image,R.src=I,R)},A=function(b,I){var R=I;/(jpg|gif|png)$/.test(I)&&(R="url("+I+")"),b.canvas.style.background=R,b.canvas.style.backgroundSize="contain",b.currentBackground=I}})()},function(r,n,s){var i={};r.exports=i;var o=s(5),a=s(17),u=s(0);(function(){var h,f;if(typeof window<"u"&&(h=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,f=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!h){var m;h=function(p){m=setTimeout(function(){p(u.now())},1e3/60)},f=function(){clearTimeout(m)}}i.create=function(p){var d={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},g=u.extend(d,p);return g.delta=g.delta||1e3/g.fps,g.deltaMin=g.deltaMin||1e3/g.fps,g.deltaMax=g.deltaMax||1e3/(g.fps*.5),g.fps=1e3/g.delta,g},i.run=function(p,d){return typeof p.positionIterations<"u"&&(d=p,p=i.create()),function g(y){p.frameRequestId=h(g),y&&p.enabled&&i.tick(p,d,y)}(),p},i.tick=function(p,d,g){var y=d.timing,_;p.isFixed?_=p.delta:(_=g-p.timePrev||p.delta,p.timePrev=g,p.deltaHistory.push(_),p.deltaHistory=p.deltaHistory.slice(-p.deltaSampleSize),_=Math.min.apply(null,p.deltaHistory),_=_<p.deltaMin?p.deltaMin:_,_=_>p.deltaMax?p.deltaMax:_,p.delta=_);var w={timestamp:y.timestamp};o.trigger(p,"beforeTick",w),p.frameCounter+=1,g-p.counterTimestamp>=1e3&&(p.fps=p.frameCounter*((g-p.counterTimestamp)/1e3),p.counterTimestamp=g,p.frameCounter=0),o.trigger(p,"tick",w),o.trigger(p,"beforeUpdate",w),a.update(d,_),o.trigger(p,"afterUpdate",w),o.trigger(p,"afterTick",w)},i.stop=function(p){f(p.frameRequestId)},i.start=function(p,d){i.run(p,d)}})()},function(r,n,s){var i={};r.exports=i;var o=s(8),a=s(0),u=a.deprecated;(function(){i.collides=function(h,f){return o.collides(h,f)},u(i,"collides","SAT.collides  replaced by Collision.collides")})()},function(r,n,s){var i={};r.exports=i,s(1);var o=s(0);(function(){i.pathToVertices=function(a,u){typeof window<"u"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var h,f,m,p,d,g,y,_,w,T,E=[],A,b,I=0,R=0,P=0;u=u||15;var k=function(B,F,N){var U=N%2===1&&N>1;if(!w||B!=w.x||F!=w.y){w&&U?(A=w.x,b=w.y):(A=0,b=0);var H={x:A+B,y:b+F};(U||!w)&&(w=H),E.push(H),R=A+B,P=b+F}},M=function(B){var F=B.pathSegTypeAsLetter.toUpperCase();if(F!=="Z"){switch(F){case"M":case"L":case"T":case"C":case"S":case"Q":R=B.x,P=B.y;break;case"H":R=B.x;break;case"V":P=B.y;break}k(R,P,B.pathSegType)}};for(i._svgPathToAbsolute(a),m=a.getTotalLength(),g=[],h=0;h<a.pathSegList.numberOfItems;h+=1)g.push(a.pathSegList.getItem(h));for(y=g.concat();I<m;){if(T=a.getPathSegAtLength(I),d=g[T],d!=_){for(;y.length&&y[0]!=d;)M(y.shift());_=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":p=a.getPointAtLength(I),k(p.x,p.y,0);break}I+=u}for(h=0,f=y.length;h<f;++h)M(y[h]);return E},i._svgPathToAbsolute=function(a){for(var u,h,f,m,p,d,g=a.pathSegList,y=0,_=0,w=g.numberOfItems,T=0;T<w;++T){var E=g.getItem(T),A=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in E&&(y=E.x),"y"in E&&(_=E.y);else switch("x1"in E&&(f=y+E.x1),"x2"in E&&(p=y+E.x2),"y1"in E&&(m=_+E.y1),"y2"in E&&(d=_+E.y2),"x"in E&&(y+=E.x),"y"in E&&(_+=E.y),A){case"m":g.replaceItem(a.createSVGPathSegMovetoAbs(y,_),T);break;case"l":g.replaceItem(a.createSVGPathSegLinetoAbs(y,_),T);break;case"h":g.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(y),T);break;case"v":g.replaceItem(a.createSVGPathSegLinetoVerticalAbs(_),T);break;case"c":g.replaceItem(a.createSVGPathSegCurvetoCubicAbs(y,_,f,m,p,d),T);break;case"s":g.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(y,_,p,d),T);break;case"q":g.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(y,_,f,m),T);break;case"t":g.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(y,_),T);break;case"a":g.replaceItem(a.createSVGPathSegArcAbs(y,_,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),T);break;case"z":case"Z":y=u,_=h;break}(A=="M"||A=="m")&&(u=y,h=_)}}})()},function(r,n,s){var i={};r.exports=i;var o=s(6);s(0),function(){i.create=o.create,i.add=o.add,i.remove=o.remove,i.clear=o.clear,i.addComposite=o.addComposite,i.addBody=o.addBody,i.addConstraint=o.addConstraint}()}])})})(uA);var Ft=uA.exports;const Hr=mu(Ft),xa={name:"matter-attractors-ts",version:"0.0.1",for:"matter-js@^0.19.0",install(t){t.after("Body.create",function(){xa.Body.init(this)}),t.before("Engine.update",function(e){xa.Engine.update(e)})},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update(t){const e=Hr.Composite.allBodies(t.world);for(let r=0;r<e.length;r+=1){const n=e[r],s=n.plugin.attractors;if(s&&s.length>0)for(let i=r+1;i<e.length;i+=1){const o=e[i];for(let a=0;a<s.length;a+=1){let u=s[a],h=u;Hr.Common.isFunction(u)&&(h=u(n,o)),h&&Hr.Body.applyForce(o,o.position,h)}}}}},Attractors:{gravityConstant:.001,gravity(t,e){var r=Hr.Vector.sub(e.position,t.position),n=Hr.Vector.magnitudeSquared(r)||1e-4,s=Hr.Vector.normalise(r),i=-xa.Attractors.gravityConstant*(t.mass*e.mass/n),o=Hr.Vector.mult(s,i);Hr.Body.applyForce(t,t.position,Hr.Vector.neg(o)),Hr.Body.applyForce(e,e.position,o)}}};Hr.Plugin.register(xa);const bu=xe.createContext({gameState:"INIT",mjsEngine:void 0,player:void 0,screenSize:{width:0,height:0},setGameState:()=>{},setPlayer:()=>{}}),FN=({children:t,screenSize:e})=>{const[r,n]=xe.useState(),[s,i]=xe.useState(),[o,a]=xe.useState("HOME");return xe.useEffect(()=>{Hr.use(xa);const u=Ft.Engine.create();u.gravity.y=0,n(u)},[]),ot.useTick(u=>{r!==void 0&&Ft.Engine.update(r,u*(1e3/60))}),Pe.jsx(bu.Provider,{value:{gameState:o,mjsEngine:r,player:s,screenSize:e,setGameState:a,setPlayer:i},children:t})},lf=()=>{const{mjsEngine:t}=xe.useContext(bu);return t},NN="/assets/ball-Wci_wmJv.png",Qv=()=>{const{player:t,setPlayer:e}=xe.useContext(bu);return{player:t,setPlayer:e}},Au=()=>{const{screenSize:{width:t,height:e}}=xe.useContext(bu);return{screenWidth:t,screenHeight:e}},Cl=100,oh=Cl/2,cA=2,Oh=4,hA=8,dA=128,fA=dA/4,BN=fA/dA*2,ah=.6,ON=2e3,LN=()=>{const t=lf(),{screenHeight:e,screenWidth:r}=Au(),n=xe.useRef(null),s=xe.useRef(),{setPlayer:i}=Qv(),[o,a]=xe.useState(!1),[u,h]=xe.useState(!1),[f,m]=xe.useState(!1),[p,d]=xe.useState(!1);return xe.useEffect(()=>{n.current},[n]),xe.useEffect(()=>{if(!t)return;const g=w=>{w.key==="ArrowLeft"&&a(!0),w.key==="ArrowRight"&&h(!0),w.key==="ArrowUp"&&m(!0),w.key==="ArrowDown"&&d(!0)},y=w=>{w.key==="ArrowLeft"&&a(!1),w.key==="ArrowRight"&&h(!1),w.key==="ArrowUp"&&m(!1),w.key==="ArrowDown"&&d(!1)},_=Ft.Bodies.circle(r/2,e,fA,{label:"PLAYER",plugin:{attractors:[xa.Attractors.gravity]}});return _.collisionFilter.category=hA,_.mass=ON,s.current=_,Ft.Composite.add(t.world,[_]),i&&i(_),window.addEventListener("keydown",g),window.addEventListener("keyup",y),()=>{window.removeEventListener("keydown",g),window.removeEventListener("keyup",y),i&&i(void 0),Ft.Composite.remove(t.world,[_])}},[t]),ot.useTick(()=>{if(s.current&&n.current&&i){o&&(s.current.force.x=-ah),u&&(s.current.force.x=ah),f&&(s.current.force.y=-ah),p&&(s.current.force.y=ah);const g=s.current.position;n.current.position={...g},n.current.rotation=s.current.angle}}),Pe.jsx(ot.Sprite,{image:NN,x:0,y:0,ref:n,scale:BN,anchor:.5})};var lh,UN=new Uint8Array(16);function GN(){if(!lh&&(lh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!lh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lh(UN)}const zN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function HN(t){return typeof t=="string"&&zN.test(t)}var Gt=[];for(var Om=0;Om<256;++Om)Gt.push((Om+256).toString(16).substr(1));function $N(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]).toLowerCase();if(!HN(r))throw TypeError("Stringified UUID is invalid");return r}function VN(t,e,r){t=t||{};var n=t.random||(t.rng||GN)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var s=0;s<16;++s)e[r+s]=n[s];return e}return $N(n)}var jN=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,WN=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;
uniform float alpha;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    if (knockout) {
      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`;const pA=class extends Vt{constructor(t){const e=Object.assign({},pA.defaults,t),{outerStrength:r,innerStrength:n,color:s,knockout:i,quality:o,alpha:a}=e,u=Math.round(e.distance);super(jN,WN.replace(/__ANGLE_STEP_SIZE__/gi,`${(1/o/u).toFixed(7)}`).replace(/__DIST__/gi,`${u.toFixed(0)}.0`)),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.uniforms.alpha=1,Object.assign(this,{color:s,outerStrength:r,innerStrength:n,padding:u,knockout:i,alpha:a})}get color(){return HT(this.uniforms.glowColor)}set color(t){Ck(t,this.uniforms.glowColor)}get outerStrength(){return this.uniforms.outerStrength}set outerStrength(t){this.uniforms.outerStrength=t}get innerStrength(){return this.uniforms.innerStrength}set innerStrength(t){this.uniforms.innerStrength=t}get knockout(){return this.uniforms.knockout}set knockout(t){this.uniforms.knockout=t}get alpha(){return this.uniforms.alpha}set alpha(t){this.uniforms.alpha=t}};let mA=pA;mA.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1};const XN="/assets/planet-shade-DBhAG3XL.png",YN=["Airless","Aquamarine","Arid","Barren","Cloudy","Cratered","Dry","Frozen","Glacial","Icy","Lunar","Lush","Magma","Muddy","Oasis","Ocean","Rocky","Snowy","Terrestrial","Tropical"],Ow={},QN=()=>[...YN].sort(()=>.5-Math.random())[0],Lw=(t,e,r)=>{const n=lf(),s=xe.useCallback(i=>{i.pairs.forEach(o=>{const a=o.bodyA.label||"",u=o.bodyB.label||"";if(a.indexOf(t)>-1&&u.indexOf(e)>-1||a.indexOf(e)>-1&&u.indexOf(t)>-1)return r(o.bodyA,o.bodyB)})},[]);xe.useEffect(()=>(n&&Ft.Events.on(n,"collisionStart",s),()=>n&&Ft.Events.off(n,"collisionStart",s)),[n])},KN=128,ZN=KN/2,qN=5e3,Uw=Oh|hA,JN=({id:t,planetAssedIndex:e,scale:r,planetType:n,velocity:s,x:i,y:o,onCollission:a=()=>{},onPlanetDestroy:u=()=>{},...h})=>{const f=xe.useRef(null),m=xe.useRef(null),p=xe.useRef(),[d]=xe.useState(`/planets/${n}/${n}_${e}-128x128.png`),g=lf(),{player:y}=Qv(),_=`PLANET.${t.split("-").pop()}`;Lw(_,"BOUND",()=>{w()}),Lw(_,"PLAYER",()=>{w(),a(t)});const w=xe.useCallback(()=>{g&&p.current&&(Ft.Composite.remove(g.world,[p.current]),p.current=void 0,u(t))},[]);return xe.useEffect(()=>{if(!g)return;const T=Ft.Bodies.circle(i||0,o||0,ZN*r,{label:_,collisionFilter:{group:-1}});return T.mass=qN*r,T.frictionAir=0,T.collisionFilter.mask=Uw,p.current=T,Ft.Composite.add(g.world,[T]),Ft.Body.setVelocity(T,s),()=>{T&&Ft.Composite.remove(g.world,[T])}},[g]),xe.useEffect(()=>{var T,E,A;f.current&&n&&((E=(T=Ow[n])==null?void 0:T.glowFilter)!=null&&E.color)&&(f.current.filters=[new mA((A=Ow[n])==null?void 0:A.glowFilter)])},[f.current]),ot.useTick(()=>{if(p.current){const T=p.current;if(T.bounds.min.y>0&&T.collisionFilter.mask===Uw&&(T.collisionFilter.mask=T.collisionFilter.mask|cA),f.current&&(f.current.position=T.position),y&&m.current){const{x:E,y:A}=T.position,b=Math.atan2(y.position.y-A,y.position.x-E);m.current.rotation=b}}}),Pe.jsxs(ot.Container,{ref:f,x:i,y:o,scale:r,...h,children:[Pe.jsx(ot.Sprite,{image:d,anchor:.5}),Pe.jsx(ot.Sprite,{image:XN,anchor:.5,ref:m})]})},sa=(t=0,e=1,r=!1)=>{const n=Math.random()*(e-t)+t;return r?Math.floor(n):n},Gw=()=>({id:VN(),scale:sa(.33,1),planetType:QN(),velocity:{x:sa(-.75,.75),y:sa(1.5,2)},x:sa(0,800),y:-100}),eB=({onCollission:t=()=>{}})=>{const[e,r]=xe.useState([]);xe.useEffect(()=>{for(let s=0;s<3;s++)setTimeout(()=>{const i=Gw();r(o=>[...o,i])},sa(1e3,4e3))},[]);const n=xe.useCallback(s=>{r(i=>[...i.filter(o=>o.id!==s),Gw()])},[]);return Pe.jsx(Pe.Fragment,{children:e.map(s=>Pe.jsx(JN,{planetAssedIndex:`0${sa(1,5,!0)}`,onCollission:t,onPlanetDestroy:n,...s},s.id))})},gA=new Qe;tt.prototype._cacheAsBitmap=!1;tt.prototype._cacheData=null;tt.prototype._cacheAsBitmapResolution=null;tt.prototype._cacheAsBitmapMultisample=null;class tB{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(tt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new tB),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});tt.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};tt.prototype._initCachedDisplayObject=function(t){var p,d;if((p=this._cacheData)!=null&&p.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const r=this.getLocalBounds(new Ee,!0);if((d=this.filters)!=null&&d.length){const g=this.filters[0].padding;r.pad(g)}const n=this.cacheAsBitmapResolution||t.resolution;r.ceil(n),r.width=Math.max(r.width,1/n),r.height=Math.max(r.height,1/n);const s=t.renderTexture.current,i=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,u=co.create({width:r.width,height:r.height,resolution:n,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${oo()}`;this._cacheData.textureCacheId=h,Se.addToCache(u.baseTexture,h),se.addToCache(u,h);const f=this.transform.localTransform.copyTo(gA).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:f,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(s,i,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const m=new ei(u);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(r.x/r.width),m.anchor.y=-(r.y/r.height),m.alpha=e,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=m.containsPoint.bind(m)};tt.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};tt.prototype._initCachedDisplayObjectCanvas=function(t){var f;if((f=this._cacheData)!=null&&f.sprite)return;const e=this.getLocalBounds(new Ee,!0),r=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,s=t._projTransform,i=this.cacheAsBitmapResolution||t.resolution;e.ceil(i),e.width=Math.max(e.width,1/i),e.height=Math.max(e.height,1/i);const o=co.create({width:e.width,height:e.height,resolution:i}),a=`cacheAsBitmap_${oo()}`;this._cacheData.textureCacheId=a,Se.addToCache(o.baseTexture,a),se.addToCache(o,a);const u=gA;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=e.x,u.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:u,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const h=new ei(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(e.x/e.width),h.anchor.y=-(e.y/e.height),h.alpha=r,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};tt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};tt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};tt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Se.removeFromCache(this._cacheData.textureCacheId),se.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};tt.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};tt.prototype.name=null;ar.prototype.getChildByName=function(t,e){for(let r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(let r=0,n=this.children.length;r<n;r++){const s=this.children[r];if(!s.getChildByName)continue;const i=s.getChildByName(t,!0);if(i)return i}return null};tt.prototype.getGlobalPosition=function(t=new Me,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var rB=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class nB extends Vt{constructor(e=1){super(XD,rB,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const iB={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},sB=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function oB(t){const e=iB[t],r=e.length;let n=sB,s="";const i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let u=i.replace("%index%",a.toString());o=a,a>=r&&(o=t-a-1),u=u.replace("%value%",e[o].toString()),s+=u,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",t.toString()),n}const aB=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function lB(t,e){const r=Math.ceil(t/2);let n=aB,s="",i;e?i="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":i="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=i.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),s+=a,s+=`
`}return n=n.replace("%blur%",s),n=n.replace("%size%",t.toString()),n}class I0 extends Vt{constructor(e,r=8,n=4,s=Vt.defaultResolution,i=5){const o=lB(i,e),a=oB(i);super(o,a),this.horizontal=e,this.resolution=s,this._quality=0,this.quality=n,this.blur=r}apply(e,r,n,s){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,n,s);else{const i=e.getFilterTexture(),o=e.renderer;let a=r,u=i;this.state.blend=!1,e.applyFilter(this,a,u,zn.CLEAR);for(let h=1;h<this.passes-1;h++){e.bindAndClear(a,zn.BLIT),this.uniforms.uSampler=u;const f=u;u=a,a=f,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,n,s),e.returnFilterTexture(i)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class vA extends Vt{constructor(e=8,r=4,n=Vt.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new I0(!0,e,r,n,s),this.blurYFilter=new I0(!1,e,r,n,s),this.resolution=n,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,n,s){const i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,r,a,zn.CLEAR),this.blurYFilter.apply(e,a,n,s),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,r,n,s):this.blurXFilter.apply(e,r,n,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var uB=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class R0 extends Vt{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Eb,uB,e),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,s,i]=$e.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,s,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),s=Math.sin(e),i=Math.sqrt,o=1/3,a=i(o),u=n+(1-n)*o,h=o*(1-n)-a*s,f=o*(1-n)+a*s,m=o*(1-n)+a*s,p=n+o*(1-n),d=o*(1-n)-a*s,g=o*(1-n)-a*s,y=o*(1-n)+a*s,_=n+o*(1-n),w=[u,h,f,0,0,m,p,d,0,0,g,y,_,0,0,0,0,0,1,0];this._loadMatrix(w,r)}contrast(e,r){const n=(e||0)+1,s=-.5*(n-1),i=[n,0,0,0,s,0,n,0,0,s,0,0,n,0,s,0,0,0,1,0];this._loadMatrix(i,r)}saturate(e=0,r){const n=e*2/3+1,s=(n-1)*-.5,i=[n,s,s,0,0,s,n,s,0,0,s,s,n,0,0,0,0,0,1,0];this._loadMatrix(i,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,s,i){e=e||.2,r=r||.15,n=n||16770432,s=s||3375104;const o=$e.shared,[a,u,h]=o.setValue(n).toArray(),[f,m,p]=o.setValue(s).toArray(),d=[.3,.59,.11,0,0,a,u,h,e,0,f,m,p,r,0,a-f,u-m,h-p,0,0];this._loadMatrix(d,i)}night(e,r){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}R0.prototype.grayscale=R0.prototype.greyscale;var cB=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,hB=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class dB extends Vt{constructor(e,r){const n=new Qe;e.renderable=!1,super(hB,cB,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,r==null&&(r=20),this.scale=new Me(r,r)}apply(e,r,n,s){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),e.applyFilter(this,r,n,s)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var fB=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,pB=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class mB extends Vt{constructor(){super(pB,fB)}}var gB=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class vB extends Vt{constructor(e=.5,r=Math.random()){super(Eb,gB,{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const zw={AlphaFilter:nB,BlurFilter:vA,BlurFilterPass:I0,ColorMatrixFilter:R0,DisplacementFilter:dB,FXAAFilter:mB,NoiseFilter:vB};Object.entries(zw).forEach(([t,e])=>{Object.defineProperty(zw,t,{get(){return Ie("7.1.0",`filters.${t} has moved to ${t}`),e}})});class yB{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Nt.system.add(this.tickerUpdate,this,fs.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Nt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Qi=new yB;class Cu{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Cu.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Me,this.page=new Me,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,n,s,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Pd extends Cu{constructor(){super(...arguments),this.client=new Me,this.movement=new Me,this.offset=new Me,this.global=new Me,this.screen=new Me}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,n,s,i,o,a,u,h,f,m,p,d,g,y){throw new Error("Method not implemented.")}}class ln extends Pd{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class _a extends Pd{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}_a.DOM_DELTA_PIXEL=0,_a.DOM_DELTA_LINE=1,_a.DOM_DELTA_PAGE=2;const xB=2048,_B=new Me,Lm=new Me;class wB{constructor(e){this.dispatch=new wu,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((n,s)=>n.priority-s.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let n=0,s=r.length;n<s;n++)r[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){Qi.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[n](this.rootTarget,this.rootTarget.eventMode,_B.set(e,r),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,r){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,i=n.length-1;s<i;s++)if(e.currentTarget=n[s],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=n.length-2;s>=0;s--)if(e.currentTarget=n[s],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(r)?r:[r];for(let i=n.length-1;i>=0;i--)s.forEach(o=>{e.currentTarget=n[i],this.notifyTarget(e,o)})}propagationPath(e){const r=[e];for(let n=0;n<xB&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,n,s,i,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Qi.pauseUpdate=!1),e.interactiveChildren&&e.children){const f=e.children;for(let m=f.length-1;m>=0;m--){const p=f[m],d=this.hitTestMoveRecursive(p,this._isInteractive(r)?r:p.eventMode,n,s,i,o||i(e,n));if(d){if(d.length>0&&!d[d.length-1].parent)continue;const g=e.isInteractive();(d.length>0||g)&&(g&&this._allInteractiveElements.push(e),d.push(e)),this._hitElements.length===0&&(this._hitElements=d),a=!0}}}const u=this._isInteractive(r),h=e.isInteractive();return u&&h&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:u&&!i(e,n)&&s(e,n)?h?[e]:[]:null}hitTestRecursive(e,r,n,s,i){if(this._interactivePrune(e)||i(e,n))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Qi.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let h=u.length-1;h>=0;h--){const f=u[h],m=this.hitTestRecursive(f,this._isInteractive(r)?r:f.eventMode,n,s,i);if(m){if(m.length>0&&!m[m.length-1].parent)continue;const p=e.isInteractive();return(m.length>0||p)&&m.push(e),m}}}const o=this._isInteractive(r),a=e.isInteractive();return o&&s(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){var n;if(e.hitArea&&(e.worldTransform.applyInverse(r,Lm),!e.hitArea.contains(Lm.x,Lm.y)))return!0;if(e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;if(s&&!((n=s.containsPoint)!=null&&n.call(s,r)))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){var i,o;r=r??e.type;const n=`on${r}`;(o=(i=e.currentTarget)[n])==null||o.call(i,e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof ln)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const s=r.button===2;this.dispatchEvent(r,s?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var u,h;if(!(e instanceof ln)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",s=this.trackingData(e.pointerId),i=this.findMountedTarget(s.overTargets);if(((u=s.overTargets)==null?void 0:u.length)>0&&i!==r.target){const f=e.type==="mousemove"?"mouseout":"pointerout",m=this.createPointerEvent(e,f,i);if(this.dispatchEvent(m,"pointerout"),n&&this.dispatchEvent(m,"mouseout"),!r.composedPath().includes(i)){const p=this.createPointerEvent(e,"pointerleave",i);for(p.eventPhase=p.AT_TARGET;p.target&&!r.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(m)}if(i!==r.target){const f=e.type==="mousemove"?"mouseover":"pointerover",m=this.clonePointerEvent(r,f);this.dispatchEvent(m,"pointerover"),n&&this.dispatchEvent(m,"mouseover");let p=i==null?void 0:i.parent;for(;p&&p!==this.rootTarget.parent&&p!==r.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const d=this.clonePointerEvent(r,"pointerenter");for(d.eventPhase=d.AT_TARGET;d.target&&d.target!==i&&d.target!==this.rootTarget.parent;)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseenter"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(m)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(h=r.target)==null?void 0:h.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var o;if(!(e instanceof ln)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),s=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),s&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const i=this.clonePointerEvent(n,"pointerenter");for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),s&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(i)}mapPointerOut(e){if(!(e instanceof ln)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(r.overTargets),i=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(i),n&&this.dispatchEvent(i,"mouseout");const o=this.createPointerEvent(e,"pointerleave",s);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(i),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof ln)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),i=this.findMountedTarget(s.pressTargetsByButton[e.button]);let o=i;if(i&&!n.composedPath().includes(i)){let a=i;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const u=n.button===2;this.notifyTarget(n,u?"rightupoutside":"mouseupoutside")}a=a.parent}delete s.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:r});const u=s.clicksByButton[e.button];if(u.target===a.target&&r-u.timeStamp<200?++u.clickCount:u.clickCount=1,u.target=a.target,u.timeStamp=r,a.detail=u.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof ln)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(n){let i=n;for(;i;)s.currentTarget=i,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),i=i.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof _a)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let n=1;n<e.length&&e[n].parent===r;n++)r=e[n];return r}createPointerEvent(e,r,n){const s=this.allocateEvent(ln);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=n??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof r=="string"&&(s.type=r),s}createWheelEvent(e){const r=this.allocateEvent(_a);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const n=this.allocateEvent(ln);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=r??n.type,n}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof ln&&r instanceof ln&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof Pd&&r instanceof Pd&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const n=e.currentTarget._events[r];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let s=0,i=n.length;s<i&&!e.propagationImmediatelyStopped;s++)n[s].once&&e.currentTarget.removeListener(r,n[s].fn,void 0,!0),n[s].fn.call(n[s].context,e)}}const SB=1,EB={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},M0=class k0{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new wB(null),Qi.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ln(null),this.rootWheelEvent=new _a(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...k0.defaultEventFeatures},{set:(r,n,s)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),r[n]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,k0._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":r&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":r&&Object.assign(this.domElement.style,n);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,s=r.length;n<s;n++){const i=r[n],o=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Qi.pointerMoved();const r=this.normalizeToPointerData(e);for(let n=0,s=r.length;n<s;n++){const i=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const n=r!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let i=0,o=s.length;i<o;i++){const a=this.bootstrapEvent(this.rootPointerEvent,s[i]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this.normalizeToPointerData(e);for(let n=0,s=r.length;n<s;n++){const i=this.bootstrapEvent(this.rootPointerEvent,r[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this.removeEvents(),this.domElement=e,Qi.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Qi.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Qi.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,r,n){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},i=1/this.resolution;e.x=(r-s.left)*(this.domElement.width/s.width)*i,e.y=(n-s.top)*(this.domElement.height/s.height)*i}normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,s=e.changedTouches.length;n<s;n++){const i=e.changedTouches[n];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=e.type,r.push(i)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=SB),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,r.push(n)}else r.push(e);return r}normalizeWheelEvent(e){const r=this.rootWheelEvent;return this.transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=EB[e.type]||e.type),e}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}};M0.extension={name:"events",type:[oe.RendererSystem,oe.CanvasRendererSystem]},M0.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let D0=M0;fe.add(D0);function Hw(t){return t==="dynamic"||t==="static"}const TB={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Hw(D0.defaultEventMode)},set interactive(t){Ie("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??D0.defaultEventMode},set eventMode(t){this._internalInteractive=Hw(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof r=="object"?r.signal:void 0,i=typeof r=="object"?r.once===!0:!1,o=typeof e=="function"?void 0:e;t=n?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,u=this;s&&s.addEventListener("abort",()=>{u.off(t,a,o)}),i?u.once(t,a,o):u.on(t,a,o)},removeEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,s)},dispatchEvent(t){if(!(t instanceof Cu))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};tt.mixin(TB);const bB={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};tt.mixin(bB);const AB=9,uh=100,CB=0,PB=0,$w=2,Vw=1,IB=-1e3,RB=-1e3,MB=2;class yA{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(pi.tablet||pi.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${uh}px`,r.style.height=`${uh}px`,r.style.position="absolute",r.style.top=`${CB}px`,r.style.left=`${PB}px`,r.style.zIndex=$w.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${Vw}px`,e.style.height=`${Vw}px`,e.style.position="absolute",e.style.top=`${IB}px`,e.style.left=`${RB}px`,e.style.zIndex=MB.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const e=performance.now();if(pi.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:s,height:i}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:u}=this.renderer,h=s/o*u,f=i/a*u;let m=this.div;m.style.left=`${r}px`,m.style.top=`${n}px`,m.style.width=`${o}px`,m.style.height=`${a}px`;for(let p=0;p<this.children.length;p++){const d=this.children[p];if(d.renderId!==this.renderId)d._accessibleActive=!1,ma(this.children,p,1),this.div.removeChild(d._accessibleDiv),this.pool.push(d._accessibleDiv),d._accessibleDiv=null,p--;else{m=d._accessibleDiv;let g=d.hitArea;const y=d.worldTransform;d.hitArea?(m.style.left=`${(y.tx+g.x*y.a)*h}px`,m.style.top=`${(y.ty+g.y*y.d)*f}px`,m.style.width=`${g.width*y.a*h}px`,m.style.height=`${g.height*y.d*f}px`):(g=d.getBounds(),this.capHitArea(g),m.style.left=`${g.x*h}px`,m.style.top=`${g.y*f}px`,m.style.width=`${g.width*h}px`,m.style.height=`${g.height*f}px`,m.title!==d.accessibleTitle&&d.accessibleTitle!==null&&(m.title=d.accessibleTitle),m.getAttribute("aria-label")!==d.accessibleHint&&d.accessibleHint!==null&&m.setAttribute("aria-label",d.accessibleHint)),(d.accessibleTitle!==m.title||d.tabIndex!==m.tabIndex)&&(m.title=d.accessibleTitle,m.tabIndex=d.tabIndex,this.debug&&this.updateDebugHTML(m))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:n}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${uh}px`,r.style.height=`${uh}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=$w.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:n}=e.target,s=this.renderer.events.rootBoundary,i=Object.assign(new Cu(s),{target:n});s.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>s.dispatchEvent(i,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===AB&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}yA.extension={name:"accessibility",type:[oe.RendererPlugin,oe.CanvasRendererPlugin]};fe.add(yA);var zt=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(zt||{});const Id={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let Ln,zo;function jw(){zo={bptc:Ln.getExtension("EXT_texture_compression_bptc"),astc:Ln.getExtension("WEBGL_compressed_texture_astc"),etc:Ln.getExtension("WEBGL_compressed_texture_etc"),s3tc:Ln.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ln.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:Ln.getExtension("WEBGL_compressed_texture_pvrtc")||Ln.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:Ln.getExtension("WEBGL_compressed_texture_etc1"),atc:Ln.getExtension("WEBGL_compressed_texture_atc")}}const kB={extension:{type:oe.DetectionParser,priority:2},test:async()=>{const t=le.ADAPTER.createCanvas().getContext("webgl");return t?(Ln=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{zo||jw();const e=[];for(const r in zo)zo[r]&&e.push(r);return[...e,...t]},remove:async t=>(zo||jw(),t.filter(e=>!(e in zo)))};fe.add(kB);class DB extends Qd{constructor(e,r={width:1,height:1,autoLoad:!0}){let n,s;typeof e=="string"?(n=e,s=new Uint8Array):(n=null,s=e),super(s,r),this.origin=n,this.buffer=s?new qg(s):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new qg(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Js extends DB{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=Js._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||Js._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,n){const s=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let i=0,o=this.levels;i<o;i++){const{levelID:a,levelWidth:u,levelHeight:h,levelBuffer:f}=this._levelBuffers[i];s.compressedTexImage2D(s.TEXTURE_2D,a,this.format,u,h,0,f)}return!0}onBlobLoaded(){this._levelBuffers=Js._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,r,n,s,i,o,a){const u=new Array(n);let h=e.byteOffset,f=o,m=a,p=f+s-1&~(s-1),d=m+i-1&~(i-1),g=p*d*Id[r];for(let y=0;y<n;y++)u[y]={levelID:y,levelWidth:n>1?f:p,levelHeight:n>1?m:d,levelBuffer:new Uint8Array(e.buffer,h,g)},h+=g,f=f>>1||1,m=m>>1||1,p=f+s-1&~(s-1),d=m+i-1&~(i-1),g=p*d*Id[r];return u}}const Um=4,ch=124,FB=32,Ww=20,NB=542327876,hh={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},BB={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},dh={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},OB=1,LB=2,UB=4,GB=64,zB=512,HB=131072,$B=827611204,VB=861165636,jB=894720068,WB=808540228,XB=4,YB={[$B]:zt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[VB]:zt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[jB]:zt.COMPRESSED_RGBA_S3TC_DXT5_EXT},QB={70:zt.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:zt.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:zt.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:zt.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:zt.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:zt.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:zt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:zt.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:zt.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:zt.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:zt.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function KB(t){const e=new Uint32Array(t);if(e[0]!==NB)throw new Error("Invalid DDS file magic word");const r=new Uint32Array(t,0,ch/Uint32Array.BYTES_PER_ELEMENT),n=r[hh.HEIGHT],s=r[hh.WIDTH],i=r[hh.MIPMAP_COUNT],o=new Uint32Array(t,hh.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,FB/Uint32Array.BYTES_PER_ELEMENT),a=o[OB];if(a&UB){const u=o[BB.FOURCC];if(u!==WB){const T=YB[u],E=Um+ch,A=new Uint8Array(t,E);return[new Js(A,{format:T,width:s,height:n,levels:i})]}const h=Um+ch,f=new Uint32Array(e.buffer,h,Ww/Uint32Array.BYTES_PER_ELEMENT),m=f[dh.DXGI_FORMAT],p=f[dh.RESOURCE_DIMENSION],d=f[dh.MISC_FLAG],g=f[dh.ARRAY_SIZE],y=QB[m];if(y===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${m}`);if(d===XB)throw new Error("DDSParser does not support cubemap textures");if(p===6)throw new Error("DDSParser does not supported 3D texture data");const _=new Array,w=Um+ch+Ww;if(g===1)_.push(new Uint8Array(t,w));else{const T=Id[y];let E=0,A=s,b=n;for(let R=0;R<i;R++){const P=Math.max(1,A+3&-4),k=Math.max(1,b+3&-4),M=P*k*T;E+=M,A=A>>>1,b=b>>>1}let I=w;for(let R=0;R<g;R++)_.push(new Uint8Array(t,I,E)),I+=E}return _.map(T=>new Js(T,{format:y,width:s,height:n,levels:i}))}throw a&GB?new Error("DDSParser does not support uncompressed texture data."):a&zB?new Error("DDSParser does not supported YUV uncompressed texture data."):a&HB?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&LB?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Xw=[171,75,84,88,32,49,49,187,13,10,26,10],ZB=67305985,on={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},F0=64,Yw={[ye.UNSIGNED_BYTE]:1,[ye.UNSIGNED_SHORT]:2,[ye.INT]:4,[ye.UNSIGNED_INT]:4,[ye.FLOAT]:4,[ye.HALF_FLOAT]:8},qB={[ne.RGBA]:4,[ne.RGB]:3,[ne.RG]:2,[ne.RED]:1,[ne.LUMINANCE]:1,[ne.LUMINANCE_ALPHA]:2,[ne.ALPHA]:1},JB={[ye.UNSIGNED_SHORT_4_4_4_4]:2,[ye.UNSIGNED_SHORT_5_5_5_1]:2,[ye.UNSIGNED_SHORT_5_6_5]:2};function eO(t,e,r=!1){const n=new DataView(e);if(!tO(t,n))return null;const s=n.getUint32(on.ENDIANNESS,!0)===ZB,i=n.getUint32(on.GL_TYPE,s),o=n.getUint32(on.GL_FORMAT,s),a=n.getUint32(on.GL_INTERNAL_FORMAT,s),u=n.getUint32(on.PIXEL_WIDTH,s),h=n.getUint32(on.PIXEL_HEIGHT,s)||1,f=n.getUint32(on.PIXEL_DEPTH,s)||1,m=n.getUint32(on.NUMBER_OF_ARRAY_ELEMENTS,s)||1,p=n.getUint32(on.NUMBER_OF_FACES,s),d=n.getUint32(on.NUMBER_OF_MIPMAP_LEVELS,s),g=n.getUint32(on.BYTES_OF_KEY_VALUE_DATA,s);if(h===0||f!==1)throw new Error("Only 2D textures are supported");if(p!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(m!==1)throw new Error("WebGL does not support array textures");const y=4,_=4,w=u+3&-4,T=h+3&-4,E=new Array(m);let A=u*h;i===0&&(A=w*T);let b;if(i!==0?Yw[i]?b=Yw[i]*qB[o]:b=JB[i]:b=Id[a],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const I=r?nO(n,g,s):null;let R=A*b,P=u,k=h,M=w,B=T,F=F0+g;for(let N=0;N<d;N++){const U=n.getUint32(F,s);let H=F+4;for(let Q=0;Q<m;Q++){let W=E[Q];W||(W=E[Q]=new Array(d)),W[N]={levelID:N,levelWidth:d>1||i!==0?P:M,levelHeight:d>1||i!==0?k:B,levelBuffer:new Uint8Array(e,H,R)},H+=R}F+=U+4,F=F%4!==0?F+4-F%4:F,P=P>>1||1,k=k>>1||1,M=P+y-1&~(y-1),B=k+_-1&~(_-1),R=M*B*b}return i!==0?{uncompressed:E.map(N=>{let U=N[0].levelBuffer,H=!1;return i===ye.FLOAT?U=new Float32Array(N[0].levelBuffer.buffer,N[0].levelBuffer.byteOffset,N[0].levelBuffer.byteLength/4):i===ye.UNSIGNED_INT?(H=!0,U=new Uint32Array(N[0].levelBuffer.buffer,N[0].levelBuffer.byteOffset,N[0].levelBuffer.byteLength/4)):i===ye.INT&&(H=!0,U=new Int32Array(N[0].levelBuffer.buffer,N[0].levelBuffer.byteOffset,N[0].levelBuffer.byteLength/4)),{resource:new Qd(U,{width:N[0].levelWidth,height:N[0].levelHeight}),type:i,format:H?rO(o):o}}),kvData:I}:{compressed:E.map(N=>new Js(null,{format:a,width:u,height:h,levels:d,levelBuffers:N})),kvData:I}}function tO(t,e){for(let r=0;r<Xw.length;r++)if(e.getUint8(r)!==Xw[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function rO(t){switch(t){case ne.RGBA:return ne.RGBA_INTEGER;case ne.RGB:return ne.RGB_INTEGER;case ne.RG:return ne.RG_INTEGER;case ne.RED:return ne.RED_INTEGER;default:return t}}function nO(t,e,r){const n=new Map;let s=0;for(;s<e;){const i=t.getUint32(F0+s,r),o=F0+s+4,a=3-(i+3)%4;if(i===0||i>e-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let u=0;for(;u<i&&t.getUint8(o+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(t.buffer,o,u)),f=new DataView(t.buffer,o+u+1,i-u-1);n.set(h,f),s+=4+i+a}return n}const iO={extension:{type:oe.LoadParser,priority:_n.High},name:"loadDDS",test(t){return ys(t,".dds")},async load(t,e,r){const n=await(await le.ADAPTER.fetch(t)).arrayBuffer(),s=KB(n).map(i=>{const o=new Se(i,{mipmap:Kn.OFF,alphaMode:gr.NO_PREMULTIPLIED_ALPHA,resolution:Ei(t),...e.data});return Tu(o,r,t)});return s.length===1?s[0]:s},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};fe.add(iO);const sO={extension:{type:oe.LoadParser,priority:_n.High},name:"loadKTX",test(t){return ys(t,".ktx")},async load(t,e,r){const n=await(await le.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:i,kvData:o}=eO(t,n),a=s??i,u={mipmap:Kn.OFF,alphaMode:gr.NO_PREMULTIPLIED_ALPHA,resolution:Ei(t),...e.data},h=a.map(f=>{a===i&&Object.assign(u,{type:f.type,format:f.format});const m=f.resource??f,p=new Se(m,u);return p.ktxKeyValueData=o,Tu(p,r,t)});return h.length===1?h[0]:h},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};fe.add(sO);const oO=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],aO={extension:oe.ResolveParser,test:t=>{const e=Ot.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var n,s;const e=t.split("."),r=e.pop();if(["ktx","dds"].includes(r)){const i=e.pop();if(oO.includes(i))return{resolution:parseFloat(((n=le.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:i,src:t}}return{resolution:parseFloat(((s=le.RETINA_PREFIX.exec(t))==null?void 0:s[1])??"1"),format:r,src:t}}};fe.add(aO);const fh=new Ee,lO=4,xA=class Pl{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,r,n,s){const i=new Image;return i.src=await this.base64(e,r,n,s),i}async base64(e,r,n,s){const i=this.canvas(e,s);if(i.toBlob!==void 0)return new Promise((o,a)=>{i.toBlob(u=>{if(!u){a(new Error("ICanvas.toBlob failed!"));return}const h=new FileReader;h.onload=()=>o(h.result),h.onerror=a,h.readAsDataURL(u)},r,n)});if(i.toDataURL!==void 0)return i.toDataURL(r,n);if(i.convertToBlob!==void 0){const o=await i.convertToBlob({type:r,quality:n});return new Promise((a,u)=>{const h=new FileReader;h.onload=()=>a(h.result),h.onerror=u,h.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,r){const{pixels:n,width:s,height:i,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,r);o&&Pl._flipY(n,s,i),a&&Pl._unpremultiplyAlpha(n);const u=new kk(s,i,1),h=new ImageData(new Uint8ClampedArray(n.buffer),s,i);return u.context.putImageData(h,0,0),u.canvas}pixels(e,r){const{pixels:n,width:s,height:i,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,r);return o&&Pl._flipY(n,s,i),a&&Pl._unpremultiplyAlpha(n),n}_rawPixels(e,r){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let s,i=!1,o=!1,a,u=!1;e&&(e instanceof co?a=e:(a=n.generateTexture(e,{region:r,resolution:n.resolution,multisample:n.multisample}),u=!0,r&&(fh.width=r.width,fh.height=r.height,r=fh)));const h=n.gl;if(a){if(s=a.baseTexture.resolution,r=r??a.frame,i=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===ne.RGBA,!u){n.renderTexture.bind(a);const d=a.framebuffer.glFramebuffers[n.CONTEXT_UID];d.blitFramebuffer&&n.framebuffer.bind(d.blitFramebuffer)}}else s=n.resolution,r||(r=fh,r.width=n.width/s,r.height=n.height/s),i=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const f=Math.max(Math.round(r.width*s),1),m=Math.max(Math.round(r.height*s),1),p=new Uint8Array(lO*f*m);return h.readPixels(Math.round(r.x*s),Math.round(r.y*s),f,m,h.RGBA,h.UNSIGNED_BYTE,p),u&&(a==null||a.destroy(!0)),{pixels:p,width:f,height:m,flipY:i,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,r,n){const s=r<<2,i=n>>1,o=new Uint8Array(s);for(let a=0;a<i;a++){const u=a*s,h=(n-a-1)*s;o.set(e.subarray(u,u+s)),e.copyWithin(u,h,h+s),e.set(o,h)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const r=e.length;for(let n=0;n<r;n+=4){const s=e[n+3];if(s!==0){const i=255.001/s;e[n]=e[n]*i+.5,e[n+1]=e[n+1]*i+.5,e[n+2]=e[n+2]*i+.5}}}};xA.extension={name:"extract",type:oe.RendererSystem};let uO=xA;fe.add(uO);class cO{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function hO(t,e){var n;let r=!1;if((n=t==null?void 0:t._textures)!=null&&n.length){for(let s=0;s<t._textures.length;s++)if(t._textures[s]instanceof se){const i=t._textures[s].baseTexture;e.includes(i)||(e.push(i),r=!0)}}return r}function dO(t,e){if(t.baseTexture instanceof Se){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function fO(t,e){if(t._texture&&t._texture instanceof se){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function pO(t,e){return e instanceof $v?(e.updateText(!0),!0):!1}function mO(t,e){if(e instanceof Mr){const r=e.toFontString();return Wi.measureFont(r),!0}return!1}function gO(t,e){if(t instanceof $v){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function vO(t,e){return t instanceof Mr?(e.includes(t)||e.push(t),!0):!1}const _A=class wA{constructor(e){this.limiter=new cO(wA.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(gO),this.registerFindHook(vO),this.registerFindHook(hO),this.registerFindHook(dO),this.registerFindHook(fO),this.registerUploadHook(pO),this.registerUploadHook(mO)}upload(e){return new Promise(r=>{e&&this.add(e),this.queue.length?(this.completes.push(r),this.ticking||(this.ticking=!0,Nt.system.addOnce(this.tick,this,fs.UTILITY))):r()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let r=!1;if(e&&!e._destroyed){for(let n=0,s=this.uploadHooks.length;n<s;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)Nt.system.addOnce(this.tick,this,fs.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let r=0,n=e.length;r<n;r++)e[r]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let r=0,n=this.addHooks.length;r<n&&!this.addHooks[r](e,this.queue);r++);if(e instanceof ar)for(let r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}destroy(){this.ticking&&Nt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_A.uploadsPerFrame=4;let N0=_A;Object.defineProperties(le,{UPLOADS_PER_FRAME:{get(){return N0.uploadsPerFrame},set(t){Ie("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),N0.uploadsPerFrame=t}}});function SA(t,e){return e instanceof Se?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function yO(t,e){if(!(e instanceof $l))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let s=0;s<n.length;s++){const{texture:i}=n[s].style;i&&SA(t,i.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function xO(t,e){return t instanceof $l?(e.push(t),!0):!1}class EA extends N0{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(xO),this.registerUploadHook(SA),this.registerUploadHook(yO)}}EA.extension={name:"prepare",type:oe.RendererSystem};fe.add(EA);const TA=class Il{constructor(e,r,n){this.linkedSheets=[],(e instanceof Se||e instanceof se)&&(e={texture:e,data:r,resolutionFilename:n});const{texture:s,data:i,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=s instanceof se?s:null,this.baseTexture=s instanceof Se?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=i;const u=this.baseTexture.resource;this.resolution=this._updateResolution(o||(u?u.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:r}=this.data.meta;let n=Ei(e,null);return n===null&&(n=typeof r=="number"?r:parseFloat(r??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Il.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const n=Il.BATCH_SIZE;for(;r-e<n&&r<this._frameKeys.length;){const s=this._frameKeys[r],i=this._frames[s],o=i.frame;if(o){let a=null,u=null;const h=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,f=new Ee(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);i.rotated?a=new Ee(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Ee(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(u=new Ee(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[s]=new se(this.baseTexture,a,f,u,i.rotated?2:0,i.anchor,i.borders),se.addToCache(this.textures[s],this.cachePrefix+s.toString())}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let n=0;n<e[r].length;n++){const s=e[r][n];this.animations[r].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Il.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Il.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var r;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)==null||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};TA.BATCH_SIZE=1e3;let Qw=TA;const _O=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function bA(t,e,r){const n={};if(t.forEach(s=>{n[s]=e}),Object.keys(e.textures).forEach(s=>{n[`${e.cachePrefix}${s}`]=e.textures[s]}),!r){const s=Ot.dirname(t[0]);e.linkedSheets.forEach((i,o)=>{Object.assign(n,bA([`${s}/${e.data.meta.related_multi_packs[o]}`],i,!0))})}return n}const wO={extension:oe.Asset,cache:{test:t=>t instanceof Qw,getCacheableAssets:(t,e)=>bA(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),r=e.pop(),n=e.pop();return r==="json"&&_O.includes(n)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=le.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:oe.LoadParser,priority:_n.Normal},async testParse(t,e){return Ot.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var f,m;const{texture:n,imageFilename:s,cachePrefix:i}=(e==null?void 0:e.data)??{};let o=Ot.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(n&&n.baseTexture)a=n;else{const p=y0(o+(s??t.meta.image),e.src);a=(await r.load([p]))[p]}const u=new Qw({texture:a.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:i});await u.parse();const h=(f=t==null?void 0:t.meta)==null?void 0:f.related_multi_packs;if(Array.isArray(h)){const p=[];for(const g of h){if(typeof g!="string")continue;let y=o+g;(m=e.data)!=null&&m.ignoreMultiPack||(y=y0(y,e.src),p.push(r.load({src:y,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(p);u.linkedSheets=d,d.forEach(g=>{g.linkedSheets=[u].concat(u.linkedSheets.filter(y=>y!==g))})}return u},unload(t){t.destroy(!0)}}};fe.add(wO);const B0=class Ho extends Mr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Ho(Object.keys(Ho.defaultOptions).reduce((r,n)=>({...r,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Ho.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,r={}){const{availableFonts:n}=Ho;if(n[e]){const s=n[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return le.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((i,o)=>{const a=URL.createObjectURL(s),u=new FileReader;u.onload=()=>i([a,u.result]),u.onerror=o,u.readAsDataURL(s)})).then(async([s,i])=>{const o=Object.assign({family:Ot.basename(e,Ot.extname(e)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:i,refs:1,originalUrl:e,fontFace:null},r);n[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const r=e.filter(n=>!this._overrides.includes(n));r.length>0&&(this._overrides.push(...r),this.styleID++)}removeOverride(...e){const r=e.filter(n=>this._overrides.includes(n));r.length>0&&(this._overrides=this._overrides.filter(n=>!r.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,r)=>`${e}
            @font-face {
                font-family: "${r.family}";
                src: url('${r.dataSrc}');
                font-weight: ${r.weight};
                font-style: ${r.style};
                font-display: ${r.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=HT(e)),typeof e=="number"?Pk(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const r=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&r<1&&(e+=(r*255|0).toString(16).padStart(2,"0"));const i=`${n}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${i} ${e}`}reset(){Object.assign(this,Ho.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(r=>setTimeout(r,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=le.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};B0.availableFonts={},B0.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Gm=B0;const ph=class $o extends ei{constructor(e="",r={}){super(se.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,s=se.from(n,{scaleMode:le.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new Ee,s.trim=new Ee,this.texture=s;const i="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(i,"svg"),u=document.createElementNS(i,"foreignObject"),h=document.createElementNS(o,"div"),f=document.createElementNS(o,"style");u.setAttribute("width","10000"),u.setAttribute("height","10000"),u.style.overflow="hidden",a.appendChild(u),this.maxWidth=$o.defaultMaxWidth,this.maxHeight=$o.defaultMaxHeight,this._domElement=h,this._styleElement=f,this._svgRoot=a,this._foreignObject=u,this._foreignObject.appendChild(f),this._foreignObject.appendChild(h),this._image=n,this._loadImage=new Image,this._autoResolution=$o.defaultAutoResolution,this._resolution=$o.defaultResolution??le.RESOLUTION,this.text=e,this.style=r}measureText(e){var f,m;const{text:r,style:n,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:r,style:n.toCSS(s)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=i;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const u=Math.min(this.maxWidth,Math.ceil(o)),h=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",u.toString()),this._svgRoot.setAttribute("height",h.toString()),r!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(f=this._style)==null?void 0:f.toCSS(s)}),this._styleElement.textContent=(m=this._style)==null?void 0:m.toGlobalCSS()),{width:u+n.padding*2,height:h+n.padding*2}}async updateText(e=!0){const{style:r,_image:n,_loadImage:s}=this;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!this.dirty&&e)return;const{width:i,height:o}=this.measureText();n.width=s.width=Math.ceil(Math.max(1,i)),n.height=s.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(u=>{s.onload=async()=>{if(a<this._updateID){u();return}await r.onBeforeDraw(),n.src=s.src,s.onload=null,s.src="",this.updateTexture(),u()};const h=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(h)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:r,_image:n,resolution:s}=this,{padding:i}=e,{baseTexture:o}=r;r.trim.width=r._frame.width=n.width/s,r.trim.height=r._frame.height=n.height/s,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-i*2,r.orig.height=r._frame.height-i*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,s,i,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},$o.defaultDestroyOptions,e),super.destroy(e);const r=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=r,(s=this._svgRoot)==null||s.remove(),this._svgRoot=r,(i=this._domElement)==null||i.remove(),this._domElement=r,(o=this._foreignObject)==null||o.remove(),this._foreignObject=r,(a=this._styleElement)==null||a.remove(),this._styleElement=r,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=r,this._image.src="",this._image=r}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const r=Ji(this.scale.x)||1;this.scale.x=r*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const r=Ji(this.scale.y)||1;this.scale.y=r*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Gm?(this.ownsStyle=!1,this._style=e):e instanceof Mr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Gm.from(e)):(this.ownsStyle=!0,this._style=new Gm(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};ph.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},ph.defaultMaxWidth=2024,ph.defaultMaxHeight=2024,ph.defaultAutoResolution=!0;const SO=({distance:t=0})=>Pe.jsx(ot.Text,{text:`Distance: ${t.toFixed(1)}`,style:new Mr({fill:"#ffffff",fontSize:16})}),AA=(t,e=!0)=>{const r=`${t}`,[n,s]=xe.useState(()=>(e?localStorage:sessionStorage).getItem(r));return xe.useEffect(()=>{const i=()=>s(void 0);return!e&&window.addEventListener("beforeunload",i),()=>{!e&&window.removeEventListener("beforeunload",i)}},[]),xe.useEffect(()=>{(e?localStorage:sessionStorage).setItem(r,n)},[t,n]),{value:n,setValue:s}},EO=({onLose:t=()=>{}})=>{const[e,r]=xe.useState(!0),{value:n,setValue:s}=AA("currentDistance",!1),i=()=>{r(!1),s(0),t()};return ot.useTick(()=>{e&&s(o=>(Number(o)+.01).toFixed(2))}),Pe.jsxs(ot.Container,{children:[Pe.jsx(eB,{onCollission:i}),e&&Pe.jsx(LN,{}),Pe.jsx(SO,{distance:Number(n)})]})},TO=({title:t,isInitialized:e,onAnimationEnd:r=()=>{}})=>{const[n,s]=xe.useState(0),[i,o]=xe.useState(!1),a=xe.useRef(null),{screenHeight:u,screenWidth:h}=Au(),f=xe.useRef(new Mr({fill:"#ddd",align:"center",fontWeight:"100",fontSize:44,letterSpacing:115,dropShadow:!0,dropShadowDistance:1,dropShadowBlur:2}));return xe.useEffect(()=>{a.current&&(a.current.filters=[new vA(20)]),e&&o(!0)},[a]),ot.useTick(()=>{var m;a.current&&(i?(f.current.letterSpacing=15,s(1),a.current.filters[0].blur=0):n<1?((m=a.current.filters)!=null&&m.length&&(a.current.filters[0].blur-=.1),f.current.letterSpacing-=.5,s(p=>p+.005)):(o(!0),r()))}),Pe.jsx(ot.Text,{text:t,style:f.current,x:h/2,y:u/2,alpha:n,anchor:.5,ref:a,scale:[1.1,.5]})},bO="/assets/start-btn-DgljfGp5.png",AO=({onStartClick:t=()=>{}})=>{const{setValue:e,value:r}=AA("SKIP_INIT_ANIMATION"),{screenHeight:n,screenWidth:s}=Au();return Pe.jsxs(Pe.Fragment,{children:[Pe.jsx(TO,{title:" BODY PROBLEM",isInitialized:r,onAnimationEnd:()=>e(!0)}),r&&Pe.jsx(ot.Sprite,{image:bO,scale:.5,anchor:.5,x:s/2,click:()=>t(),y:n-70,eventMode:"static",alpha:.8})]})},CO=({onBack:t=()=>{}})=>Pe.jsxs(Pe.Fragment,{children:[Pe.jsx(ot.Text,{text:"Game over",style:new Mr({fill:16746632,fontSize:30}),x:400,y:240,anchor:.5}),Pe.jsx(ot.Text,{text:"BACK",style:new Mr({fill:"#aaa",fontSize:30}),eventMode:"static",click:()=>t(),x:400,y:300,anchor:.5})]}),Kw="/assets/bg-CcEZgqnT.png",Zw=1024,PO=()=>{const[t,e]=xe.useState(0);return ot.useTick(r=>{e(n=>(n+r*1)%Zw)}),Pe.jsxs(Pe.Fragment,{children:[Pe.jsx(ot.Sprite,{image:Kw,x:0,y:t-Zw}),Pe.jsx(ot.Sprite,{image:Kw,x:0,y:t})]})};var IO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,RO=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`;const CA=class extends Vt{constructor(t=[0,0],e,r=0){super(IO,RO),this.center=t,Object.assign(this,CA.defaults,e),this.time=r}apply(t,e,r,n){this.uniforms.time=this.time,t.applyFilter(this,e,r,n)}get center(){return this.uniforms.center}set center(t){this.uniforms.center=t}get amplitude(){return this.uniforms.amplitude}set amplitude(t){this.uniforms.amplitude=t}get wavelength(){return this.uniforms.wavelength}set wavelength(t){this.uniforms.wavelength=t}get brightness(){return this.uniforms.brightness}set brightness(t){this.uniforms.brightness=t}get speed(){return this.uniforms.speed}set speed(t){this.uniforms.speed=t}get radius(){return this.uniforms.radius}set radius(t){this.uniforms.radius=t}};let PA=CA;PA.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};const MO=(t={amplitude:40,brightness:4,radius:800,speed:500,wavelength:80})=>{const[e,r]=xe.useState(!1),[n,s]=xe.useState(null);xe.useEffect(()=>{const o=new PA([0,0],t);o.enabled=!1,s(o)},[]);const i=(o=[0,0])=>{n&&(n.center=o,n.enabled=!0,n.time=0),r(()=>!0)};return ot.useTick(()=>{e&&n&&(n.time>3?(n.enabled=!1,r(()=>!1)):n.time=n.time+=.01)}),{shockWaveFilter:n,runShockWave:i}},kO=()=>xe.useContext(bu),DO=()=>{const t=lf(),{screenHeight:e,screenWidth:r}=Au(),n=[Ft.Bodies.rectangle(r/2,-oh,r,Cl,{isStatic:!0,label:"BOUND.TOP",collisionFilter:{category:cA}}),Ft.Bodies.rectangle(r/2,e+oh,r,Cl,{isStatic:!0,label:"BOUND.BOTTOM",collisionFilter:{category:Oh}}),Ft.Bodies.rectangle(-oh,e/2,Cl,e,{isStatic:!0,label:"BOUND.LEFT",collisionFilter:{category:Oh}}),Ft.Bodies.rectangle(r+oh,e/2,Cl,e,{isStatic:!0,label:"BOUND.RIGHT",collisionFilter:{category:Oh}})];return xe.useEffect(()=>{t&&Ft.Composite.add(t.world,n)},[t]),null},FO=()=>{const{screenHeight:t,screenWidth:e}=Au(),r=new Mr({fill:16777215,fontSize:14});return Pe.jsx(ot.Text,{text:"ver. 0.0.0",x:e-5,y:t-5,anchor:[1,1],style:r})},NO={amplitude:150,brightness:8,radius:8e3,speed:9e3,wavelength:14e3},BO=()=>{const t=xe.useRef(null),{gameState:e,setGameState:r}=kO(),{shockWaveFilter:n,runShockWave:s}=MO(NO),{player:i}=Qv();return xe.useEffect(()=>{t.current&&n&&(t.current.filters=[n])},[t.current,n]),Pe.jsxs(ot.Container,{children:[Pe.jsxs(ot.Container,{ref:t,children:[Pe.jsx(PO,{}),(e==="GAME"||e==="GAME_OVER")&&Pe.jsx(EO,{onLose:()=>{s([(i==null?void 0:i.position.x)||0,(i==null?void 0:i.position.y)||0]),r("GAME_OVER")}}),Pe.jsx(DO,{})]}),e==="HOME"&&Pe.jsx(AO,{onStartClick:()=>r("GAME")}),e==="GAME_OVER"&&Pe.jsx(CO,{onBack:()=>r("HOME")}),Pe.jsx(FO,{})]})},qw=800,Jw=480,OO=()=>Pe.jsx(ot.Stage,{width:qw,height:Jw,options:{background:"#000",antialias:!0},children:Pe.jsx(FN,{screenSize:{width:qw,height:Jw},children:Pe.jsx(BO,{})})});zm.createRoot(document.getElementById("root")).render(Pe.jsx(jn.StrictMode,{children:Pe.jsx(OO,{})}))});export default LO();
